(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))f(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&f(x)}).observe(document,{childList:!0,subtree:!0});function o(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function f(u){if(u.ep)return;u.ep=!0;const h=o(u);fetch(u.href,h)}})();function Hf(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var ko={exports:{}},Nl={},jo={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var du;function Qf(){if(du)return Ye;du=1;var d=Symbol.for("react.element"),c=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),x=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),k=Symbol.iterator;function L(p){return p===null||typeof p!="object"?null:(p=k&&p[k]||p["@@iterator"],typeof p=="function"?p:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,T={};function _(p,M,le){this.props=p,this.context=M,this.refs=T,this.updater=le||V}_.prototype.isReactComponent={},_.prototype.setState=function(p,M){if(typeof p!="object"&&typeof p!="function"&&p!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,p,M,"setState")},_.prototype.forceUpdate=function(p){this.updater.enqueueForceUpdate(this,p,"forceUpdate")};function K(){}K.prototype=_.prototype;function U(p,M,le){this.props=p,this.context=M,this.refs=T,this.updater=le||V}var H=U.prototype=new K;H.constructor=U,G(H,_.prototype),H.isPureReactComponent=!0;var w=Array.isArray,I=Object.prototype.hasOwnProperty,B={current:null},re={key:!0,ref:!0,__self:!0,__source:!0};function de(p,M,le){var xe,Ce={},$e=null,pe=null;if(M!=null)for(xe in M.ref!==void 0&&(pe=M.ref),M.key!==void 0&&($e=""+M.key),M)I.call(M,xe)&&!re.hasOwnProperty(xe)&&(Ce[xe]=M[xe]);var Ee=arguments.length-2;if(Ee===1)Ce.children=le;else if(1<Ee){for(var Me=Array(Ee),Xe=0;Xe<Ee;Xe++)Me[Xe]=arguments[Xe+2];Ce.children=Me}if(p&&p.defaultProps)for(xe in Ee=p.defaultProps,Ee)Ce[xe]===void 0&&(Ce[xe]=Ee[xe]);return{$$typeof:d,type:p,key:$e,ref:pe,props:Ce,_owner:B.current}}function O(p,M){return{$$typeof:d,type:p.type,key:M,ref:p.ref,props:p.props,_owner:p._owner}}function se(p){return typeof p=="object"&&p!==null&&p.$$typeof===d}function ee(p){var M={"=":"=0",":":"=2"};return"$"+p.replace(/[=:]/g,function(le){return M[le]})}var ce=/\/+/g;function ie(p,M){return typeof p=="object"&&p!==null&&p.key!=null?ee(""+p.key):M.toString(36)}function F(p,M,le,xe,Ce){var $e=typeof p;($e==="undefined"||$e==="boolean")&&(p=null);var pe=!1;if(p===null)pe=!0;else switch($e){case"string":case"number":pe=!0;break;case"object":switch(p.$$typeof){case d:case c:pe=!0}}if(pe)return pe=p,Ce=Ce(pe),p=xe===""?"."+ie(pe,0):xe,w(Ce)?(le="",p!=null&&(le=p.replace(ce,"$&/")+"/"),F(Ce,M,le,"",function(Xe){return Xe})):Ce!=null&&(se(Ce)&&(Ce=O(Ce,le+(!Ce.key||pe&&pe.key===Ce.key?"":(""+Ce.key).replace(ce,"$&/")+"/")+p)),M.push(Ce)),1;if(pe=0,xe=xe===""?".":xe+":",w(p))for(var Ee=0;Ee<p.length;Ee++){$e=p[Ee];var Me=xe+ie($e,Ee);pe+=F($e,M,le,Me,Ce)}else if(Me=L(p),typeof Me=="function")for(p=Me.call(p),Ee=0;!($e=p.next()).done;)$e=$e.value,Me=xe+ie($e,Ee++),pe+=F($e,M,le,Me,Ce);else if($e==="object")throw M=String(p),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return pe}function fe(p,M,le){if(p==null)return p;var xe=[],Ce=0;return F(p,xe,"","",function($e){return M.call(le,$e,Ce++)}),xe}function X(p){if(p._status===-1){var M=p._result;M=M(),M.then(function(le){(p._status===0||p._status===-1)&&(p._status=1,p._result=le)},function(le){(p._status===0||p._status===-1)&&(p._status=2,p._result=le)}),p._status===-1&&(p._status=0,p._result=M)}if(p._status===1)return p._result.default;throw p._result}var W={current:null},z={transition:null},D={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:z,ReactCurrentOwner:B};function $(){throw Error("act(...) is not supported in production builds of React.")}return Ye.Children={map:fe,forEach:function(p,M,le){fe(p,function(){M.apply(this,arguments)},le)},count:function(p){var M=0;return fe(p,function(){M++}),M},toArray:function(p){return fe(p,function(M){return M})||[]},only:function(p){if(!se(p))throw Error("React.Children.only expected to receive a single React element child.");return p}},Ye.Component=_,Ye.Fragment=o,Ye.Profiler=u,Ye.PureComponent=U,Ye.StrictMode=f,Ye.Suspense=y,Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,Ye.act=$,Ye.cloneElement=function(p,M,le){if(p==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+p+".");var xe=G({},p.props),Ce=p.key,$e=p.ref,pe=p._owner;if(M!=null){if(M.ref!==void 0&&($e=M.ref,pe=B.current),M.key!==void 0&&(Ce=""+M.key),p.type&&p.type.defaultProps)var Ee=p.type.defaultProps;for(Me in M)I.call(M,Me)&&!re.hasOwnProperty(Me)&&(xe[Me]=M[Me]===void 0&&Ee!==void 0?Ee[Me]:M[Me])}var Me=arguments.length-2;if(Me===1)xe.children=le;else if(1<Me){Ee=Array(Me);for(var Xe=0;Xe<Me;Xe++)Ee[Xe]=arguments[Xe+2];xe.children=Ee}return{$$typeof:d,type:p.type,key:Ce,ref:$e,props:xe,_owner:pe}},Ye.createContext=function(p){return p={$$typeof:x,_currentValue:p,_currentValue2:p,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},p.Provider={$$typeof:h,_context:p},p.Consumer=p},Ye.createElement=de,Ye.createFactory=function(p){var M=de.bind(null,p);return M.type=p,M},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(p){return{$$typeof:v,render:p}},Ye.isValidElement=se,Ye.lazy=function(p){return{$$typeof:S,_payload:{_status:-1,_result:p},_init:X}},Ye.memo=function(p,M){return{$$typeof:N,type:p,compare:M===void 0?null:M}},Ye.startTransition=function(p){var M=z.transition;z.transition={};try{p()}finally{z.transition=M}},Ye.unstable_act=$,Ye.useCallback=function(p,M){return W.current.useCallback(p,M)},Ye.useContext=function(p){return W.current.useContext(p)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(p){return W.current.useDeferredValue(p)},Ye.useEffect=function(p,M){return W.current.useEffect(p,M)},Ye.useId=function(){return W.current.useId()},Ye.useImperativeHandle=function(p,M,le){return W.current.useImperativeHandle(p,M,le)},Ye.useInsertionEffect=function(p,M){return W.current.useInsertionEffect(p,M)},Ye.useLayoutEffect=function(p,M){return W.current.useLayoutEffect(p,M)},Ye.useMemo=function(p,M){return W.current.useMemo(p,M)},Ye.useReducer=function(p,M,le){return W.current.useReducer(p,M,le)},Ye.useRef=function(p){return W.current.useRef(p)},Ye.useState=function(p){return W.current.useState(p)},Ye.useSyncExternalStore=function(p,M,le){return W.current.useSyncExternalStore(p,M,le)},Ye.useTransition=function(){return W.current.useTransition()},Ye.version="18.3.1",Ye}var fu;function Ao(){return fu||(fu=1,jo.exports=Qf()),jo.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hu;function Vf(){if(hu)return Nl;hu=1;var d=Ao(),c=Symbol.for("react.element"),o=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,u=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function x(v,y,N){var S,k={},L=null,V=null;N!==void 0&&(L=""+N),y.key!==void 0&&(L=""+y.key),y.ref!==void 0&&(V=y.ref);for(S in y)f.call(y,S)&&!h.hasOwnProperty(S)&&(k[S]=y[S]);if(v&&v.defaultProps)for(S in y=v.defaultProps,y)k[S]===void 0&&(k[S]=y[S]);return{$$typeof:c,type:v,key:L,ref:V,props:k,_owner:u.current}}return Nl.Fragment=o,Nl.jsx=x,Nl.jsxs=x,Nl}var pu;function Wf(){return pu||(pu=1,ko.exports=Vf()),ko.exports}var l=Wf(),C=Ao();const Os=Hf(C);var Is={},zo={exports:{}},Yt={},No={exports:{}},So={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu;function Xf(){return mu||(mu=1,(function(d){function c(z,D){var $=z.length;z.push(D);e:for(;0<$;){var p=$-1>>>1,M=z[p];if(0<u(M,D))z[p]=D,z[$]=M,$=p;else break e}}function o(z){return z.length===0?null:z[0]}function f(z){if(z.length===0)return null;var D=z[0],$=z.pop();if($!==D){z[0]=$;e:for(var p=0,M=z.length,le=M>>>1;p<le;){var xe=2*(p+1)-1,Ce=z[xe],$e=xe+1,pe=z[$e];if(0>u(Ce,$))$e<M&&0>u(pe,Ce)?(z[p]=pe,z[$e]=$,p=$e):(z[p]=Ce,z[xe]=$,p=xe);else if($e<M&&0>u(pe,$))z[p]=pe,z[$e]=$,p=$e;else break e}}return D}function u(z,D){var $=z.sortIndex-D.sortIndex;return $!==0?$:z.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;d.unstable_now=function(){return h.now()}}else{var x=Date,v=x.now();d.unstable_now=function(){return x.now()-v}}var y=[],N=[],S=1,k=null,L=3,V=!1,G=!1,T=!1,_=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(z){for(var D=o(N);D!==null;){if(D.callback===null)f(N);else if(D.startTime<=z)f(N),D.sortIndex=D.expirationTime,c(y,D);else break;D=o(N)}}function w(z){if(T=!1,H(z),!G)if(o(y)!==null)G=!0,X(I);else{var D=o(N);D!==null&&W(w,D.startTime-z)}}function I(z,D){G=!1,T&&(T=!1,K(de),de=-1),V=!0;var $=L;try{for(H(D),k=o(y);k!==null&&(!(k.expirationTime>D)||z&&!ee());){var p=k.callback;if(typeof p=="function"){k.callback=null,L=k.priorityLevel;var M=p(k.expirationTime<=D);D=d.unstable_now(),typeof M=="function"?k.callback=M:k===o(y)&&f(y),H(D)}else f(y);k=o(y)}if(k!==null)var le=!0;else{var xe=o(N);xe!==null&&W(w,xe.startTime-D),le=!1}return le}finally{k=null,L=$,V=!1}}var B=!1,re=null,de=-1,O=5,se=-1;function ee(){return!(d.unstable_now()-se<O)}function ce(){if(re!==null){var z=d.unstable_now();se=z;var D=!0;try{D=re(!0,z)}finally{D?ie():(B=!1,re=null)}}else B=!1}var ie;if(typeof U=="function")ie=function(){U(ce)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,fe=F.port2;F.port1.onmessage=ce,ie=function(){fe.postMessage(null)}}else ie=function(){_(ce,0)};function X(z){re=z,B||(B=!0,ie())}function W(z,D){de=_(function(){z(d.unstable_now())},D)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(z){z.callback=null},d.unstable_continueExecution=function(){G||V||(G=!0,X(I))},d.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},d.unstable_getCurrentPriorityLevel=function(){return L},d.unstable_getFirstCallbackNode=function(){return o(y)},d.unstable_next=function(z){switch(L){case 1:case 2:case 3:var D=3;break;default:D=L}var $=L;L=D;try{return z()}finally{L=$}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(z,D){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=L;L=z;try{return D()}finally{L=$}},d.unstable_scheduleCallback=function(z,D,$){var p=d.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?p+$:p):$=p,z){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=$+M,z={id:S++,callback:D,priorityLevel:z,startTime:$,expirationTime:M,sortIndex:-1},$>p?(z.sortIndex=$,c(N,z),o(y)===null&&z===o(N)&&(T?(K(de),de=-1):T=!0,W(w,$-p))):(z.sortIndex=M,c(y,z),G||V||(G=!0,X(I))),z},d.unstable_shouldYield=ee,d.unstable_wrapCallback=function(z){var D=L;return function(){var $=L;L=D;try{return z.apply(this,arguments)}finally{L=$}}}})(So)),So}var xu;function Gf(){return xu||(xu=1,No.exports=Xf()),No.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gu;function qf(){if(gu)return Yt;gu=1;var d=Ao(),c=Gf();function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,u={};function h(e,t){x(e,t),x(e+"Capture",t)}function x(e,t){for(u[e]=t,e=0;e<t.length;e++)f.add(t[e])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,N=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},k={};function L(e){return y.call(k,e)?!0:y.call(S,e)?!1:N.test(e)?k[e]=!0:(S[e]=!0,!1)}function V(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function G(e,t,n,r){if(t===null||typeof t>"u"||V(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function T(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_[e]=new T(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_[t]=new T(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){_[e]=new T(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_[e]=new T(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_[e]=new T(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){_[e]=new T(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){_[e]=new T(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){_[e]=new T(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){_[e]=new T(e,5,!1,e.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function U(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(K,U);_[t]=new T(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(K,U);_[t]=new T(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(K,U);_[t]=new T(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){_[e]=new T(e,1,!1,e.toLowerCase(),null,!1,!1)}),_.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){_[e]=new T(e,1,!1,e.toLowerCase(),null,!0,!0)});function H(e,t,n,r){var s=_.hasOwnProperty(t)?_[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(G(t,n,s,r)&&(n=null),r||s===null?L(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var w=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),B=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),ee=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),z=Symbol.iterator;function D(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var $=Object.assign,p;function M(e){if(p===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);p=t&&t[1]||""}return`
`+p+e}var le=!1;function xe(e,t){if(!e||le)return"";le=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(R){var r=R}Reflect.construct(e,[],t)}else{try{t.call()}catch(R){r=R}e.call(t.prototype)}else{try{throw Error()}catch(R){r=R}e()}}catch(R){if(R&&r&&typeof R.stack=="string"){for(var s=R.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,m=i.length-1;1<=a&&0<=m&&s[a]!==i[m];)m--;for(;1<=a&&0<=m;a--,m--)if(s[a]!==i[m]){if(a!==1||m!==1)do if(a--,m--,0>m||s[a]!==i[m]){var b=`
`+s[a].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=a&&0<=m);break}}}finally{le=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function Ce(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=xe(e.type,!1),e;case 11:return e=xe(e.type.render,!1),e;case 1:return e=xe(e.type,!0),e;default:return""}}function $e(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case re:return"Fragment";case B:return"Portal";case O:return"Profiler";case de:return"StrictMode";case ie:return"Suspense";case F:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ee:return(e.displayName||"Context")+".Consumer";case se:return(e._context.displayName||"Context")+".Provider";case ce:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fe:return t=e.displayName||null,t!==null?t:$e(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return $e(e(t))}catch{}}return null}function pe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(t);case 8:return t===de?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ee(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Me(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xe(e){var t=Me(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nt(e){e._valueTracker||(e._valueTracker=Xe(e))}function Nt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Me(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function pt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function q(e,t){var n=t.checked;return $({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function J(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ee(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function te(e,t){t=t.checked,t!=null&&H(e,"checked",t,!1)}function ue(e,t){te(e,t);var n=Ee(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Te(e,t.type,n):t.hasOwnProperty("defaultValue")&&Te(e,t.type,Ee(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Te(e,t,n){(t!=="number"||pt(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ie=Array.isArray;function Fe(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ee(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Oe(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(o(91));return $({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(o(92));if(Ie(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ee(n)}}function g(e,t){var n=Ee(t.value),r=Ee(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ve(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function A(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?he(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var me,Ne=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(me=me||document.createElement("div"),me.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ze={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},et=["Webkit","ms","Moz","O"];Object.keys(Ze).forEach(function(e){et.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ze[t]=Ze[e]})});function Ge(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ze.hasOwnProperty(e)&&Ze[e]?(""+t).trim():t+"px"}function st(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ge(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Ke=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rt(e,t){if(t){if(Ke[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(o(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(t.style!=null&&typeof t.style!="object")throw Error(o(62))}}function it(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=null;function Je(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wt=null,dt=null,yt=null;function fn(e){if(e=ul(e)){if(typeof wt!="function")throw Error(o(280));var t=e.stateNode;t&&(t=Gl(t),wt(e.stateNode,e.type,t))}}function Ht(e){dt?yt?yt.push(e):yt=[e]:dt=e}function ge(){if(dt){var e=dt,t=yt;if(yt=dt=null,fn(e),t)for(e=0;e<t.length;e++)fn(t[e])}}function He(e,t){return e(t)}function Qe(){}var Re=!1;function Be(e,t,n){if(Re)return e(t,n);Re=!0;try{return He(e,t,n)}finally{Re=!1,(dt!==null||yt!==null)&&(Qe(),ge())}}function Ae(e,t){var n=e.stateNode;if(n===null)return null;var r=Gl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var Ve=!1;if(v)try{var at={};Object.defineProperty(at,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{Ve=!1}function mt(e,t,n,r,s,i,a,m,b){var R=Array.prototype.slice.call(arguments,3);try{t.apply(n,R)}catch(Z){this.onError(Z)}}var Et=!1,_t=null,kt=!1,Qt=null,rn={onError:function(e){Et=!0,_t=e}};function Vt(e,t,n,r,s,i,a,m,b){Et=!1,_t=null,mt.apply(rn,arguments)}function wn(e,t,n,r,s,i,a,m,b){if(Vt.apply(this,arguments),Et){if(Et){var R=_t;Et=!1,_t=null}else throw Error(o(198));kt||(kt=!0,Qt=R)}}function hn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Q(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ye(e){if(hn(e)!==e)throw Error(o(188))}function we(e){var t=e.alternate;if(!t){if(t=hn(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ye(s),e;if(i===r)return ye(s),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,m=s.child;m;){if(m===n){a=!0,n=s,r=i;break}if(m===r){a=!0,r=s,n=i;break}m=m.sibling}if(!a){for(m=i.child;m;){if(m===n){a=!0,n=i,r=s;break}if(m===r){a=!0,r=i,n=s;break}m=m.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function We(e){return e=we(e),e!==null?ln(e):null}function ln(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ln(e);if(t!==null)return t;e=e.sibling}return null}var $n=c.unstable_scheduleCallback,sr=c.unstable_cancelCallback,kn=c.unstable_shouldYield,ed=c.unstable_requestPaint,jt=c.unstable_now,td=c.unstable_getCurrentPriorityLevel,Bs=c.unstable_ImmediatePriority,Oo=c.unstable_UserBlockingPriority,El=c.unstable_NormalPriority,nd=c.unstable_LowPriority,Bo=c.unstable_IdlePriority,Ml=null,jn=null;function rd(e){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(Ml,e,void 0,(e.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:id,ld=Math.log,sd=Math.LN2;function id(e){return e>>>=0,e===0?32:31-(ld(e)/sd|0)|0}var Pl=64,_l=4194304;function Wr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Tl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var m=a&~s;m!==0?r=Wr(m):(i&=a,i!==0&&(r=Wr(i)))}else a=n&~s,a!==0?r=Wr(a):i!==0&&(r=Wr(i));if(r===0)return 0;if(t!==0&&t!==r&&(t&s)===0&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-pn(t),s=1<<n,r|=e[n],t&=~s;return r}function od(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ad(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-pn(i),m=1<<a,b=s[a];b===-1?((m&n)===0||(m&r)!==0)&&(s[a]=od(m,t)):b<=t&&(e.expiredLanes|=m),i&=~m}}function Us(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Uo(){var e=Pl;return Pl<<=1,(Pl&4194240)===0&&(Pl=64),e}function Hs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Xr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-pn(t),e[t]=n}function cd(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-pn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Qs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ot=0;function Ho(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Qo,Vs,Vo,Wo,Xo,Ws=!1,Il=[],An=null,Fn=null,On=null,Gr=new Map,qr=new Map,Bn=[],ud="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Go(e,t){switch(e){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Gr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(t.pointerId)}}function Kr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ul(t),t!==null&&Vs(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function dd(e,t,n,r,s){switch(t){case"focusin":return An=Kr(An,e,t,n,r,s),!0;case"dragenter":return Fn=Kr(Fn,e,t,n,r,s),!0;case"mouseover":return On=Kr(On,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Gr.set(i,Kr(Gr.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qr.set(i,Kr(qr.get(i)||null,e,t,n,r,s)),!0}return!1}function qo(e){var t=ir(e.target);if(t!==null){var n=hn(t);if(n!==null){if(t=n.tag,t===13){if(t=Q(n),t!==null){e.blockedOn=t,Xo(e.priority,function(){Vo(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ct=r,n.target.dispatchEvent(r),Ct=null}else return t=ul(n),t!==null&&Vs(t),e.blockedOn=n,!1;t.shift()}return!0}function Ko(e,t,n){Rl(e)&&n.delete(t)}function fd(){Ws=!1,An!==null&&Rl(An)&&(An=null),Fn!==null&&Rl(Fn)&&(Fn=null),On!==null&&Rl(On)&&(On=null),Gr.forEach(Ko),qr.forEach(Ko)}function Yr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ws||(Ws=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,fd)))}function Jr(e){function t(s){return Yr(s,e)}if(0<Il.length){Yr(Il[0],e);for(var n=1;n<Il.length;n++){var r=Il[n];r.blockedOn===e&&(r.blockedOn=null)}}for(An!==null&&Yr(An,e),Fn!==null&&Yr(Fn,e),On!==null&&Yr(On,e),Gr.forEach(t),qr.forEach(t),n=0;n<Bn.length;n++)r=Bn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)qo(n),n.blockedOn===null&&Bn.shift()}var wr=w.ReactCurrentBatchConfig,Ll=!0;function hd(e,t,n,r){var s=ot,i=wr.transition;wr.transition=null;try{ot=1,Xs(e,t,n,r)}finally{ot=s,wr.transition=i}}function pd(e,t,n,r){var s=ot,i=wr.transition;wr.transition=null;try{ot=4,Xs(e,t,n,r)}finally{ot=s,wr.transition=i}}function Xs(e,t,n,r){if(Ll){var s=Gs(e,t,n,r);if(s===null)di(e,t,r,Dl,n),Go(e,r);else if(dd(s,e,t,n,r))r.stopPropagation();else if(Go(e,r),t&4&&-1<ud.indexOf(e)){for(;s!==null;){var i=ul(s);if(i!==null&&Qo(i),i=Gs(e,t,n,r),i===null&&di(e,t,r,Dl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else di(e,t,r,null,n)}}var Dl=null;function Gs(e,t,n,r){if(Dl=null,e=Je(r),e=ir(e),e!==null)if(t=hn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Q(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dl=e,null}function Yo(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(td()){case Bs:return 1;case Oo:return 4;case El:case nd:return 16;case Bo:return 536870912;default:return 16}default:return 16}}var Un=null,qs=null,$l=null;function Jo(){if($l)return $l;var e,t=qs,n=t.length,r,s="value"in Un?Un.value:Un.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return $l=s.slice(e,1<r?1-r:void 0)}function Al(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fl(){return!0}function Zo(){return!1}function Jt(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(n=e[m],this[m]=n?n(i):i[m]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fl:Zo,this.isPropagationStopped=Zo,this}return $(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),t}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=Jt(kr),Zr=$({},kr,{view:0,detail:0}),md=Jt(Zr),Ys,Js,el,Ol=$({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ei,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==el&&(el&&e.type==="mousemove"?(Ys=e.screenX-el.screenX,Js=e.screenY-el.screenY):Js=Ys=0,el=e),Ys)},movementY:function(e){return"movementY"in e?e.movementY:Js}}),ea=Jt(Ol),xd=$({},Ol,{dataTransfer:0}),gd=Jt(xd),vd=$({},Zr,{relatedTarget:0}),Zs=Jt(vd),yd=$({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),bd=Jt(yd),wd=$({},kr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kd=Jt(wd),jd=$({},kr,{data:0}),ta=Jt(jd),zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sd[e])?!!t[e]:!1}function ei(){return Cd}var Ed=$({},Zr,{key:function(e){if(e.key){var t=zd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Al(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ei,charCode:function(e){return e.type==="keypress"?Al(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Al(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Md=Jt(Ed),Pd=$({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),na=Jt(Pd),_d=$({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ei}),Td=Jt(_d),Id=$({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rd=Jt(Id),Ld=$({},Ol,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dd=Jt(Ld),$d=[9,13,27,32],ti=v&&"CompositionEvent"in window,tl=null;v&&"documentMode"in document&&(tl=document.documentMode);var Ad=v&&"TextEvent"in window&&!tl,ra=v&&(!ti||tl&&8<tl&&11>=tl),la=" ",sa=!1;function ia(e,t){switch(e){case"keyup":return $d.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jr=!1;function Fd(e,t){switch(e){case"compositionend":return oa(t);case"keypress":return t.which!==32?null:(sa=!0,la);case"textInput":return e=t.data,e===la&&sa?null:e;default:return null}}function Od(e,t){if(jr)return e==="compositionend"||!ti&&ia(e,t)?(e=Jo(),$l=qs=Un=null,jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ra&&t.locale!=="ko"?null:t.data;default:return null}}var Bd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bd[e.type]:t==="textarea"}function ca(e,t,n,r){Ht(r),t=Vl(t,"onChange"),0<t.length&&(n=new Ks("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nl=null,rl=null;function Ud(e){Ca(e,0)}function Bl(e){var t=Er(e);if(Nt(t))return e}function Hd(e,t){if(e==="change")return t}var ua=!1;if(v){var ni;if(v){var ri="oninput"in document;if(!ri){var da=document.createElement("div");da.setAttribute("oninput","return;"),ri=typeof da.oninput=="function"}ni=ri}else ni=!1;ua=ni&&(!document.documentMode||9<document.documentMode)}function fa(){nl&&(nl.detachEvent("onpropertychange",ha),rl=nl=null)}function ha(e){if(e.propertyName==="value"&&Bl(rl)){var t=[];ca(t,rl,e,Je(e)),Be(Ud,t)}}function Qd(e,t,n){e==="focusin"?(fa(),nl=t,rl=n,nl.attachEvent("onpropertychange",ha)):e==="focusout"&&fa()}function Vd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bl(rl)}function Wd(e,t){if(e==="click")return Bl(t)}function Xd(e,t){if(e==="input"||e==="change")return Bl(t)}function Gd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mn=typeof Object.is=="function"?Object.is:Gd;function ll(e,t){if(mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!y.call(t,s)||!mn(e[s],t[s]))return!1}return!0}function pa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ma(e,t){var n=pa(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pa(n)}}function xa(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xa(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ga(){for(var e=window,t=pt();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=pt(e.document)}return t}function li(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qd(e){var t=ga(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xa(n.ownerDocument.documentElement,n)){if(r!==null&&li(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ma(n,i);var a=ma(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kd=v&&"documentMode"in document&&11>=document.documentMode,zr=null,si=null,sl=null,ii=!1;function va(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ii||zr==null||zr!==pt(r)||(r=zr,"selectionStart"in r&&li(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sl&&ll(sl,r)||(sl=r,r=Vl(si,"onSelect"),0<r.length&&(t=new Ks("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zr)))}function Ul(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},oi={},ya={};v&&(ya=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function Hl(e){if(oi[e])return oi[e];if(!Nr[e])return e;var t=Nr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ya)return oi[e]=t[n];return e}var ba=Hl("animationend"),wa=Hl("animationiteration"),ka=Hl("animationstart"),ja=Hl("transitionend"),za=new Map,Na="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hn(e,t){za.set(e,t),h(t,[e])}for(var ai=0;ai<Na.length;ai++){var ci=Na[ai],Yd=ci.toLowerCase(),Jd=ci[0].toUpperCase()+ci.slice(1);Hn(Yd,"on"+Jd)}Hn(ba,"onAnimationEnd"),Hn(wa,"onAnimationIteration"),Hn(ka,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(ja,"onTransitionEnd"),x("onMouseEnter",["mouseout","mouseover"]),x("onMouseLeave",["mouseout","mouseover"]),x("onPointerEnter",["pointerout","pointerover"]),x("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zd=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function Sa(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,wn(r,t,void 0,e),e.currentTarget=null}function Ca(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var m=r[a],b=m.instance,R=m.currentTarget;if(m=m.listener,b!==i&&s.isPropagationStopped())break e;Sa(s,m,R),i=b}else for(a=0;a<r.length;a++){if(m=r[a],b=m.instance,R=m.currentTarget,m=m.listener,b!==i&&s.isPropagationStopped())break e;Sa(s,m,R),i=b}}}if(kt)throw e=Qt,kt=!1,Qt=null,e}function ft(e,t){var n=t[gi];n===void 0&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Ea(t,e,2,!1),n.add(r))}function ui(e,t,n){var r=0;t&&(r|=4),Ea(n,e,r,t)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function ol(e){if(!e[Ql]){e[Ql]=!0,f.forEach(function(n){n!=="selectionchange"&&(Zd.has(n)||ui(n,!1,e),ui(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ql]||(t[Ql]=!0,ui("selectionchange",!1,t))}}function Ea(e,t,n,r){switch(Yo(t)){case 1:var s=hd;break;case 4:s=pd;break;default:s=Xs}n=s.bind(null,t,n,e),s=void 0,!Ve||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function di(e,t,n,r,s){var i=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var m=r.stateNode.containerInfo;if(m===s||m.nodeType===8&&m.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var b=a.tag;if((b===3||b===4)&&(b=a.stateNode.containerInfo,b===s||b.nodeType===8&&b.parentNode===s))return;a=a.return}for(;m!==null;){if(a=ir(m),a===null)return;if(b=a.tag,b===5||b===6){r=i=a;continue e}m=m.parentNode}}r=r.return}Be(function(){var R=i,Z=Je(n),ne=[];e:{var Y=za.get(e);if(Y!==void 0){var be=Ks,ze=e;switch(e){case"keypress":if(Al(n)===0)break e;case"keydown":case"keyup":be=Md;break;case"focusin":ze="focus",be=Zs;break;case"focusout":ze="blur",be=Zs;break;case"beforeblur":case"afterblur":be=Zs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=ea;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=gd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=Td;break;case ba:case wa:case ka:be=bd;break;case ja:be=Rd;break;case"scroll":be=md;break;case"wheel":be=Dd;break;case"copy":case"cut":case"paste":be=kd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=na}var Se=(t&4)!==0,zt=!Se&&e==="scroll",E=Se?Y!==null?Y+"Capture":null:Y;Se=[];for(var j=R,P;j!==null;){P=j;var ae=P.stateNode;if(P.tag===5&&ae!==null&&(P=ae,E!==null&&(ae=Ae(j,E),ae!=null&&Se.push(al(j,ae,P)))),zt)break;j=j.return}0<Se.length&&(Y=new be(Y,ze,null,n,Z),ne.push({event:Y,listeners:Se}))}}if((t&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",be=e==="mouseout"||e==="pointerout",Y&&n!==Ct&&(ze=n.relatedTarget||n.fromElement)&&(ir(ze)||ze[Mn]))break e;if((be||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,be?(ze=n.relatedTarget||n.toElement,be=R,ze=ze?ir(ze):null,ze!==null&&(zt=hn(ze),ze!==zt||ze.tag!==5&&ze.tag!==6)&&(ze=null)):(be=null,ze=R),be!==ze)){if(Se=ea,ae="onMouseLeave",E="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(Se=na,ae="onPointerLeave",E="onPointerEnter",j="pointer"),zt=be==null?Y:Er(be),P=ze==null?Y:Er(ze),Y=new Se(ae,j+"leave",be,n,Z),Y.target=zt,Y.relatedTarget=P,ae=null,ir(Z)===R&&(Se=new Se(E,j+"enter",ze,n,Z),Se.target=P,Se.relatedTarget=zt,ae=Se),zt=ae,be&&ze)t:{for(Se=be,E=ze,j=0,P=Se;P;P=Sr(P))j++;for(P=0,ae=E;ae;ae=Sr(ae))P++;for(;0<j-P;)Se=Sr(Se),j--;for(;0<P-j;)E=Sr(E),P--;for(;j--;){if(Se===E||E!==null&&Se===E.alternate)break t;Se=Sr(Se),E=Sr(E)}Se=null}else Se=null;be!==null&&Ma(ne,Y,be,Se,!1),ze!==null&&zt!==null&&Ma(ne,zt,ze,Se,!0)}}e:{if(Y=R?Er(R):window,be=Y.nodeName&&Y.nodeName.toLowerCase(),be==="select"||be==="input"&&Y.type==="file")var _e=Hd;else if(aa(Y))if(ua)_e=Xd;else{_e=Vd;var Le=Qd}else(be=Y.nodeName)&&be.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(_e=Wd);if(_e&&(_e=_e(e,R))){ca(ne,_e,n,Z);break e}Le&&Le(e,Y,R),e==="focusout"&&(Le=Y._wrapperState)&&Le.controlled&&Y.type==="number"&&Te(Y,"number",Y.value)}switch(Le=R?Er(R):window,e){case"focusin":(aa(Le)||Le.contentEditable==="true")&&(zr=Le,si=R,sl=null);break;case"focusout":sl=si=zr=null;break;case"mousedown":ii=!0;break;case"contextmenu":case"mouseup":case"dragend":ii=!1,va(ne,n,Z);break;case"selectionchange":if(Kd)break;case"keydown":case"keyup":va(ne,n,Z)}var De;if(ti)e:{switch(e){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else jr?ia(e,n)&&(Ue="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ue="onCompositionStart");Ue&&(ra&&n.locale!=="ko"&&(jr||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&jr&&(De=Jo()):(Un=Z,qs="value"in Un?Un.value:Un.textContent,jr=!0)),Le=Vl(R,Ue),0<Le.length&&(Ue=new ta(Ue,e,null,n,Z),ne.push({event:Ue,listeners:Le}),De?Ue.data=De:(De=oa(n),De!==null&&(Ue.data=De)))),(De=Ad?Fd(e,n):Od(e,n))&&(R=Vl(R,"onBeforeInput"),0<R.length&&(Z=new ta("onBeforeInput","beforeinput",null,n,Z),ne.push({event:Z,listeners:R}),Z.data=De))}Ca(ne,t)})}function al(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ae(e,n),i!=null&&r.unshift(al(e,i,s)),i=Ae(e,t),i!=null&&r.push(al(e,i,s))),e=e.return}return r}function Sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ma(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var m=n,b=m.alternate,R=m.stateNode;if(b!==null&&b===r)break;m.tag===5&&R!==null&&(m=R,s?(b=Ae(n,i),b!=null&&a.unshift(al(n,b,m))):s||(b=Ae(n,i),b!=null&&a.push(al(n,b,m)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ef=/\r\n?/g,tf=/\u0000|\uFFFD/g;function Pa(e){return(typeof e=="string"?e:""+e).replace(ef,`
`).replace(tf,"")}function Wl(e,t,n){if(t=Pa(t),Pa(e)!==t&&n)throw Error(o(425))}function Xl(){}var fi=null,hi=null;function pi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mi=typeof setTimeout=="function"?setTimeout:void 0,nf=typeof clearTimeout=="function"?clearTimeout:void 0,_a=typeof Promise=="function"?Promise:void 0,rf=typeof queueMicrotask=="function"?queueMicrotask:typeof _a<"u"?function(e){return _a.resolve(null).then(e).catch(lf)}:mi;function lf(e){setTimeout(function(){throw e})}function xi(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Jr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jr(t)}function Qn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ta(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Cr=Math.random().toString(36).slice(2),zn="__reactFiber$"+Cr,cl="__reactProps$"+Cr,Mn="__reactContainer$"+Cr,gi="__reactEvents$"+Cr,sf="__reactListeners$"+Cr,of="__reactHandles$"+Cr;function ir(e){var t=e[zn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mn]||n[zn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ta(e);e!==null;){if(n=e[zn])return n;e=Ta(e)}return t}e=n,n=e.parentNode}return null}function ul(e){return e=e[zn]||e[Mn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Er(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function Gl(e){return e[cl]||null}var vi=[],Mr=-1;function Vn(e){return{current:e}}function ht(e){0>Mr||(e.current=vi[Mr],vi[Mr]=null,Mr--)}function ut(e,t){Mr++,vi[Mr]=e.current,e.current=t}var Wn={},$t=Vn(Wn),Wt=Vn(!1),or=Wn;function Pr(e,t){var n=e.type.contextTypes;if(!n)return Wn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Xt(e){return e=e.childContextTypes,e!=null}function ql(){ht(Wt),ht($t)}function Ia(e,t,n){if($t.current!==Wn)throw Error(o(168));ut($t,t),ut(Wt,n)}function Ra(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(o(108,pe(e)||"Unknown",s));return $({},n,r)}function Kl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wn,or=$t.current,ut($t,e),ut(Wt,Wt.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ra(e,t,or),r.__reactInternalMemoizedMergedChildContext=e,ht(Wt),ht($t),ut($t,e)):ht(Wt),ut(Wt,n)}var Pn=null,Yl=!1,yi=!1;function Da(e){Pn===null?Pn=[e]:Pn.push(e)}function af(e){Yl=!0,Da(e)}function Xn(){if(!yi&&Pn!==null){yi=!0;var e=0,t=ot;try{var n=Pn;for(ot=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Pn=null,Yl=!1}catch(s){throw Pn!==null&&(Pn=Pn.slice(e+1)),$n(Bs,Xn),s}finally{ot=t,yi=!1}}return null}var _r=[],Tr=0,Jl=null,Zl=0,sn=[],on=0,ar=null,_n=1,Tn="";function cr(e,t){_r[Tr++]=Zl,_r[Tr++]=Jl,Jl=e,Zl=t}function $a(e,t,n){sn[on++]=_n,sn[on++]=Tn,sn[on++]=ar,ar=e;var r=_n;e=Tn;var s=32-pn(r)-1;r&=~(1<<s),n+=1;var i=32-pn(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,_n=1<<32-pn(t)+s|n<<s|r,Tn=i+e}else _n=1<<i|n<<s|r,Tn=e}function bi(e){e.return!==null&&(cr(e,1),$a(e,1,0))}function wi(e){for(;e===Jl;)Jl=_r[--Tr],_r[Tr]=null,Zl=_r[--Tr],_r[Tr]=null;for(;e===ar;)ar=sn[--on],sn[on]=null,Tn=sn[--on],sn[on]=null,_n=sn[--on],sn[on]=null}var Zt=null,en=null,xt=!1,xn=null;function Aa(e,t){var n=dn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fa(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zt=e,en=Qn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zt=e,en=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ar!==null?{id:_n,overflow:Tn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=dn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Zt=e,en=null,!0):!1;default:return!1}}function ki(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ji(e){if(xt){var t=en;if(t){var n=t;if(!Fa(e,t)){if(ki(e))throw Error(o(418));t=Qn(n.nextSibling);var r=Zt;t&&Fa(e,t)?Aa(r,n):(e.flags=e.flags&-4097|2,xt=!1,Zt=e)}}else{if(ki(e))throw Error(o(418));e.flags=e.flags&-4097|2,xt=!1,Zt=e}}}function Oa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zt=e}function es(e){if(e!==Zt)return!1;if(!xt)return Oa(e),xt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pi(e.type,e.memoizedProps)),t&&(t=en)){if(ki(e))throw Ba(),Error(o(418));for(;t;)Aa(e,t),t=Qn(t.nextSibling)}if(Oa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){en=Qn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}en=null}}else en=Zt?Qn(e.stateNode.nextSibling):null;return!0}function Ba(){for(var e=en;e;)e=Qn(e.nextSibling)}function Ir(){en=Zt=null,xt=!1}function zi(e){xn===null?xn=[e]:xn.push(e)}var cf=w.ReactCurrentBatchConfig;function dl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var m=s.refs;a===null?delete m[i]:m[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ts(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ua(e){var t=e._init;return t(e._payload)}function Ha(e){function t(E,j){if(e){var P=E.deletions;P===null?(E.deletions=[j],E.flags|=16):P.push(j)}}function n(E,j){if(!e)return null;for(;j!==null;)t(E,j),j=j.sibling;return null}function r(E,j){for(E=new Map;j!==null;)j.key!==null?E.set(j.key,j):E.set(j.index,j),j=j.sibling;return E}function s(E,j){return E=tr(E,j),E.index=0,E.sibling=null,E}function i(E,j,P){return E.index=P,e?(P=E.alternate,P!==null?(P=P.index,P<j?(E.flags|=2,j):P):(E.flags|=2,j)):(E.flags|=1048576,j)}function a(E){return e&&E.alternate===null&&(E.flags|=2),E}function m(E,j,P,ae){return j===null||j.tag!==6?(j=xo(P,E.mode,ae),j.return=E,j):(j=s(j,P),j.return=E,j)}function b(E,j,P,ae){var _e=P.type;return _e===re?Z(E,j,P.props.children,ae,P.key):j!==null&&(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===X&&Ua(_e)===j.type)?(ae=s(j,P.props),ae.ref=dl(E,j,P),ae.return=E,ae):(ae=Ns(P.type,P.key,P.props,null,E.mode,ae),ae.ref=dl(E,j,P),ae.return=E,ae)}function R(E,j,P,ae){return j===null||j.tag!==4||j.stateNode.containerInfo!==P.containerInfo||j.stateNode.implementation!==P.implementation?(j=go(P,E.mode,ae),j.return=E,j):(j=s(j,P.children||[]),j.return=E,j)}function Z(E,j,P,ae,_e){return j===null||j.tag!==7?(j=gr(P,E.mode,ae,_e),j.return=E,j):(j=s(j,P),j.return=E,j)}function ne(E,j,P){if(typeof j=="string"&&j!==""||typeof j=="number")return j=xo(""+j,E.mode,P),j.return=E,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return P=Ns(j.type,j.key,j.props,null,E.mode,P),P.ref=dl(E,null,j),P.return=E,P;case B:return j=go(j,E.mode,P),j.return=E,j;case X:var ae=j._init;return ne(E,ae(j._payload),P)}if(Ie(j)||D(j))return j=gr(j,E.mode,P,null),j.return=E,j;ts(E,j)}return null}function Y(E,j,P,ae){var _e=j!==null?j.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return _e!==null?null:m(E,j,""+P,ae);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case I:return P.key===_e?b(E,j,P,ae):null;case B:return P.key===_e?R(E,j,P,ae):null;case X:return _e=P._init,Y(E,j,_e(P._payload),ae)}if(Ie(P)||D(P))return _e!==null?null:Z(E,j,P,ae,null);ts(E,P)}return null}function be(E,j,P,ae,_e){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return E=E.get(P)||null,m(j,E,""+ae,_e);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case I:return E=E.get(ae.key===null?P:ae.key)||null,b(j,E,ae,_e);case B:return E=E.get(ae.key===null?P:ae.key)||null,R(j,E,ae,_e);case X:var Le=ae._init;return be(E,j,P,Le(ae._payload),_e)}if(Ie(ae)||D(ae))return E=E.get(P)||null,Z(j,E,ae,_e,null);ts(j,ae)}return null}function ze(E,j,P,ae){for(var _e=null,Le=null,De=j,Ue=j=0,Rt=null;De!==null&&Ue<P.length;Ue++){De.index>Ue?(Rt=De,De=null):Rt=De.sibling;var lt=Y(E,De,P[Ue],ae);if(lt===null){De===null&&(De=Rt);break}e&&De&&lt.alternate===null&&t(E,De),j=i(lt,j,Ue),Le===null?_e=lt:Le.sibling=lt,Le=lt,De=Rt}if(Ue===P.length)return n(E,De),xt&&cr(E,Ue),_e;if(De===null){for(;Ue<P.length;Ue++)De=ne(E,P[Ue],ae),De!==null&&(j=i(De,j,Ue),Le===null?_e=De:Le.sibling=De,Le=De);return xt&&cr(E,Ue),_e}for(De=r(E,De);Ue<P.length;Ue++)Rt=be(De,E,Ue,P[Ue],ae),Rt!==null&&(e&&Rt.alternate!==null&&De.delete(Rt.key===null?Ue:Rt.key),j=i(Rt,j,Ue),Le===null?_e=Rt:Le.sibling=Rt,Le=Rt);return e&&De.forEach(function(nr){return t(E,nr)}),xt&&cr(E,Ue),_e}function Se(E,j,P,ae){var _e=D(P);if(typeof _e!="function")throw Error(o(150));if(P=_e.call(P),P==null)throw Error(o(151));for(var Le=_e=null,De=j,Ue=j=0,Rt=null,lt=P.next();De!==null&&!lt.done;Ue++,lt=P.next()){De.index>Ue?(Rt=De,De=null):Rt=De.sibling;var nr=Y(E,De,lt.value,ae);if(nr===null){De===null&&(De=Rt);break}e&&De&&nr.alternate===null&&t(E,De),j=i(nr,j,Ue),Le===null?_e=nr:Le.sibling=nr,Le=nr,De=Rt}if(lt.done)return n(E,De),xt&&cr(E,Ue),_e;if(De===null){for(;!lt.done;Ue++,lt=P.next())lt=ne(E,lt.value,ae),lt!==null&&(j=i(lt,j,Ue),Le===null?_e=lt:Le.sibling=lt,Le=lt);return xt&&cr(E,Ue),_e}for(De=r(E,De);!lt.done;Ue++,lt=P.next())lt=be(De,E,Ue,lt.value,ae),lt!==null&&(e&&lt.alternate!==null&&De.delete(lt.key===null?Ue:lt.key),j=i(lt,j,Ue),Le===null?_e=lt:Le.sibling=lt,Le=lt);return e&&De.forEach(function(Uf){return t(E,Uf)}),xt&&cr(E,Ue),_e}function zt(E,j,P,ae){if(typeof P=="object"&&P!==null&&P.type===re&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case I:e:{for(var _e=P.key,Le=j;Le!==null;){if(Le.key===_e){if(_e=P.type,_e===re){if(Le.tag===7){n(E,Le.sibling),j=s(Le,P.props.children),j.return=E,E=j;break e}}else if(Le.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===X&&Ua(_e)===Le.type){n(E,Le.sibling),j=s(Le,P.props),j.ref=dl(E,Le,P),j.return=E,E=j;break e}n(E,Le);break}else t(E,Le);Le=Le.sibling}P.type===re?(j=gr(P.props.children,E.mode,ae,P.key),j.return=E,E=j):(ae=Ns(P.type,P.key,P.props,null,E.mode,ae),ae.ref=dl(E,j,P),ae.return=E,E=ae)}return a(E);case B:e:{for(Le=P.key;j!==null;){if(j.key===Le)if(j.tag===4&&j.stateNode.containerInfo===P.containerInfo&&j.stateNode.implementation===P.implementation){n(E,j.sibling),j=s(j,P.children||[]),j.return=E,E=j;break e}else{n(E,j);break}else t(E,j);j=j.sibling}j=go(P,E.mode,ae),j.return=E,E=j}return a(E);case X:return Le=P._init,zt(E,j,Le(P._payload),ae)}if(Ie(P))return ze(E,j,P,ae);if(D(P))return Se(E,j,P,ae);ts(E,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,j!==null&&j.tag===6?(n(E,j.sibling),j=s(j,P),j.return=E,E=j):(n(E,j),j=xo(P,E.mode,ae),j.return=E,E=j),a(E)):n(E,j)}return zt}var Rr=Ha(!0),Qa=Ha(!1),ns=Vn(null),rs=null,Lr=null,Ni=null;function Si(){Ni=Lr=rs=null}function Ci(e){var t=ns.current;ht(ns),e._currentValue=t}function Ei(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Dr(e,t){rs=e,Ni=Lr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Gt=!0),e.firstContext=null)}function an(e){var t=e._currentValue;if(Ni!==e)if(e={context:e,memoizedValue:t,next:null},Lr===null){if(rs===null)throw Error(o(308));Lr=e,rs.dependencies={lanes:0,firstContext:e}}else Lr=Lr.next=e;return t}var ur=null;function Mi(e){ur===null?ur=[e]:ur.push(e)}function Va(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Mi(t)):(n.next=s.next,s.next=n),t.interleaved=n,In(e,r)}function In(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gn=!1;function Pi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(tt&2)!==0){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,In(e,n)}return s=r.interleaved,s===null?(t.next=t,Mi(r)):(t.next=s.next,s.next=t),r.interleaved=t,In(e,n)}function ls(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Qs(e,n)}}function Xa(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ss(e,t,n,r){var s=e.updateQueue;Gn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,m=s.shared.pending;if(m!==null){s.shared.pending=null;var b=m,R=b.next;b.next=null,a===null?i=R:a.next=R,a=b;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,m=Z.lastBaseUpdate,m!==a&&(m===null?Z.firstBaseUpdate=R:m.next=R,Z.lastBaseUpdate=b))}if(i!==null){var ne=s.baseState;a=0,Z=R=b=null,m=i;do{var Y=m.lane,be=m.eventTime;if((r&Y)===Y){Z!==null&&(Z=Z.next={eventTime:be,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var ze=e,Se=m;switch(Y=t,be=n,Se.tag){case 1:if(ze=Se.payload,typeof ze=="function"){ne=ze.call(be,ne,Y);break e}ne=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Se.payload,Y=typeof ze=="function"?ze.call(be,ne,Y):ze,Y==null)break e;ne=$({},ne,Y);break e;case 2:Gn=!0}}m.callback!==null&&m.lane!==0&&(e.flags|=64,Y=s.effects,Y===null?s.effects=[m]:Y.push(m))}else be={eventTime:be,lane:Y,tag:m.tag,payload:m.payload,callback:m.callback,next:null},Z===null?(R=Z=be,b=ne):Z=Z.next=be,a|=Y;if(m=m.next,m===null){if(m=s.shared.pending,m===null)break;Y=m,m=Y.next,Y.next=null,s.lastBaseUpdate=Y,s.shared.pending=null}}while(!0);if(Z===null&&(b=ne),s.baseState=b,s.firstBaseUpdate=R,s.lastBaseUpdate=Z,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);hr|=a,e.lanes=a,e.memoizedState=ne}}function Ga(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(o(191,s));s.call(r)}}}var fl={},Nn=Vn(fl),hl=Vn(fl),pl=Vn(fl);function dr(e){if(e===fl)throw Error(o(174));return e}function _i(e,t){switch(ut(pl,t),ut(hl,e),ut(Nn,fl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:A(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=A(t,e)}ht(Nn),ut(Nn,t)}function $r(){ht(Nn),ht(hl),ht(pl)}function qa(e){dr(pl.current);var t=dr(Nn.current),n=A(t,e.type);t!==n&&(ut(hl,e),ut(Nn,n))}function Ti(e){hl.current===e&&(ht(Nn),ht(hl))}var gt=Vn(0);function is(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ii=[];function Ri(){for(var e=0;e<Ii.length;e++)Ii[e]._workInProgressVersionPrimary=null;Ii.length=0}var os=w.ReactCurrentDispatcher,Li=w.ReactCurrentBatchConfig,fr=0,vt=null,Mt=null,Tt=null,as=!1,ml=!1,xl=0,uf=0;function At(){throw Error(o(321))}function Di(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!mn(e[n],t[n]))return!1;return!0}function $i(e,t,n,r,s,i){if(fr=i,vt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=e===null||e.memoizedState===null?pf:mf,e=n(r,s),ml){i=0;do{if(ml=!1,xl=0,25<=i)throw Error(o(301));i+=1,Tt=Mt=null,t.updateQueue=null,os.current=xf,e=n(r,s)}while(ml)}if(os.current=ds,t=Mt!==null&&Mt.next!==null,fr=0,Tt=Mt=vt=null,as=!1,t)throw Error(o(300));return e}function Ai(){var e=xl!==0;return xl=0,e}function Sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?vt.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function cn(){if(Mt===null){var e=vt.alternate;e=e!==null?e.memoizedState:null}else e=Mt.next;var t=Tt===null?vt.memoizedState:Tt.next;if(t!==null)Tt=t,Mt=e;else{if(e===null)throw Error(o(310));Mt=e,e={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Tt===null?vt.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function gl(e,t){return typeof t=="function"?t(e):t}function Fi(e){var t=cn(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var r=Mt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var m=a=null,b=null,R=i;do{var Z=R.lane;if((fr&Z)===Z)b!==null&&(b=b.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),r=R.hasEagerState?R.eagerState:e(r,R.action);else{var ne={lane:Z,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};b===null?(m=b=ne,a=r):b=b.next=ne,vt.lanes|=Z,hr|=Z}R=R.next}while(R!==null&&R!==i);b===null?a=r:b.next=m,mn(r,t.memoizedState)||(Gt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=b,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,vt.lanes|=i,hr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oi(e){var t=cn(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);mn(i,t.memoizedState)||(Gt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ka(){}function Ya(e,t){var n=vt,r=cn(),s=t(),i=!mn(r.memoizedState,s);if(i&&(r.memoizedState=s,Gt=!0),r=r.queue,Bi(ec.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,vl(9,Za.bind(null,n,r,s,t),void 0,null),It===null)throw Error(o(349));(fr&30)!==0||Ja(n,t,s)}return s}function Ja(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=vt.updateQueue,t===null?(t={lastEffect:null,stores:null},vt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Za(e,t,n,r){t.value=n,t.getSnapshot=r,tc(t)&&nc(e)}function ec(e,t,n){return n(function(){tc(t)&&nc(e)})}function tc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mn(e,n)}catch{return!0}}function nc(e){var t=In(e,1);t!==null&&bn(t,e,1,-1)}function rc(e){var t=Sn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:e},t.queue=e,e=e.dispatch=hf.bind(null,vt,e),[t.memoizedState,e]}function vl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=vt.updateQueue,t===null?(t={lastEffect:null,stores:null},vt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function lc(){return cn().memoizedState}function cs(e,t,n,r){var s=Sn();vt.flags|=e,s.memoizedState=vl(1|t,n,void 0,r===void 0?null:r)}function us(e,t,n,r){var s=cn();r=r===void 0?null:r;var i=void 0;if(Mt!==null){var a=Mt.memoizedState;if(i=a.destroy,r!==null&&Di(r,a.deps)){s.memoizedState=vl(t,n,i,r);return}}vt.flags|=e,s.memoizedState=vl(1|t,n,i,r)}function sc(e,t){return cs(8390656,8,e,t)}function Bi(e,t){return us(2048,8,e,t)}function ic(e,t){return us(4,2,e,t)}function oc(e,t){return us(4,4,e,t)}function ac(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cc(e,t,n){return n=n!=null?n.concat([e]):null,us(4,4,ac.bind(null,t,e),n)}function Ui(){}function uc(e,t){var n=cn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Di(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function dc(e,t){var n=cn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Di(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fc(e,t,n){return(fr&21)===0?(e.baseState&&(e.baseState=!1,Gt=!0),e.memoizedState=n):(mn(n,t)||(n=Uo(),vt.lanes|=n,hr|=n,e.baseState=!0),t)}function df(e,t){var n=ot;ot=n!==0&&4>n?n:4,e(!0);var r=Li.transition;Li.transition={};try{e(!1),t()}finally{ot=n,Li.transition=r}}function hc(){return cn().memoizedState}function ff(e,t,n){var r=Zn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pc(e))mc(t,n);else if(n=Va(e,t,n,r),n!==null){var s=Ut();bn(n,e,r,s),xc(n,t,r)}}function hf(e,t,n){var r=Zn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pc(e))mc(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,m=i(a,n);if(s.hasEagerState=!0,s.eagerState=m,mn(m,a)){var b=t.interleaved;b===null?(s.next=s,Mi(t)):(s.next=b.next,b.next=s),t.interleaved=s;return}}catch{}finally{}n=Va(e,t,s,r),n!==null&&(s=Ut(),bn(n,e,r,s),xc(n,t,r))}}function pc(e){var t=e.alternate;return e===vt||t!==null&&t===vt}function mc(e,t){ml=as=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xc(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Qs(e,n)}}var ds={readContext:an,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},pf={readContext:an,useCallback:function(e,t){return Sn().memoizedState=[e,t===void 0?null:t],e},useContext:an,useEffect:sc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,cs(4194308,4,ac.bind(null,t,e),n)},useLayoutEffect:function(e,t){return cs(4194308,4,e,t)},useInsertionEffect:function(e,t){return cs(4,2,e,t)},useMemo:function(e,t){var n=Sn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Sn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ff.bind(null,vt,e),[r.memoizedState,e]},useRef:function(e){var t=Sn();return e={current:e},t.memoizedState=e},useState:rc,useDebugValue:Ui,useDeferredValue:function(e){return Sn().memoizedState=e},useTransition:function(){var e=rc(!1),t=e[0];return e=df.bind(null,e[1]),Sn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vt,s=Sn();if(xt){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),It===null)throw Error(o(349));(fr&30)!==0||Ja(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,sc(ec.bind(null,r,i,e),[e]),r.flags|=2048,vl(9,Za.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Sn(),t=It.identifierPrefix;if(xt){var n=Tn,r=_n;n=(r&~(1<<32-pn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=xl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=uf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mf={readContext:an,useCallback:uc,useContext:an,useEffect:Bi,useImperativeHandle:cc,useInsertionEffect:ic,useLayoutEffect:oc,useMemo:dc,useReducer:Fi,useRef:lc,useState:function(){return Fi(gl)},useDebugValue:Ui,useDeferredValue:function(e){var t=cn();return fc(t,Mt.memoizedState,e)},useTransition:function(){var e=Fi(gl)[0],t=cn().memoizedState;return[e,t]},useMutableSource:Ka,useSyncExternalStore:Ya,useId:hc,unstable_isNewReconciler:!1},xf={readContext:an,useCallback:uc,useContext:an,useEffect:Bi,useImperativeHandle:cc,useInsertionEffect:ic,useLayoutEffect:oc,useMemo:dc,useReducer:Oi,useRef:lc,useState:function(){return Oi(gl)},useDebugValue:Ui,useDeferredValue:function(e){var t=cn();return Mt===null?t.memoizedState=e:fc(t,Mt.memoizedState,e)},useTransition:function(){var e=Oi(gl)[0],t=cn().memoizedState;return[e,t]},useMutableSource:Ka,useSyncExternalStore:Ya,useId:hc,unstable_isNewReconciler:!1};function gn(e,t){if(e&&e.defaultProps){t=$({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Hi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:$({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fs={isMounted:function(e){return(e=e._reactInternals)?hn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ut(),s=Zn(e),i=Rn(r,s);i.payload=t,n!=null&&(i.callback=n),t=qn(e,i,s),t!==null&&(bn(t,e,s,r),ls(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ut(),s=Zn(e),i=Rn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=qn(e,i,s),t!==null&&(bn(t,e,s,r),ls(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ut(),r=Zn(e),s=Rn(n,r);s.tag=2,t!=null&&(s.callback=t),t=qn(e,s,r),t!==null&&(bn(t,e,r,n),ls(t,e,r))}};function gc(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!ll(n,r)||!ll(s,i):!0}function vc(e,t,n){var r=!1,s=Wn,i=t.contextType;return typeof i=="object"&&i!==null?i=an(i):(s=Xt(t)?or:$t.current,r=t.contextTypes,i=(r=r!=null)?Pr(e,s):Wn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fs,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function yc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fs.enqueueReplaceState(t,t.state,null)}function Qi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Pi(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=an(i):(i=Xt(t)?or:$t.current,s.context=Pr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Hi(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&fs.enqueueReplaceState(s,s.state,null),ss(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ar(e,t){try{var n="",r=t;do n+=Ce(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Vi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Wi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gf=typeof WeakMap=="function"?WeakMap:Map;function bc(e,t,n){n=Rn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ys||(ys=!0,oo=r),Wi(e,t)},n}function wc(e,t,n){n=Rn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Wi(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Wi(e,t),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function kc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gf;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=_f.bind(null,e,t,n),t.then(e,e))}function jc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zc(e,t,n,r,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rn(-1,1),t.tag=2,qn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vf=w.ReactCurrentOwner,Gt=!1;function Bt(e,t,n,r){t.child=e===null?Qa(t,null,n,r):Rr(t,e.child,n,r)}function Nc(e,t,n,r,s){n=n.render;var i=t.ref;return Dr(t,s),r=$i(e,t,n,r,i,s),n=Ai(),e!==null&&!Gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ln(e,t,s)):(xt&&n&&bi(t),t.flags|=1,Bt(e,t,r,s),t.child)}function Sc(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!mo(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Cc(e,t,i,r,s)):(e=Ns(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,(e.lanes&s)===0){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ll,n(a,r)&&e.ref===t.ref)return Ln(e,t,s)}return t.flags|=1,e=tr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Cc(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(ll(i,r)&&e.ref===t.ref)if(Gt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)(e.flags&131072)!==0&&(Gt=!0);else return t.lanes=e.lanes,Ln(e,t,s)}return Xi(e,t,n,r,s)}function Ec(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(Or,tn),tn|=n;else{if((n&1073741824)===0)return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ut(Or,tn),tn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ut(Or,tn),tn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ut(Or,tn),tn|=r;return Bt(e,t,s,n),t.child}function Mc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Xi(e,t,n,r,s){var i=Xt(n)?or:$t.current;return i=Pr(t,i),Dr(t,s),n=$i(e,t,n,r,i,s),r=Ai(),e!==null&&!Gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ln(e,t,s)):(xt&&r&&bi(t),t.flags|=1,Bt(e,t,n,s),t.child)}function Pc(e,t,n,r,s){if(Xt(n)){var i=!0;Kl(t)}else i=!1;if(Dr(t,s),t.stateNode===null)ps(e,t),vc(t,n,r),Qi(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,m=t.memoizedProps;a.props=m;var b=a.context,R=n.contextType;typeof R=="object"&&R!==null?R=an(R):(R=Xt(n)?or:$t.current,R=Pr(t,R));var Z=n.getDerivedStateFromProps,ne=typeof Z=="function"||typeof a.getSnapshotBeforeUpdate=="function";ne||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(m!==r||b!==R)&&yc(t,a,r,R),Gn=!1;var Y=t.memoizedState;a.state=Y,ss(t,r,a,s),b=t.memoizedState,m!==r||Y!==b||Wt.current||Gn?(typeof Z=="function"&&(Hi(t,n,Z,r),b=t.memoizedState),(m=Gn||gc(t,n,m,r,Y,b,R))?(ne||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=b),a.props=r,a.state=b,a.context=R,r=m):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Wa(e,t),m=t.memoizedProps,R=t.type===t.elementType?m:gn(t.type,m),a.props=R,ne=t.pendingProps,Y=a.context,b=n.contextType,typeof b=="object"&&b!==null?b=an(b):(b=Xt(n)?or:$t.current,b=Pr(t,b));var be=n.getDerivedStateFromProps;(Z=typeof be=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(m!==ne||Y!==b)&&yc(t,a,r,b),Gn=!1,Y=t.memoizedState,a.state=Y,ss(t,r,a,s);var ze=t.memoizedState;m!==ne||Y!==ze||Wt.current||Gn?(typeof be=="function"&&(Hi(t,n,be,r),ze=t.memoizedState),(R=Gn||gc(t,n,R,r,Y,ze,b)||!1)?(Z||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,ze,b),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,ze,b)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=ze),a.props=r,a.state=ze,a.context=b,r=R):(typeof a.componentDidUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),r=!1)}return Gi(e,t,n,r,i,s)}function Gi(e,t,n,r,s,i){Mc(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&La(t,n,!1),Ln(e,t,i);r=t.stateNode,vf.current=t;var m=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Rr(t,e.child,null,i),t.child=Rr(t,null,m,i)):Bt(e,t,m,i),t.memoizedState=r.state,s&&La(t,n,!0),t.child}function _c(e){var t=e.stateNode;t.pendingContext?Ia(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(e,t.context,!1),_i(e,t.containerInfo)}function Tc(e,t,n,r,s){return Ir(),zi(s),t.flags|=256,Bt(e,t,n,r),t.child}var qi={dehydrated:null,treeContext:null,retryLane:0};function Ki(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ic(e,t,n){var r=t.pendingProps,s=gt.current,i=!1,a=(t.flags&128)!==0,m;if((m=a)||(m=e!==null&&e.memoizedState===null?!1:(s&2)!==0),m?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ut(gt,s&1),e===null)return ji(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ss(a,r,0,null),e=gr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ki(n),t.memoizedState=qi,e):Yi(t,a));if(s=e.memoizedState,s!==null&&(m=s.dehydrated,m!==null))return yf(e,t,a,r,m,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,m=s.sibling;var b={mode:"hidden",children:r.children};return(a&1)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=b,t.deletions=null):(r=tr(s,b),r.subtreeFlags=s.subtreeFlags&14680064),m!==null?i=tr(m,i):(i=gr(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Ki(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=qi,r}return i=e.child,e=i.sibling,r=tr(i,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yi(e,t){return t=Ss({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hs(e,t,n,r){return r!==null&&zi(r),Rr(t,e.child,null,n),e=Yi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yf(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Vi(Error(o(422))),hs(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ss({mode:"visible",children:r.children},s,0,null),i=gr(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,(t.mode&1)!==0&&Rr(t,e.child,null,a),t.child.memoizedState=Ki(a),t.memoizedState=qi,i);if((t.mode&1)===0)return hs(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var m=r.dgst;return r=m,i=Error(o(419)),r=Vi(i,r,void 0),hs(e,t,a,r)}if(m=(a&e.childLanes)!==0,Gt||m){if(r=It,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|a))!==0?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,In(e,s),bn(r,e,s,-1))}return po(),r=Vi(Error(o(421))),hs(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Tf.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,en=Qn(s.nextSibling),Zt=t,xt=!0,xn=null,e!==null&&(sn[on++]=_n,sn[on++]=Tn,sn[on++]=ar,_n=e.id,Tn=e.overflow,ar=t),t=Yi(t,r.children),t.flags|=4096,t)}function Rc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ei(e.return,t,n)}function Ji(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Lc(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Bt(e,t,r.children,n),r=gt.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rc(e,n,t);else if(e.tag===19)Rc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ut(gt,r),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&is(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ji(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&is(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ji(t,!0,n,null,i);break;case"together":Ji(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ps(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ln(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hr|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=tr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=tr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bf(e,t,n){switch(t.tag){case 3:_c(t),Ir();break;case 5:qa(t);break;case 1:Xt(t.type)&&Kl(t);break;case 4:_i(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ut(ns,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ut(gt,gt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Ic(e,t,n):(ut(gt,gt.current&1),e=Ln(e,t,n),e!==null?e.sibling:null);ut(gt,gt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Lc(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ut(gt,gt.current),r)break;return null;case 22:case 23:return t.lanes=0,Ec(e,t,n)}return Ln(e,t,n)}var Dc,Zi,$c,Ac;Dc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Zi=function(){},$c=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,dr(Nn.current);var i=null;switch(n){case"input":s=q(e,s),r=q(e,r),i=[];break;case"select":s=$({},s,{value:void 0}),r=$({},r,{value:void 0}),i=[];break;case"textarea":s=Oe(e,s),r=Oe(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Xl)}rt(n,r);var a;n=null;for(R in s)if(!r.hasOwnProperty(R)&&s.hasOwnProperty(R)&&s[R]!=null)if(R==="style"){var m=s[R];for(a in m)m.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(u.hasOwnProperty(R)?i||(i=[]):(i=i||[]).push(R,null));for(R in r){var b=r[R];if(m=s!=null?s[R]:void 0,r.hasOwnProperty(R)&&b!==m&&(b!=null||m!=null))if(R==="style")if(m){for(a in m)!m.hasOwnProperty(a)||b&&b.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in b)b.hasOwnProperty(a)&&m[a]!==b[a]&&(n||(n={}),n[a]=b[a])}else n||(i||(i=[]),i.push(R,n)),n=b;else R==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,m=m?m.__html:void 0,b!=null&&m!==b&&(i=i||[]).push(R,b)):R==="children"?typeof b!="string"&&typeof b!="number"||(i=i||[]).push(R,""+b):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(u.hasOwnProperty(R)?(b!=null&&R==="onScroll"&&ft("scroll",e),i||m===b||(i=[])):(i=i||[]).push(R,b))}n&&(i=i||[]).push("style",n);var R=i;(t.updateQueue=R)&&(t.flags|=4)}},Ac=function(e,t,n,r){n!==r&&(t.flags|=4)};function yl(e,t){if(!xt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function wf(e,t,n){var r=t.pendingProps;switch(wi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(t),null;case 1:return Xt(t.type)&&ql(),Ft(t),null;case 3:return r=t.stateNode,$r(),ht(Wt),ht($t),Ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(es(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,xn!==null&&(uo(xn),xn=null))),Zi(e,t),Ft(t),null;case 5:Ti(t);var s=dr(pl.current);if(n=t.type,e!==null&&t.stateNode!=null)$c(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(o(166));return Ft(t),null}if(e=dr(Nn.current),es(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[zn]=t,r[cl]=i,e=(t.mode&1)!==0,n){case"dialog":ft("cancel",r),ft("close",r);break;case"iframe":case"object":case"embed":ft("load",r);break;case"video":case"audio":for(s=0;s<il.length;s++)ft(il[s],r);break;case"source":ft("error",r);break;case"img":case"image":case"link":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"input":J(r,i),ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ft("invalid",r);break;case"textarea":oe(r,i),ft("invalid",r)}rt(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var m=i[a];a==="children"?typeof m=="string"?r.textContent!==m&&(i.suppressHydrationWarning!==!0&&Wl(r.textContent,m,e),s=["children",m]):typeof m=="number"&&r.textContent!==""+m&&(i.suppressHydrationWarning!==!0&&Wl(r.textContent,m,e),s=["children",""+m]):u.hasOwnProperty(a)&&m!=null&&a==="onScroll"&&ft("scroll",r)}switch(n){case"input":nt(r),Pe(r,i,!0);break;case"textarea":nt(r),ve(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Xl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=he(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[zn]=t,e[cl]=r,Dc(e,t,!1,!1),t.stateNode=e;e:{switch(a=it(n,r),n){case"dialog":ft("cancel",e),ft("close",e),s=r;break;case"iframe":case"object":case"embed":ft("load",e),s=r;break;case"video":case"audio":for(s=0;s<il.length;s++)ft(il[s],e);s=r;break;case"source":ft("error",e),s=r;break;case"img":case"image":case"link":ft("error",e),ft("load",e),s=r;break;case"details":ft("toggle",e),s=r;break;case"input":J(e,r),s=q(e,r),ft("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=$({},r,{value:void 0}),ft("invalid",e);break;case"textarea":oe(e,r),s=Oe(e,r),ft("invalid",e);break;default:s=r}rt(n,s),m=s;for(i in m)if(m.hasOwnProperty(i)){var b=m[i];i==="style"?st(e,b):i==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&Ne(e,b)):i==="children"?typeof b=="string"?(n!=="textarea"||b!=="")&&qe(e,b):typeof b=="number"&&qe(e,""+b):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(u.hasOwnProperty(i)?b!=null&&i==="onScroll"&&ft("scroll",e):b!=null&&H(e,i,b,a))}switch(n){case"input":nt(e),Pe(e,r,!1);break;case"textarea":nt(e),ve(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ee(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Fe(e,!!r.multiple,i,!1):r.defaultValue!=null&&Fe(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Xl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ft(t),null;case 6:if(e&&t.stateNode!=null)Ac(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(o(166));if(n=dr(pl.current),dr(Nn.current),es(t)){if(r=t.stateNode,n=t.memoizedProps,r[zn]=t,(i=r.nodeValue!==n)&&(e=Zt,e!==null))switch(e.tag){case 3:Wl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zn]=t,t.stateNode=r}return Ft(t),null;case 13:if(ht(gt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xt&&en!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ba(),Ir(),t.flags|=98560,i=!1;else if(i=es(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(o(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));i[zn]=t}else Ir(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ft(t),i=!1}else xn!==null&&(uo(xn),xn=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(gt.current&1)!==0?Pt===0&&(Pt=3):po())),t.updateQueue!==null&&(t.flags|=4),Ft(t),null);case 4:return $r(),Zi(e,t),e===null&&ol(t.stateNode.containerInfo),Ft(t),null;case 10:return Ci(t.type._context),Ft(t),null;case 17:return Xt(t.type)&&ql(),Ft(t),null;case 19:if(ht(gt),i=t.memoizedState,i===null)return Ft(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)yl(i,!1);else{if(Pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(a=is(e),a!==null){for(t.flags|=128,yl(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ut(gt,gt.current&1|2),t.child}e=e.sibling}i.tail!==null&&jt()>Br&&(t.flags|=128,r=!0,yl(i,!1),t.lanes=4194304)}else{if(!r)if(e=is(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),yl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!xt)return Ft(t),null}else 2*jt()-i.renderingStartTime>Br&&n!==1073741824&&(t.flags|=128,r=!0,yl(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=jt(),t.sibling=null,n=gt.current,ut(gt,r?n&1|2:n&1),t):(Ft(t),null);case 22:case 23:return ho(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(tn&1073741824)!==0&&(Ft(t),t.subtreeFlags&6&&(t.flags|=8192)):Ft(t),null;case 24:return null;case 25:return null}throw Error(o(156,t.tag))}function kf(e,t){switch(wi(t),t.tag){case 1:return Xt(t.type)&&ql(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $r(),ht(Wt),ht($t),Ri(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ti(t),null;case 13:if(ht(gt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ht(gt),null;case 4:return $r(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return ho(),null;case 24:return null;default:return null}}var ms=!1,Ot=!1,jf=typeof WeakSet=="function"?WeakSet:Set,je=null;function Fr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(e,t,r)}else n.current=null}function eo(e,t,n){try{n()}catch(r){bt(e,t,r)}}var Fc=!1;function zf(e,t){if(fi=Ll,e=ga(),li(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,m=-1,b=-1,R=0,Z=0,ne=e,Y=null;t:for(;;){for(var be;ne!==n||s!==0&&ne.nodeType!==3||(m=a+s),ne!==i||r!==0&&ne.nodeType!==3||(b=a+r),ne.nodeType===3&&(a+=ne.nodeValue.length),(be=ne.firstChild)!==null;)Y=ne,ne=be;for(;;){if(ne===e)break t;if(Y===n&&++R===s&&(m=a),Y===i&&++Z===r&&(b=a),(be=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=be}n=m===-1||b===-1?null:{start:m,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(hi={focusedElem:e,selectionRange:n},Ll=!1,je=t;je!==null;)if(t=je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,je=e;else for(;je!==null;){t=je;try{var ze=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ze!==null){var Se=ze.memoizedProps,zt=ze.memoizedState,E=t.stateNode,j=E.getSnapshotBeforeUpdate(t.elementType===t.type?Se:gn(t.type,Se),zt);E.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ae){bt(t,t.return,ae)}if(e=t.sibling,e!==null){e.return=t.return,je=e;break}je=t.return}return ze=Fc,Fc=!1,ze}function bl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&eo(t,n,i)}s=s.next}while(s!==r)}}function xs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function to(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Oc(e){var t=e.alternate;t!==null&&(e.alternate=null,Oc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zn],delete t[cl],delete t[gi],delete t[sf],delete t[of])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bc(e){return e.tag===5||e.tag===3||e.tag===4}function Uc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function no(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xl));else if(r!==4&&(e=e.child,e!==null))for(no(e,t,n),e=e.sibling;e!==null;)no(e,t,n),e=e.sibling}function ro(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ro(e,t,n),e=e.sibling;e!==null;)ro(e,t,n),e=e.sibling}var Lt=null,vn=!1;function Kn(e,t,n){for(n=n.child;n!==null;)Hc(e,t,n),n=n.sibling}function Hc(e,t,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(Ml,n)}catch{}switch(n.tag){case 5:Ot||Fr(n,t);case 6:var r=Lt,s=vn;Lt=null,Kn(e,t,n),Lt=r,vn=s,Lt!==null&&(vn?(e=Lt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Lt.removeChild(n.stateNode));break;case 18:Lt!==null&&(vn?(e=Lt,n=n.stateNode,e.nodeType===8?xi(e.parentNode,n):e.nodeType===1&&xi(e,n),Jr(e)):xi(Lt,n.stateNode));break;case 4:r=Lt,s=vn,Lt=n.stateNode.containerInfo,vn=!0,Kn(e,t,n),Lt=r,vn=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&((i&2)!==0||(i&4)!==0)&&eo(n,t,a),s=s.next}while(s!==r)}Kn(e,t,n);break;case 1:if(!Ot&&(Fr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(m){bt(n,t,m)}Kn(e,t,n);break;case 21:Kn(e,t,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Kn(e,t,n),Ot=r):Kn(e,t,n);break;default:Kn(e,t,n)}}function Qc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jf),t.forEach(function(r){var s=If.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function yn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,m=a;e:for(;m!==null;){switch(m.tag){case 5:Lt=m.stateNode,vn=!1;break e;case 3:Lt=m.stateNode.containerInfo,vn=!0;break e;case 4:Lt=m.stateNode.containerInfo,vn=!0;break e}m=m.return}if(Lt===null)throw Error(o(160));Hc(i,a,s),Lt=null,vn=!1;var b=s.alternate;b!==null&&(b.return=null),s.return=null}catch(R){bt(s,t,R)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vc(t,e),t=t.sibling}function Vc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yn(t,e),Cn(e),r&4){try{bl(3,e,e.return),xs(3,e)}catch(Se){bt(e,e.return,Se)}try{bl(5,e,e.return)}catch(Se){bt(e,e.return,Se)}}break;case 1:yn(t,e),Cn(e),r&512&&n!==null&&Fr(n,n.return);break;case 5:if(yn(t,e),Cn(e),r&512&&n!==null&&Fr(n,n.return),e.flags&32){var s=e.stateNode;try{qe(s,"")}catch(Se){bt(e,e.return,Se)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,m=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{m==="input"&&i.type==="radio"&&i.name!=null&&te(s,i),it(m,a);var R=it(m,i);for(a=0;a<b.length;a+=2){var Z=b[a],ne=b[a+1];Z==="style"?st(s,ne):Z==="dangerouslySetInnerHTML"?Ne(s,ne):Z==="children"?qe(s,ne):H(s,Z,ne,R)}switch(m){case"input":ue(s,i);break;case"textarea":g(s,i);break;case"select":var Y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var be=i.value;be!=null?Fe(s,!!i.multiple,be,!1):Y!==!!i.multiple&&(i.defaultValue!=null?Fe(s,!!i.multiple,i.defaultValue,!0):Fe(s,!!i.multiple,i.multiple?[]:"",!1))}s[cl]=i}catch(Se){bt(e,e.return,Se)}}break;case 6:if(yn(t,e),Cn(e),r&4){if(e.stateNode===null)throw Error(o(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(Se){bt(e,e.return,Se)}}break;case 3:if(yn(t,e),Cn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jr(t.containerInfo)}catch(Se){bt(e,e.return,Se)}break;case 4:yn(t,e),Cn(e);break;case 13:yn(t,e),Cn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(io=jt())),r&4&&Qc(e);break;case 22:if(Z=n!==null&&n.memoizedState!==null,e.mode&1?(Ot=(R=Ot)||Z,yn(t,e),Ot=R):yn(t,e),Cn(e),r&8192){if(R=e.memoizedState!==null,(e.stateNode.isHidden=R)&&!Z&&(e.mode&1)!==0)for(je=e,Z=e.child;Z!==null;){for(ne=je=Z;je!==null;){switch(Y=je,be=Y.child,Y.tag){case 0:case 11:case 14:case 15:bl(4,Y,Y.return);break;case 1:Fr(Y,Y.return);var ze=Y.stateNode;if(typeof ze.componentWillUnmount=="function"){r=Y,n=Y.return;try{t=r,ze.props=t.memoizedProps,ze.state=t.memoizedState,ze.componentWillUnmount()}catch(Se){bt(r,n,Se)}}break;case 5:Fr(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Gc(ne);continue}}be!==null?(be.return=Y,je=be):Gc(ne)}Z=Z.sibling}e:for(Z=null,ne=e;;){if(ne.tag===5){if(Z===null){Z=ne;try{s=ne.stateNode,R?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(m=ne.stateNode,b=ne.memoizedProps.style,a=b!=null&&b.hasOwnProperty("display")?b.display:null,m.style.display=Ge("display",a))}catch(Se){bt(e,e.return,Se)}}}else if(ne.tag===6){if(Z===null)try{ne.stateNode.nodeValue=R?"":ne.memoizedProps}catch(Se){bt(e,e.return,Se)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===e)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===e)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===e)break e;Z===ne&&(Z=null),ne=ne.return}Z===ne&&(Z=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:yn(t,e),Cn(e),r&4&&Qc(e);break;case 21:break;default:yn(t,e),Cn(e)}}function Cn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Bc(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(qe(s,""),r.flags&=-33);var i=Uc(e);ro(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,m=Uc(e);no(e,m,a);break;default:throw Error(o(161))}}catch(b){bt(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Nf(e,t,n){je=e,Wc(e)}function Wc(e,t,n){for(var r=(e.mode&1)!==0;je!==null;){var s=je,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ms;if(!a){var m=s.alternate,b=m!==null&&m.memoizedState!==null||Ot;m=ms;var R=Ot;if(ms=a,(Ot=b)&&!R)for(je=s;je!==null;)a=je,b=a.child,a.tag===22&&a.memoizedState!==null?qc(s):b!==null?(b.return=a,je=b):qc(s);for(;i!==null;)je=i,Wc(i),i=i.sibling;je=s,ms=m,Ot=R}Xc(e)}else(s.subtreeFlags&8772)!==0&&i!==null?(i.return=s,je=i):Xc(e)}}function Xc(e){for(;je!==null;){var t=je;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ot||xs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:gn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ga(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ga(t,a,n)}break;case 5:var m=t.stateNode;if(n===null&&t.flags&4){n=m;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&n.focus();break;case"img":b.src&&(n.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var R=t.alternate;if(R!==null){var Z=R.memoizedState;if(Z!==null){var ne=Z.dehydrated;ne!==null&&Jr(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Ot||t.flags&512&&to(t)}catch(Y){bt(t,t.return,Y)}}if(t===e){je=null;break}if(n=t.sibling,n!==null){n.return=t.return,je=n;break}je=t.return}}function Gc(e){for(;je!==null;){var t=je;if(t===e){je=null;break}var n=t.sibling;if(n!==null){n.return=t.return,je=n;break}je=t.return}}function qc(e){for(;je!==null;){var t=je;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xs(4,t)}catch(b){bt(t,n,b)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(b){bt(t,s,b)}}var i=t.return;try{to(t)}catch(b){bt(t,i,b)}break;case 5:var a=t.return;try{to(t)}catch(b){bt(t,a,b)}}}catch(b){bt(t,t.return,b)}if(t===e){je=null;break}var m=t.sibling;if(m!==null){m.return=t.return,je=m;break}je=t.return}}var Sf=Math.ceil,gs=w.ReactCurrentDispatcher,lo=w.ReactCurrentOwner,un=w.ReactCurrentBatchConfig,tt=0,It=null,St=null,Dt=0,tn=0,Or=Vn(0),Pt=0,wl=null,hr=0,vs=0,so=0,kl=null,qt=null,io=0,Br=1/0,Dn=null,ys=!1,oo=null,Yn=null,bs=!1,Jn=null,ws=0,jl=0,ao=null,ks=-1,js=0;function Ut(){return(tt&6)!==0?jt():ks!==-1?ks:ks=jt()}function Zn(e){return(e.mode&1)===0?1:(tt&2)!==0&&Dt!==0?Dt&-Dt:cf.transition!==null?(js===0&&(js=Uo()),js):(e=ot,e!==0||(e=window.event,e=e===void 0?16:Yo(e.type)),e)}function bn(e,t,n,r){if(50<jl)throw jl=0,ao=null,Error(o(185));Xr(e,n,r),((tt&2)===0||e!==It)&&(e===It&&((tt&2)===0&&(vs|=n),Pt===4&&er(e,Dt)),Kt(e,r),n===1&&tt===0&&(t.mode&1)===0&&(Br=jt()+500,Yl&&Xn()))}function Kt(e,t){var n=e.callbackNode;ad(e,t);var r=Tl(e,e===It?Dt:0);if(r===0)n!==null&&sr(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sr(n),t===1)e.tag===0?af(Yc.bind(null,e)):Da(Yc.bind(null,e)),rf(function(){(tt&6)===0&&Xn()}),n=null;else{switch(Ho(r)){case 1:n=Bs;break;case 4:n=Oo;break;case 16:n=El;break;case 536870912:n=Bo;break;default:n=El}n=su(n,Kc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Kc(e,t){if(ks=-1,js=0,(tt&6)!==0)throw Error(o(327));var n=e.callbackNode;if(Ur()&&e.callbackNode!==n)return null;var r=Tl(e,e===It?Dt:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=zs(e,r);else{t=r;var s=tt;tt|=2;var i=Zc();(It!==e||Dt!==t)&&(Dn=null,Br=jt()+500,mr(e,t));do try{Mf();break}catch(m){Jc(e,m)}while(!0);Si(),gs.current=i,tt=s,St!==null?t=0:(It=null,Dt=0,t=Pt)}if(t!==0){if(t===2&&(s=Us(e),s!==0&&(r=s,t=co(e,s))),t===1)throw n=wl,mr(e,0),er(e,r),Kt(e,jt()),n;if(t===6)er(e,r);else{if(s=e.current.alternate,(r&30)===0&&!Cf(s)&&(t=zs(e,r),t===2&&(i=Us(e),i!==0&&(r=i,t=co(e,i))),t===1))throw n=wl,mr(e,0),er(e,r),Kt(e,jt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:xr(e,qt,Dn);break;case 3:if(er(e,r),(r&130023424)===r&&(t=io+500-jt(),10<t)){if(Tl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ut(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=mi(xr.bind(null,e,qt,Dn),t);break}xr(e,qt,Dn);break;case 4:if(er(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-pn(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sf(r/1960))-r,10<r){e.timeoutHandle=mi(xr.bind(null,e,qt,Dn),r);break}xr(e,qt,Dn);break;case 5:xr(e,qt,Dn);break;default:throw Error(o(329))}}}return Kt(e,jt()),e.callbackNode===n?Kc.bind(null,e):null}function co(e,t){var n=kl;return e.current.memoizedState.isDehydrated&&(mr(e,t).flags|=256),e=zs(e,t),e!==2&&(t=qt,qt=n,t!==null&&uo(t)),e}function uo(e){qt===null?qt=e:qt.push.apply(qt,e)}function Cf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!mn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t){for(t&=~so,t&=~vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-pn(t),r=1<<n;e[n]=-1,t&=~r}}function Yc(e){if((tt&6)!==0)throw Error(o(327));Ur();var t=Tl(e,0);if((t&1)===0)return Kt(e,jt()),null;var n=zs(e,t);if(e.tag!==0&&n===2){var r=Us(e);r!==0&&(t=r,n=co(e,r))}if(n===1)throw n=wl,mr(e,0),er(e,t),Kt(e,jt()),n;if(n===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xr(e,qt,Dn),Kt(e,jt()),null}function fo(e,t){var n=tt;tt|=1;try{return e(t)}finally{tt=n,tt===0&&(Br=jt()+500,Yl&&Xn())}}function pr(e){Jn!==null&&Jn.tag===0&&(tt&6)===0&&Ur();var t=tt;tt|=1;var n=un.transition,r=ot;try{if(un.transition=null,ot=1,e)return e()}finally{ot=r,un.transition=n,tt=t,(tt&6)===0&&Xn()}}function ho(){tn=Or.current,ht(Or)}function mr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,nf(n)),St!==null)for(n=St.return;n!==null;){var r=n;switch(wi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ql();break;case 3:$r(),ht(Wt),ht($t),Ri();break;case 5:Ti(r);break;case 4:$r();break;case 13:ht(gt);break;case 19:ht(gt);break;case 10:Ci(r.type._context);break;case 22:case 23:ho()}n=n.return}if(It=e,St=e=tr(e.current,null),Dt=tn=t,Pt=0,wl=null,so=vs=hr=0,qt=kl=null,ur!==null){for(t=0;t<ur.length;t++)if(n=ur[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}ur=null}return e}function Jc(e,t){do{var n=St;try{if(Si(),os.current=ds,as){for(var r=vt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}as=!1}if(fr=0,Tt=Mt=vt=null,ml=!1,xl=0,lo.current=null,n===null||n.return===null){Pt=1,wl=t,St=null;break}e:{var i=e,a=n.return,m=n,b=t;if(t=Dt,m.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var R=b,Z=m,ne=Z.tag;if((Z.mode&1)===0&&(ne===0||ne===11||ne===15)){var Y=Z.alternate;Y?(Z.updateQueue=Y.updateQueue,Z.memoizedState=Y.memoizedState,Z.lanes=Y.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var be=jc(a);if(be!==null){be.flags&=-257,zc(be,a,m,i,t),be.mode&1&&kc(i,R,t),t=be,b=R;var ze=t.updateQueue;if(ze===null){var Se=new Set;Se.add(b),t.updateQueue=Se}else ze.add(b);break e}else{if((t&1)===0){kc(i,R,t),po();break e}b=Error(o(426))}}else if(xt&&m.mode&1){var zt=jc(a);if(zt!==null){(zt.flags&65536)===0&&(zt.flags|=256),zc(zt,a,m,i,t),zi(Ar(b,m));break e}}i=b=Ar(b,m),Pt!==4&&(Pt=2),kl===null?kl=[i]:kl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var E=bc(i,b,t);Xa(i,E);break e;case 1:m=b;var j=i.type,P=i.stateNode;if((i.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Yn===null||!Yn.has(P)))){i.flags|=65536,t&=-t,i.lanes|=t;var ae=wc(i,m,t);Xa(i,ae);break e}}i=i.return}while(i!==null)}tu(n)}catch(_e){t=_e,St===n&&n!==null&&(St=n=n.return);continue}break}while(!0)}function Zc(){var e=gs.current;return gs.current=ds,e===null?ds:e}function po(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),It===null||(hr&268435455)===0&&(vs&268435455)===0||er(It,Dt)}function zs(e,t){var n=tt;tt|=2;var r=Zc();(It!==e||Dt!==t)&&(Dn=null,mr(e,t));do try{Ef();break}catch(s){Jc(e,s)}while(!0);if(Si(),tt=n,gs.current=r,St!==null)throw Error(o(261));return It=null,Dt=0,Pt}function Ef(){for(;St!==null;)eu(St)}function Mf(){for(;St!==null&&!kn();)eu(St)}function eu(e){var t=lu(e.alternate,e,tn);e.memoizedProps=e.pendingProps,t===null?tu(e):St=t,lo.current=null}function tu(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=wf(n,t,tn),n!==null){St=n;return}}else{if(n=kf(n,t),n!==null){n.flags&=32767,St=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pt=6,St=null;return}}if(t=t.sibling,t!==null){St=t;return}St=t=e}while(t!==null);Pt===0&&(Pt=5)}function xr(e,t,n){var r=ot,s=un.transition;try{un.transition=null,ot=1,Pf(e,t,n,r)}finally{un.transition=s,ot=r}return null}function Pf(e,t,n,r){do Ur();while(Jn!==null);if((tt&6)!==0)throw Error(o(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(cd(e,i),e===It&&(St=It=null,Dt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||bs||(bs=!0,su(El,function(){return Ur(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=un.transition,un.transition=null;var a=ot;ot=1;var m=tt;tt|=4,lo.current=null,zf(e,n),Vc(n,e),qd(hi),Ll=!!fi,hi=fi=null,e.current=n,Nf(n),ed(),tt=m,ot=a,un.transition=i}else e.current=n;if(bs&&(bs=!1,Jn=e,ws=s),i=e.pendingLanes,i===0&&(Yn=null),rd(n.stateNode),Kt(e,jt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ys)throw ys=!1,e=oo,oo=null,e;return(ws&1)!==0&&e.tag!==0&&Ur(),i=e.pendingLanes,(i&1)!==0?e===ao?jl++:(jl=0,ao=e):jl=0,Xn(),null}function Ur(){if(Jn!==null){var e=Ho(ws),t=un.transition,n=ot;try{if(un.transition=null,ot=16>e?16:e,Jn===null)var r=!1;else{if(e=Jn,Jn=null,ws=0,(tt&6)!==0)throw Error(o(331));var s=tt;for(tt|=4,je=e.current;je!==null;){var i=je,a=i.child;if((je.flags&16)!==0){var m=i.deletions;if(m!==null){for(var b=0;b<m.length;b++){var R=m[b];for(je=R;je!==null;){var Z=je;switch(Z.tag){case 0:case 11:case 15:bl(8,Z,i)}var ne=Z.child;if(ne!==null)ne.return=Z,je=ne;else for(;je!==null;){Z=je;var Y=Z.sibling,be=Z.return;if(Oc(Z),Z===R){je=null;break}if(Y!==null){Y.return=be,je=Y;break}je=be}}}var ze=i.alternate;if(ze!==null){var Se=ze.child;if(Se!==null){ze.child=null;do{var zt=Se.sibling;Se.sibling=null,Se=zt}while(Se!==null)}}je=i}}if((i.subtreeFlags&2064)!==0&&a!==null)a.return=i,je=a;else e:for(;je!==null;){if(i=je,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:bl(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,je=E;break e}je=i.return}}var j=e.current;for(je=j;je!==null;){a=je;var P=a.child;if((a.subtreeFlags&2064)!==0&&P!==null)P.return=a,je=P;else e:for(a=j;je!==null;){if(m=je,(m.flags&2048)!==0)try{switch(m.tag){case 0:case 11:case 15:xs(9,m)}}catch(_e){bt(m,m.return,_e)}if(m===a){je=null;break e}var ae=m.sibling;if(ae!==null){ae.return=m.return,je=ae;break e}je=m.return}}if(tt=s,Xn(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(Ml,e)}catch{}r=!0}return r}finally{ot=n,un.transition=t}}return!1}function nu(e,t,n){t=Ar(n,t),t=bc(e,t,1),e=qn(e,t,1),t=Ut(),e!==null&&(Xr(e,1,t),Kt(e,t))}function bt(e,t,n){if(e.tag===3)nu(e,e,n);else for(;t!==null;){if(t.tag===3){nu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){e=Ar(n,e),e=wc(t,e,1),t=qn(t,e,1),e=Ut(),t!==null&&(Xr(t,1,e),Kt(t,e));break}}t=t.return}}function _f(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ut(),e.pingedLanes|=e.suspendedLanes&n,It===e&&(Dt&n)===n&&(Pt===4||Pt===3&&(Dt&130023424)===Dt&&500>jt()-io?mr(e,0):so|=n),Kt(e,t)}function ru(e,t){t===0&&((e.mode&1)===0?t=1:(t=_l,_l<<=1,(_l&130023424)===0&&(_l=4194304)));var n=Ut();e=In(e,t),e!==null&&(Xr(e,t,n),Kt(e,n))}function Tf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ru(e,n)}function If(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}r!==null&&r.delete(t),ru(e,n)}var lu;lu=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wt.current)Gt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Gt=!1,bf(e,t,n);Gt=(e.flags&131072)!==0}else Gt=!1,xt&&(t.flags&1048576)!==0&&$a(t,Zl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ps(e,t),e=t.pendingProps;var s=Pr(t,$t.current);Dr(t,n),s=$i(null,t,r,e,s,n);var i=Ai();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xt(r)?(i=!0,Kl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Pi(t),s.updater=fs,t.stateNode=s,s._reactInternals=t,Qi(t,r,e,n),t=Gi(null,t,r,!0,i,n)):(t.tag=0,xt&&i&&bi(t),Bt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ps(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Lf(r),e=gn(r,e),s){case 0:t=Xi(null,t,r,e,n);break e;case 1:t=Pc(null,t,r,e,n);break e;case 11:t=Nc(null,t,r,e,n);break e;case 14:t=Sc(null,t,r,gn(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),Xi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),Pc(e,t,r,s,n);case 3:e:{if(_c(t),e===null)throw Error(o(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Wa(e,t),ss(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ar(Error(o(423)),t),t=Tc(e,t,r,n,s);break e}else if(r!==s){s=Ar(Error(o(424)),t),t=Tc(e,t,r,n,s);break e}else for(en=Qn(t.stateNode.containerInfo.firstChild),Zt=t,xt=!0,xn=null,n=Qa(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ir(),r===s){t=Ln(e,t,n);break e}Bt(e,t,r,n)}t=t.child}return t;case 5:return qa(t),e===null&&ji(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,pi(r,s)?a=null:i!==null&&pi(r,i)&&(t.flags|=32),Mc(e,t),Bt(e,t,a,n),t.child;case 6:return e===null&&ji(t),null;case 13:return Ic(e,t,n);case 4:return _i(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Rr(t,null,r,n):Bt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),Nc(e,t,r,s,n);case 7:return Bt(e,t,t.pendingProps,n),t.child;case 8:return Bt(e,t,t.pendingProps.children,n),t.child;case 12:return Bt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,ut(ns,r._currentValue),r._currentValue=a,i!==null)if(mn(i.value,a)){if(i.children===s.children&&!Wt.current){t=Ln(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var m=i.dependencies;if(m!==null){a=i.child;for(var b=m.firstContext;b!==null;){if(b.context===r){if(i.tag===1){b=Rn(-1,n&-n),b.tag=2;var R=i.updateQueue;if(R!==null){R=R.shared;var Z=R.pending;Z===null?b.next=b:(b.next=Z.next,Z.next=b),R.pending=b}}i.lanes|=n,b=i.alternate,b!==null&&(b.lanes|=n),Ei(i.return,n,t),m.lanes|=n;break}b=b.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(o(341));a.lanes|=n,m=a.alternate,m!==null&&(m.lanes|=n),Ei(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Bt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Dr(t,n),s=an(s),r=r(s),t.flags|=1,Bt(e,t,r,n),t.child;case 14:return r=t.type,s=gn(r,t.pendingProps),s=gn(r.type,s),Sc(e,t,r,s,n);case 15:return Cc(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gn(r,s),ps(e,t),t.tag=1,Xt(r)?(e=!0,Kl(t)):e=!1,Dr(t,n),vc(t,r,s),Qi(t,r,s,n),Gi(null,t,r,!0,e,n);case 19:return Lc(e,t,n);case 22:return Ec(e,t,n)}throw Error(o(156,t.tag))};function su(e,t){return $n(e,t)}function Rf(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(e,t,n,r){return new Rf(e,t,n,r)}function mo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lf(e){if(typeof e=="function")return mo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ce)return 11;if(e===fe)return 14}return 2}function tr(e,t){var n=e.alternate;return n===null?(n=dn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ns(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")mo(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case re:return gr(n.children,s,i,t);case de:a=8,s|=8;break;case O:return e=dn(12,n,t,s|2),e.elementType=O,e.lanes=i,e;case ie:return e=dn(13,n,t,s),e.elementType=ie,e.lanes=i,e;case F:return e=dn(19,n,t,s),e.elementType=F,e.lanes=i,e;case W:return Ss(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case se:a=10;break e;case ee:a=9;break e;case ce:a=11;break e;case fe:a=14;break e;case X:a=16,r=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return t=dn(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function gr(e,t,n,r){return e=dn(7,e,r,t),e.lanes=n,e}function Ss(e,t,n,r){return e=dn(22,e,r,t),e.elementType=W,e.lanes=n,e.stateNode={isHidden:!1},e}function xo(e,t,n){return e=dn(6,e,null,t),e.lanes=n,e}function go(e,t,n){return t=dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Df(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hs(0),this.expirationTimes=Hs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hs(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vo(e,t,n,r,s,i,a,m,b){return e=new Df(e,t,n,m,b),t===1?(t=1,i===!0&&(t|=8)):t=0,i=dn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pi(i),e}function $f(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function iu(e){if(!e)return Wn;e=e._reactInternals;e:{if(hn(e)!==e||e.tag!==1)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(o(171))}if(e.tag===1){var n=e.type;if(Xt(n))return Ra(e,n,t)}return t}function ou(e,t,n,r,s,i,a,m,b){return e=vo(n,r,!0,e,s,i,a,m,b),e.context=iu(null),n=e.current,r=Ut(),s=Zn(n),i=Rn(r,s),i.callback=t??null,qn(n,i,s),e.current.lanes=s,Xr(e,s,r),Kt(e,r),e}function Cs(e,t,n,r){var s=t.current,i=Ut(),a=Zn(s);return n=iu(n),t.context===null?t.context=n:t.pendingContext=n,t=Rn(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=qn(s,t,a),e!==null&&(bn(e,s,a,i),ls(e,s,a)),a}function Es(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function au(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yo(e,t){au(e,t),(e=e.alternate)&&au(e,t)}function Af(){return null}var cu=typeof reportError=="function"?reportError:function(e){console.error(e)};function bo(e){this._internalRoot=e}Ms.prototype.render=bo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));Cs(e,t,null,null)},Ms.prototype.unmount=bo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pr(function(){Cs(null,e,null,null)}),t[Mn]=null}};function Ms(e){this._internalRoot=e}Ms.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wo();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bn.length&&t!==0&&t<Bn[n].priority;n++);Bn.splice(n,0,e),n===0&&qo(e)}};function wo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ps(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uu(){}function Ff(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var R=Es(a);i.call(R)}}var a=ou(t,r,e,0,null,!1,!1,"",uu);return e._reactRootContainer=a,e[Mn]=a.current,ol(e.nodeType===8?e.parentNode:e),pr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var m=r;r=function(){var R=Es(b);m.call(R)}}var b=vo(e,0,!1,null,null,!1,!1,"",uu);return e._reactRootContainer=b,e[Mn]=b.current,ol(e.nodeType===8?e.parentNode:e),pr(function(){Cs(t,b,n,r)}),b}function _s(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var m=s;s=function(){var b=Es(a);m.call(b)}}Cs(t,a,e,s)}else a=Ff(n,t,e,s,r);return Es(a)}Qo=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Wr(t.pendingLanes);n!==0&&(Qs(t,n|1),Kt(t,jt()),(tt&6)===0&&(Br=jt()+500,Xn()))}break;case 13:pr(function(){var r=In(e,1);if(r!==null){var s=Ut();bn(r,e,1,s)}}),yo(e,1)}},Vs=function(e){if(e.tag===13){var t=In(e,134217728);if(t!==null){var n=Ut();bn(t,e,134217728,n)}yo(e,134217728)}},Vo=function(e){if(e.tag===13){var t=Zn(e),n=In(e,t);if(n!==null){var r=Ut();bn(n,e,t,r)}yo(e,t)}},Wo=function(){return ot},Xo=function(e,t){var n=ot;try{return ot=e,t()}finally{ot=n}},wt=function(e,t,n){switch(t){case"input":if(ue(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Gl(r);if(!s)throw Error(o(90));Nt(r),ue(r,s)}}}break;case"textarea":g(e,n);break;case"select":t=n.value,t!=null&&Fe(e,!!n.multiple,t,!1)}},He=fo,Qe=pr;var Of={usingClientEntryPoint:!1,Events:[ul,Er,Gl,Ht,ge,fo]},zl={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bf={bundleType:zl.bundleType,version:zl.version,rendererPackageName:zl.rendererPackageName,rendererConfig:zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=We(e),e===null?null:e.stateNode},findFiberByHostInstance:zl.findFiberByHostInstance||Af,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ts=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ts.isDisabled&&Ts.supportsFiber)try{Ml=Ts.inject(Bf),jn=Ts}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Of,Yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wo(t))throw Error(o(200));return $f(e,t,null,n)},Yt.createRoot=function(e,t){if(!wo(e))throw Error(o(299));var n=!1,r="",s=cu;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=vo(e,1,!1,null,null,n,!1,r,s),e[Mn]=t.current,ol(e.nodeType===8?e.parentNode:e),new bo(t)},Yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=We(t),e=e===null?null:e.stateNode,e},Yt.flushSync=function(e){return pr(e)},Yt.hydrate=function(e,t,n){if(!Ps(t))throw Error(o(200));return _s(null,e,t,!0,n)},Yt.hydrateRoot=function(e,t,n){if(!wo(e))throw Error(o(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=cu;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ou(t,null,e,1,n??null,s,!1,i,a),e[Mn]=t.current,ol(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ms(t)},Yt.render=function(e,t,n){if(!Ps(t))throw Error(o(200));return _s(null,e,t,!1,n)},Yt.unmountComponentAtNode=function(e){if(!Ps(e))throw Error(o(40));return e._reactRootContainer?(pr(function(){_s(null,null,e,!1,function(){e._reactRootContainer=null,e[Mn]=null})}),!0):!1},Yt.unstable_batchedUpdates=fo,Yt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ps(n))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return _s(e,t,n,!1,r)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var vu;function Kf(){if(vu)return zo.exports;vu=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(c){console.error(c)}}return d(),zo.exports=qf(),zo.exports}var yu;function Yf(){if(yu)return Is;yu=1;var d=Kf();return Is.createRoot=d.createRoot,Is.hydrateRoot=d.hydrateRoot,Is}var Jf=Yf();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=d=>d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Hu=(...d)=>d.filter((c,o,f)=>!!c&&c.trim()!==""&&f.indexOf(c)===o).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=C.forwardRef(({color:d="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:f,className:u="",children:h,iconNode:x,...v},y)=>C.createElement("svg",{ref:y,...e0,width:c,height:c,stroke:d,strokeWidth:f?Number(o)*24/Number(c):o,className:Hu("lucide",u),...v},[...x.map(([N,S])=>C.createElement(N,S)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(d,c)=>{const o=C.forwardRef(({className:f,...u},h)=>C.createElement(t0,{ref:h,iconNode:c,className:Hu(`lucide-${Zf(d)}`,f),...u}));return o.displayName=`${d}`,o};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=ke("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=ke("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=ke("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=ke("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=ke("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=ke("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=ke("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=ke("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ke("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=ke("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=ke("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=ke("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=ke("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=ke("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=ke("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=ke("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=ke("CornerUpLeft",[["polyline",{points:"9 14 4 9 9 4",key:"881910"}],["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=ke("CornerUpRight",[["polyline",{points:"15 14 20 9 15 4",key:"1tbx3s"}],["path",{d:"M4 20v-7a4 4 0 0 1 4-4h12",key:"1lu4f8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=ke("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=ke("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=ke("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=ke("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=ke("FastForward",[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=ke("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=ke("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=ke("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=ke("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=ke("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=ke("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=ke("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=ke("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=ke("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=ke("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=ke("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=ke("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=ke("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=ke("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=ke("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ke("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ke("Rewind",[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ke("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=ke("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ke("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ke("Split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=ke("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=ke("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=ke("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ke("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=ke("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ke("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=ke("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=ke("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=ke("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),A0=({title:d,onOpenInfo:c,onOpenEdit:o,onOpenMemorize:f,onOpenSettings:u,onOpenImport:h,onOpenExport:x,onOpenGif:v,onTitleChange:y,isMemorizing:N})=>{const[S,k]=C.useState(!1),[L,V]=C.useState(!1),[G,T]=C.useState(!1),[_,K]=C.useState(d||""),U=C.useRef(null),H=C.useRef(null),w=C.useRef(null);C.useEffect(()=>{K(d||"")},[d]),C.useEffect(()=>{G&&w.current&&(w.current.focus(),w.current.select())},[G]),C.useEffect(()=>{const de=O=>{U.current&&!U.current.contains(O.target)&&k(!1),H.current&&!H.current.contains(O.target)&&V(!1)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[]);const I="flex items-center gap-2 px-3 py-2 text-sm font-medium text-zinc-300 hover:bg-zinc-800 hover:text-white rounded-md cursor-pointer transition-colors",B="flex items-center gap-2 px-3 py-2 text-sm font-medium bg-amber-600 text-white rounded-md cursor-pointer transition-colors shadow-lg shadow-amber-900/30",re=de=>{de&&de(),k(!1)};return l.jsxs("header",{className:"w-full bg-zinc-900 border-b border-zinc-800 px-4 h-11 flex items-center justify-between shrink-0 z-50 relative",children:[l.jsxs("div",{className:"flex items-center gap-2 z-10",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-amber-600 to-amber-800 rounded-lg flex items-center justify-center font-bold text-white shadow-inner",children:""}),l.jsx("span",{className:"text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-amber-200 to-amber-500 hidden xl:block",children:"Cloud Chess Note"})]}),l.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full flex justify-center px-12 md:px-20",children:G?l.jsx("input",{ref:w,value:_,onChange:de=>K(de.target.value),onBlur:()=>{T(!1),y&&y(_)},onKeyDown:de=>{de.key==="Enter"&&(T(!1),y&&y(_)),de.key==="Escape"&&(T(!1),K(d||""))},className:"bg-zinc-800/50 border-b border-amber-500 text-xl md:text-2xl font-bold text-amber-100 text-center focus:outline-none w-full max-w-[300px]",style:{fontFamily:'"KaiTi", "STKaiti", "Microsoft JhengHei", serif'}}):l.jsx("span",{onClick:()=>!N&&T(!0),className:`text-xl md:text-2xl font-bold text-amber-100/90 tracking-widest shadow-black drop-shadow-md truncate max-w-full cursor-pointer hover:text-white transition-colors ${N?"pointer-events-none opacity-50":""}`,style:{fontFamily:'"KaiTi", "STKaiti", "Microsoft JhengHei", serif'},children:d||""})}),l.jsxs("nav",{className:"hidden md:flex items-center gap-1 z-10 bg-zinc-900/80 backdrop-blur-sm rounded-lg",children:[l.jsxs("div",{className:"relative",ref:H,children:[l.jsxs("button",{onClick:()=>V(!L),className:I,disabled:N,children:[l.jsx(g0,{size:16}),"  ",l.jsx(Fo,{size:14,className:`transition-transform ${L?"rotate-180":""}`})]}),L&&l.jsxs("div",{className:"absolute top-full right-0 mt-1 w-44 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl py-1 z-50 flex flex-col",children:[l.jsxs("button",{onClick:()=>{h==null||h(),V(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-800 hover:text-white text-left",children:[l.jsx(Lo,{size:14})," "]}),l.jsxs("button",{onClick:()=>{x==null||x(),V(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-800 hover:text-white text-left",children:[l.jsx(As,{size:14})," "]}),l.jsxs("button",{onClick:()=>{v==null||v(),V(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-zinc-300 hover:bg-zinc-800 hover:text-white text-left",children:[l.jsx(Io,{size:14}),"  GIF"]}),l.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-sm text-zinc-500 cursor-not-allowed text-left",children:[l.jsx(Vr,{size:14})," "]})]})]}),l.jsxs("button",{onClick:c,className:I,disabled:N,children:[l.jsx(Nu,{size:16})," "]}),l.jsxs("button",{onClick:o,className:I,disabled:N,children:[l.jsx(Eu,{size:16})," "]}),l.jsxs("button",{onClick:f,className:N?B:I,title:N?"":"",children:[l.jsx(Ds,{size:16})," ",N?"":""]}),l.jsxs("button",{onClick:u,className:I,children:[l.jsx(Ro,{size:16})," "]})]}),l.jsx("button",{onClick:()=>k(!S),className:"md:hidden p-2 text-zinc-400 hover:text-white active:bg-zinc-800 rounded-lg transition-colors z-10",children:l.jsx(k0,{size:24})}),S&&l.jsxs("div",{ref:U,className:"absolute top-14 right-2 w-48 bg-zinc-900 border border-zinc-700 rounded-xl shadow-2xl py-2 flex flex-col gap-1 z-[60] animate-in fade-in slide-in-from-top-2 md:hidden",children:[l.jsx("div",{className:"px-4 py-1 text-xs font-bold text-zinc-500 uppercase tracking-wider",children:""}),l.jsxs("button",{onClick:()=>re(h),className:"flex items-center gap-3 px-4 py-2 text-zinc-300 hover:bg-zinc-800 hover:text-white transition-colors text-left",disabled:N,children:[l.jsx(Lo,{size:18})," ",l.jsx("span",{children:""})]}),l.jsxs("button",{onClick:()=>re(x),className:"flex items-center gap-3 px-4 py-2 text-zinc-300 hover:bg-zinc-800 hover:text-white transition-colors text-left",disabled:N,children:[l.jsx(As,{size:18})," ",l.jsx("span",{children:""})]}),l.jsxs("button",{onClick:()=>re(v),className:"flex items-center gap-3 px-4 py-2 text-zinc-300 hover:bg-zinc-800 hover:text-white transition-colors text-left",disabled:N,children:[l.jsx(Io,{size:18})," ",l.jsx("span",{children:" GIF"})]}),l.jsx("div",{className:"h-px bg-zinc-800 my-1 mx-2"}),l.jsxs("button",{onClick:()=>re(c),className:"flex items-center gap-3 px-4 py-3 text-zinc-300 hover:bg-zinc-800 hover:text-white transition-colors text-left",disabled:N,children:[l.jsx(Nu,{size:18})," ",l.jsx("span",{children:""})]}),l.jsxs("button",{onClick:()=>re(o),className:"flex items-center gap-3 px-4 py-3 text-zinc-300 hover:bg-zinc-800 hover:text-white transition-colors text-left",disabled:N,children:[l.jsx(Eu,{size:18})," ",l.jsx("span",{children:""})]}),l.jsxs("button",{onClick:()=>re(f),className:`flex items-center gap-3 px-4 py-3 transition-colors text-left ${N?"text-amber-500 bg-amber-900/20":"text-zinc-300 hover:bg-zinc-800 hover:text-white"}`,children:[l.jsx(Ds,{size:18})," ",l.jsx("span",{children:N?"":""})]}),l.jsx("div",{className:"h-px bg-zinc-800 my-1 mx-2"}),l.jsxs("button",{onClick:()=>re(u),className:"flex items-center gap-3 px-4 py-3 text-zinc-300 hover:bg-zinc-800 hover:text-white transition-colors text-left",children:[l.jsx(Ro,{size:18})," ",l.jsx("span",{children:""})]})]})]})},ct={red:{king:"",advisor:"",elephant:"",horse:"",chariot:"",cannon:"",soldier:""},black:{king:"",advisor:"",elephant:"",horse:"",chariot:"",cannon:"",soldier:""}},br=()=>{const d=Array(10).fill(null).map(()=>Array(9).fill(null)),c=(o,f,u)=>{d[o][0]={type:"chariot",color:f,text:u.chariot},d[o][1]={type:"horse",color:f,text:u.horse},d[o][2]={type:"elephant",color:f,text:u.elephant},d[o][3]={type:"advisor",color:f,text:u.advisor},d[o][4]={type:"king",color:f,text:u.king},d[o][5]={type:"advisor",color:f,text:u.advisor},d[o][6]={type:"elephant",color:f,text:u.elephant},d[o][7]={type:"horse",color:f,text:u.horse},d[o][8]={type:"chariot",color:f,text:u.chariot}};c(0,"black",ct.black),d[2][1]={type:"cannon",color:"black",text:ct.black.cannon},d[2][7]={type:"cannon",color:"black",text:ct.black.cannon};for(let o=0;o<9;o+=2)d[3][o]={type:"soldier",color:"black",text:ct.black.soldier};c(9,"red",ct.red),d[7][1]={type:"cannon",color:"red",text:ct.red.cannon},d[7][7]={type:"cannon",color:"red",text:ct.red.cannon};for(let o=0;o<9;o+=2)d[6][o]={type:"soldier",color:"red",text:ct.red.soldier};return d},Qr=(d,c)=>{let o="";for(let f=0;f<10;f++){let u=0;for(let h=0;h<9;h++){const x=d[f][h];x?(u>0&&(o+=u,u=0),o+=F0(x)):u++}u>0&&(o+=u),f<9&&(o+="/")}return o+=` ${c==="red"?"w":"b"}`,o+=" - - 0 1",o},F0=d=>{const o={king:"K",advisor:"A",elephant:"B",horse:"N",chariot:"R",cannon:"C",soldier:"P"}[d.type]||"P";return d.color==="red"?o:o.toLowerCase()},rr=d=>{const c=Array(10).fill(null).map(()=>Array(9).fill(null)),o=d.split(" "),f=o[0],u=o[1]||"w";f.split("/");let h=0,x=0;const v={K:{type:"king",color:"red",text:ct.red.king},A:{type:"advisor",color:"red",text:ct.red.advisor},B:{type:"elephant",color:"red",text:ct.red.elephant},N:{type:"horse",color:"red",text:ct.red.horse},R:{type:"chariot",color:"red",text:ct.red.chariot},C:{type:"cannon",color:"red",text:ct.red.cannon},P:{type:"soldier",color:"red",text:ct.red.soldier},k:{type:"king",color:"black",text:ct.black.king},a:{type:"advisor",color:"black",text:ct.black.advisor},b:{type:"elephant",color:"black",text:ct.black.elephant},n:{type:"horse",color:"black",text:ct.black.horse},r:{type:"chariot",color:"black",text:ct.black.chariot},c:{type:"cannon",color:"black",text:ct.black.cannon},p:{type:"soldier",color:"black",text:ct.black.soldier}};for(let y=0;y<f.length;y++){const N=f[y];if(N==="/")h++,x=0;else if(/\d/.test(N))x+=parseInt(N);else{const S=v[N];S&&h<10&&x<9&&(c[h][x]={type:S.type,color:S.color,text:S.text},x++)}}return{board:c,turn:u==="w"?"red":"black"}},_u=(d,c,o,f)=>d==="king"||d==="advisor"?f<3||f>5?!1:c==="red"?o>=7&&o<=9:o>=0&&o<=2:d==="elephant"?c==="red"?o>=5:o<=4:!0,Hr=d=>["","","","","","","","","",""][d],lr=(d,c)=>{const{from:o,to:f,piece:u}=c,h=u.color==="red",x=h?9-o.c:o.c+1,v=h?9-f.c:f.c+1;let y=u.text,N="",S="";const k=f.r-o.r;if(o.r===f.r)N="",S=h?Hr(v):v.toString();else{N=(h?k<0:k>0)?"":"";const G=Math.abs(k);["horse","elephant","advisor"].includes(u.type)?S=h?Hr(v):v.toString():S=h?Hr(G):G.toString()}const L=h?Hr(x):x.toString();return`${y}${L}${N}${S}`},En=d=>{if(!d||d.length<4)return null;const c=d.charCodeAt(0)-97,o=9-parseInt(d[1]),f=d.charCodeAt(2)-97,u=9-parseInt(d[3]);return{from:{r:o,c},to:{r:u,c:f}}},Ku=async d=>{try{const c=`https://www.chessdb.cn/chessdb.php?action=queryall&board=${encodeURIComponent(d)}&learn=1&showall=1`,o=await fetch(c);if(!o.ok)throw new Error("Network response was not ok");const f=await o.text();return f.startsWith("unknown")||f.startsWith("invalid")?[]:f.split("|").map(h=>{const x=h.split(","),v={};return x.forEach(y=>{const[N,S]=y.split(":");N&&S&&(v[N.trim()]=S.trim())}),{move:v.move,score:parseInt(v.score||"0"),rank:parseInt(v.rank||"0"),winrate:parseFloat(v.winrate||"0"),note:v.note||""}}).filter(h=>h.move)}catch(c){return console.error("Cloud fetch error:",c),[]}},O0=(d,c)=>{const o=d.map(u=>[...u]),f=o[c.from.r][c.from.c];return f&&(o[c.to.r][c.to.c]=f,o[c.from.r][c.from.c]=null),o},Tu=(d,c)=>{let{board:o}=rr(d);const f=[];for(const u of c){const h=En(u);if(!h){f.push(u);continue}const x=o[h.from.r][h.from.c];if(!x){f.push(u);continue}o[h.to.r][h.to.c];const v=lr(o,{...h,piece:x});f.push(v),o=O0(o,h)}return f},Do=(d,c,o,f,u)=>{const h=d[c][o];if(!h)return!1;const x=d[f][u];if(x&&x.color===h.color)return!1;const v=f-c,y=u-o,N=Math.abs(v),S=Math.abs(y);switch(h.type){case"king":if(x&&x.type==="king"&&o===u){let L=0;for(let V=Math.min(c,f)+1;V<Math.max(c,f);V++)d[V][o]&&L++;return L===0}return N+S===1&&u>=3&&u<=5&&(h.color==="red"?f>=7:f<=2);case"advisor":return N===1&&S===1&&u>=3&&u<=5&&(h.color==="red"?f>=7:f<=2);case"elephant":return N===2&&S===2&&!d[c+v/2][o+y/2]&&(h.color==="red"?f>=5:f<=4);case"horse":return N===2&&S===1&&!d[c+v/2][o]||N===1&&S===2&&!d[c][o+y/2];case"chariot":return c!==f&&o!==u?!1:Iu(d,c,o,f,u)===0;case"cannon":if(c!==f&&o!==u)return!1;let k=Iu(d,c,o,f,u);return x?k===1:k===0;case"soldier":return h.color==="red"?f>c?!1:c>=5?v===-1&&y===0:v===-1&&y===0||v===0&&S===1:f<c?!1:c<=4?v===1&&y===0:v===1&&y===0||v===0&&S===1}return!1},Iu=(d,c,o,f,u)=>{let h=0;if(c===f)for(let x=Math.min(o,u)+1;x<Math.max(o,u);x++)d[c][x]&&h++;else for(let x=Math.min(c,f)+1;x<Math.max(c,f);x++)d[x][o]&&h++;return h},B0=(d,c)=>{let o=null;for(let f=0;f<10;f++){for(let u=0;u<9;u++){const h=d[f][u];if(h&&h.type==="king"&&h.color===c){o={r:f,c:u};break}}if(o)break}if(!o)return!1;for(let f=0;f<10;f++)for(let u=0;u<9;u++){const h=d[f][u];if(h&&h.color!==c&&Do(d,f,u,o.r,o.c))return!0}return!1},Yu=({onMoveMade:d,currentBoard:c,currentTurn:o,lastMove:f,isFlipped:u,isMirrored:h,redName:x,blackName:v,mode:y="play",selectedCoord:N,onSquareClick:S,flashCoord:k,hintMove:L,currentNode:V,onNodeSelect:G,settings:T,shouldAnimate:_=!0,engineBestMoves:K,isLocked:U=!1})=>{const H=C.useRef(null),w=C.useRef(null),I=C.useRef(void 0),B=C.useMemo(()=>Math.random().toString(36).substring(2,9),[]),re=`arrowFadeMask-${B}`,de=`flowPattern-${B}`,O=`fadeGradient-${B}`,se=`arrowhead-blue-${B}`,ee=`arrowhead-green-${B}`,[ce,ie]=C.useState({board:br(),turn:"red",moves:[],selectedPiece:null,lastMove:null}),[F,fe]=C.useState(new Set),X=C.useRef(br()),W=C.useRef(null),z=C.useRef(null),D=C.useRef(null),[$,p]=C.useState([]),[M,le]=C.useState([]),[xe,Ce]=C.useState(null),[$e,pe]=C.useState(null);C.useEffect(()=>{if(k){const oe=Date.now();p(g=>[...g,{...k,id:oe}]),setTimeout(()=>{p(g=>g.filter(ve=>ve.id!==oe))},800)}},[k]),C.useEffect(()=>{le([]),pe(null),ie(oe=>({...oe,selectedPiece:null}))},[V==null?void 0:V.fen]),C.useEffect(()=>{if(c){if(f&&(!D.current||f.from.r!==D.current.from.r||f.from.c!==D.current.from.c||f.to.r!==D.current.to.r||f.to.c!==D.current.to.c)){if(_){const ve=X.current,he=c[f.to.r][f.to.c],A=(T==null?void 0:T.animationSpeed)??300;if(he&&A>0){let me=!1;if(he.type==="cannon"){const Ne=ve[f.to.r][f.to.c];Ne&&Ne.color!==he.color&&(me=!0)}W.current={active:!0,startTime:Date.now(),duration:A,from:f.from,to:f.to,piece:he,isCannonCapture:me}}}D.current=f}else f||(W.current=null,D.current=null);const g=o||"black";if(B0(c,g))for(let ve=0;ve<10;ve++)for(let he=0;he<9;he++){const A=c[ve][he];if(A&&A.type==="king"&&A.color===g){z.current={active:!0,startTime:Date.now()+((T==null?void 0:T.animationSpeed)??300),duration:500,r:ve,c:he};break}}else z.current=null;ie(ve=>({...ve,board:c,turn:o||"red",lastMove:f||null})),X.current=c}},[c,o,f,T==null?void 0:T.animationSpeed,_]);const[Ee,Me]=C.useState({width:500,height:600,gridSize:50,offsetX:50,offsetY:50,dpr:1});C.useEffect(()=>{if(!w.current)return;const oe=()=>{if(w.current){const{clientWidth:Ne,clientHeight:qe}=w.current;if(Ne===0||qe===0)return;let Ze=12,et=13,Ge=80;(T==null?void 0:T.boardSize)==="large"?(Ze=9.2,et=11,Ge=999):(T==null?void 0:T.boardSize)==="small"&&(Ze=14,et=15,Ge=35);const st=Ne/Ze,Ke=qe/et;let rt=Math.min(st,Ke);rt>Ge&&(rt=Ge);const it=8*rt,Ct=9*rt,Je=(Ne-it)/2,dt=(qe-Ct)/2,yt=window.devicePixelRatio||1;Me({width:Ne,height:qe,gridSize:rt,offsetX:Je,offsetY:dt,dpr:yt})}},g=new ResizeObserver(()=>{requestAnimationFrame(oe)});g.observe(w.current),oe();const ve=setTimeout(oe,50),he=setTimeout(oe,200),A=setTimeout(oe,500),me=()=>{oe(),setTimeout(oe,100),setTimeout(oe,300)};return window.addEventListener("resize",me),window.addEventListener("orientationchange",me),()=>{g.disconnect(),clearTimeout(ve),clearTimeout(he),clearTimeout(A),window.removeEventListener("resize",me),window.removeEventListener("orientationchange",me)}},[T==null?void 0:T.boardSize]);const Xe=(oe,g)=>{let ve=oe,he=g;return u&&(ve=9-oe,he=8-g),h&&(he=8-he),{r:ve,c:he}},nt=(oe,g)=>{let ve=g,he=oe;return h&&(ve=8-ve),u&&(he=9-he,ve=8-ve),{r:he,c:ve}},Nt=(oe,g)=>{const ve=Xe(oe,g),{gridSize:he,offsetX:A,offsetY:me}=Ee;return{x:A+ve.c*he,y:me+ve.r*he}},pt=(oe,g)=>{const{gridSize:ve,offsetX:he,offsetY:A}=Ee,me=Math.round((oe-he)/ve),Ne=Math.round((g-A)/ve);return Ne<0||Ne>9||me<0||me>8?null:nt(Ne,me)},q=oe=>1-Math.pow(1-oe,3),J=()=>{const oe=H.current;if(!oe)return;const g=oe.getContext("2d");if(!g)return;const{width:ve,height:he,gridSize:A,offsetX:me,offsetY:Ne,dpr:qe}=Ee;if(ve===0||he===0)return;g.setTransform(qe,0,0,qe,0,0);const{board:Ze,selectedPiece:et}=ce,Ge=y==="edit"&&N!==void 0?N:et,st=Date.now();let Ke=W.current,rt=z.current;Ke&&st>Ke.startTime+Ke.duration&&(Ke=null,W.current=null),rt&&st>rt.startTime+rt.duration&&(rt=null,z.current=null),g.clearRect(0,0,ve,he);let it=g.createLinearGradient(0,0,0,he);it.addColorStop(0,"#cbbfa0"),it.addColorStop(.2,"#eaddcf"),it.addColorStop(.5,"#dcc7aa"),it.addColorStop(.8,"#cbbfa0"),it.addColorStop(1,"#bba98b"),g.fillStyle=it,g.fillRect(0,0,ve,he),g.strokeStyle="#3d2b1f",g.lineWidth=1.5;for(let ge=0;ge<10;ge++)g.beginPath(),g.moveTo(me,Ne+ge*A),g.lineTo(me+8*A,Ne+ge*A),g.stroke();for(let ge=0;ge<9;ge++)ge===0||ge===8?(g.beginPath(),g.moveTo(me+ge*A,Ne),g.lineTo(me+ge*A,Ne+9*A),g.stroke()):(g.beginPath(),g.moveTo(me+ge*A,Ne),g.lineTo(me+ge*A,Ne+4*A),g.stroke(),g.beginPath(),g.moveTo(me+ge*A,Ne+5*A),g.lineTo(me+ge*A,Ne+9*A),g.stroke());g.strokeStyle="#2a1a10",g.lineWidth=4,g.strokeRect(me-4,Ne-4,8*A+8,9*A+8),g.lineWidth=1.5,g.strokeStyle="#3d2b1f";const Ct=ge=>{const He=Ne+ge*A,Qe=Ne+(ge+2)*A,Re=me+3*A,Be=me+5*A;g.beginPath(),g.moveTo(Re,He),g.lineTo(Be,Qe),g.stroke(),g.beginPath(),g.moveTo(Be,He),g.lineTo(Re,Qe),g.stroke()};if(Ct(0),Ct(7),(T==null?void 0:T.showCoords)!==!1){g.font=`bold ${A*.4}px sans-serif`,g.fillStyle="#000000",g.textAlign="center",g.textBaseline="middle";const ge=(He,Qe)=>{for(let Re=0;Re<9;Re++){let Be="";const Ae=h?8-Re:Re;let Ve=0;u?Qe?(Ve=Ae+1,Be=Hr(Ve)):(Ve=Ae+1,Be=Ve.toString()):Qe?(Ve=Ae+1,Be=Ve.toString()):(Ve=9-Ae,Be=Hr(Ve)),g.fillText(Be,me+Re*A,He)}};ge(Ne-A*.8,!0),ge(Ne+A*9.8,!1)}g.save(),g.font=`bold ${A*.6}px "KaiTi", "STKaiti", serif`;const Je=Ne+4.5*A;let wt=" ",dt=" ";u&&(wt=" ",dt=" "),h&&([wt,dt]=[dt,wt]),g.fillText(wt,me+2*A,Je),g.fillText(dt,me+6*A,Je),g.restore();const yt=(ge,He)=>{const Qe=Xe(ge,He),Re=me+Qe.c*A,Be=Ne+Qe.r*A,Ae=4,Ve=A*.2;g.lineWidth=2;const at=(mt,Et)=>{g.beginPath(),g.moveTo(Re+mt*Ae,Be+Et*(Ae+Ve)),g.lineTo(Re+mt*Ae,Be+Et*Ae),g.lineTo(Re+mt*(Ae+Ve),Be+Et*Ae),g.stroke()};Qe.c>0&&(at(-1,-1),at(-1,1)),Qe.c<8&&(at(1,-1),at(1,1))};if([[2,1],[2,7],[7,1],[7,7],[3,0],[3,2],[3,4],[3,6],[3,8],[6,0],[6,2],[6,4],[6,6],[6,8]].forEach(ge=>yt(ge[0],ge[1])),F.size>0&&F.forEach(ge=>{const[He,Qe]=ge.split(",").map(Number),Re=Xe(He,Qe),Be=me+Re.c*A,Ae=Ne+Re.r*A,Ve=(Math.sin(st/200)+1)/2,at=A*.48+Ve*2,mt=.6+.2*Ve;g.save(),g.translate(Be,Ae),g.beginPath(),g.arc(0,0,at,0,Math.PI*2),g.strokeStyle=`rgba(249, 115, 22, ${mt})`,g.lineWidth=4,g.stroke(),g.beginPath(),g.arc(0,0,at,0,Math.PI*2),g.fillStyle="rgba(251, 146, 60, 0.2)",g.fill(),g.restore()}),ce.lastMove&&y==="play"){const{from:ge,to:He}=ce.lastMove,Qe=Re=>{const Be=Xe(Re.r,Re.c);g.beginPath(),g.arc(me+Be.c*A,Ne+Be.r*A,A*.45,0,Math.PI*2),g.strokeStyle="rgba(0, 100, 255, 0.5)",g.lineWidth=4,g.stroke()};Qe(ge),Qe(He)}const fn=(ge,He,Qe,Re=1,Be=0,Ae=0)=>{const Ve=Xe(He,Qe),at=me+Ve.c*A+Be,mt=Ne+Ve.r*A+Ae;Ht(ge,at,mt,Re)},Ht=(ge,He,Qe,Re=1)=>{const Be=A*.45;if(g.save(),g.translate(He,Qe),g.scale(Re,Re),g.shadowBlur=6,g.shadowColor="rgba(0,0,0,0.4)",g.shadowOffsetY=4,g.shadowOffsetX=2,g.beginPath(),g.arc(0,0,Be,0,Math.PI*2),ge.color==="red")g.fillStyle="#fdfdfd",g.fill(),g.shadowColor="transparent",g.lineWidth=4,g.strokeStyle="#a61c1c",g.stroke(),g.beginPath(),g.arc(0,0,Be-6,0,Math.PI*2),g.lineWidth=1,g.strokeStyle="#e5e5e5",g.stroke(),g.fillStyle="#a61c1c";else{let Ae=g.createRadialGradient(-10,-10,5,0,0,Be);Ae.addColorStop(0,"#2563eb"),Ae.addColorStop(1,"#1e3a8a"),g.fillStyle=Ae,g.fill(),g.shadowColor="transparent",g.lineWidth=4,g.strokeStyle="#000000",g.stroke(),g.fillStyle="#ffffff"}g.font=`bold ${A*.65}px 'KaiTi', 'Kaiti SC', 'STKaiti', 'Microsoft JhengHei', serif`,g.textAlign="center",g.textBaseline="middle",g.fillText(ge.text,0,A*.01),g.restore()};for(let ge=0;ge<10;ge++)for(let He=0;He<9;He++){const Qe=Ze[ge][He];if(!Qe||Ke&&ge===Ke.to.r&&He===Ke.to.c)continue;let Re=0,Be=0;if(rt&&rt.r===ge&&rt.c===He){const Ae=(st-rt.startTime)/rt.duration;if(Ae>=0&&Ae<=1){const Ve=(1-Ae)*A*.15;Re=(Math.random()-.5)*Ve,Be=(Math.random()-.5)*Ve}}fn(Qe,ge,He,1,Re,Be)}if(Ke){const ge=Math.min(1,(st-Ke.startTime)/Ke.duration),He=q(ge),Qe=Xe(Ke.from.r,Ke.from.c),Re=Xe(Ke.to.r,Ke.to.c),Be=me+Qe.c*A,Ae=Ne+Qe.r*A,Ve=me+Re.c*A,at=Ne+Re.r*A,mt=Be+(Ve-Be)*He,Et=Ae+(at-Ae)*He;let _t=1;Ke.isCannonCapture&&(_t=1+Math.sin(ge*Math.PI)*.5),Ht(Ke.piece,mt,Et,_t)}if(Ge){const ge=Xe(Ge.r,Ge.c);g.save(),g.beginPath(),g.arc(me+ge.c*A,Ne+ge.r*A,A*.48,0,Math.PI*2),g.strokeStyle="rgba(34, 197, 94, 0.9)",g.lineWidth=4,g.stroke(),g.restore()}if(Ge&&y==="play"){for(let ge=0;ge<10;ge++)for(let He=0;He<9;He++)if(Do(Ze,Ge.r,Ge.c,ge,He)){const Qe=Xe(ge,He),Re=Ze[ge][He];g.beginPath(),Re?(g.arc(me+Qe.c*A,Ne+Qe.r*A,A*.48,0,Math.PI*2),g.strokeStyle="rgba(168, 85, 247, 0.9)",g.lineWidth=4,g.stroke()):(g.arc(me+Qe.c*A,Ne+Qe.r*A,A*.12,0,Math.PI*2),g.fillStyle="rgba(22, 163, 74, 0.8)",g.fill())}}if(L){const{from:ge}=L,He=(Math.sin(st/150)+1)/2,Qe=.3+.2*He,Re=.6+.4*He,Be=Xe(ge.r,ge.c),Ae=me+Be.c*A,Ve=Ne+Be.r*A;g.save(),g.beginPath(),g.arc(Ae,Ve,A*.48,0,Math.PI*2),g.fillStyle=`rgba(255, 215, 0, ${Qe})`,g.fill(),g.strokeStyle=`rgba(255, 215, 0, ${Re})`,g.lineWidth=4,g.stroke(),g.restore()}if(K&&K.length>0&&K.forEach(ge=>{const He=Xe(ge.from.r,ge.from.c),Qe=Xe(ge.to.r,ge.to.c),Re=me+He.c*A,Be=Ne+He.r*A,Ae=me+Qe.c*A,Ve=Ne+Qe.r*A,at=ge.color==="red"?"#d946ef":"#22c55e";g.save(),g.beginPath();const mt=Math.atan2(Ve-Be,Ae-Re),Et=Math.sqrt(Math.pow(Ae-Re,2)+Math.pow(Ve-Be,2)),_t=A*.35,kt=Math.max(0,Et-_t),Qt=Re+Math.cos(mt)*kt,rn=Be+Math.sin(mt)*kt;g.moveTo(Re,Be),g.lineTo(Qt,rn),g.strokeStyle=at,g.lineWidth=3,g.stroke();const Vt=A*.25;g.beginPath(),g.moveTo(Qt,rn),g.lineTo(Qt-Vt*Math.cos(mt-Math.PI/6),rn-Vt*Math.sin(mt-Math.PI/6)),g.lineTo(Qt-Vt*Math.cos(mt+Math.PI/6),rn-Vt*Math.sin(mt+Math.PI/6)),g.closePath(),g.fillStyle=at,g.fill(),g.restore()}),(T==null?void 0:T.showPlayerNames)!==!1){const ge=(Ve,at,mt,Et)=>{const _t=Et*1.1;for(let kt=0;kt<Ve.length;kt++)g.fillText(Ve[kt],at,mt+kt*_t)},He=(Ve,at,mt)=>{if(!Ve)return;if(g.save(),g.fillStyle=mt,g.shadowColor="rgba(255, 255, 255, 0.3)",g.shadowBlur=4,g.textBaseline="middle",me>A*1.2){const _t=ve-me/2,kt=A*.55,Qt=Ne+A*2,rn=Ne+A*7,wn=(Ve.length-1)*(kt*1.1)/2,hn=at?Qt-wn:rn-wn;g.font=`bold ${kt}px "KaiTi", "STKaiti", serif`,g.textAlign="center",ge(Ve,_t,hn,kt)}else{const _t=A*.5;g.font=`bold ${_t}px "KaiTi", "STKaiti", serif`,g.textAlign="center";const kt=ve/2,Qt=Ne+9*A,rn=he-Qt;let Vt=0;at?Vt=Ne*.2:Vt=he-rn*.2,g.fillText(Ve,kt,Vt)}g.restore()},Qe=u?x:v,Re=u?v:x,Be=u?"#a61c1c":"#000000",Ae=u?"#000000":"#a61c1c";Qe&&He(Qe,!0,Be),Re&&He(Re,!1,Ae)}I.current=requestAnimationFrame(J)};C.useEffect(()=>(I.current=requestAnimationFrame(J),()=>{I.current&&cancelAnimationFrame(I.current)}),[ce,Ee,u,h,x,v,y,N,T,L,F,K]);const te=oe=>{var it,Ct;if(U||oe.button!==0)return;const g=H.current.getBoundingClientRect(),ve=oe.clientX-g.left,he=oe.clientY-g.top,{gridSize:A,offsetX:me,offsetY:Ne}=Ee,qe=Math.round((ve-me)/A),Ze=Math.round((he-Ne)/A);if(Ze<0||Ze>9||qe<0||qe>8)return;const{r:et,c:Ge}=nt(Ze,qe);if(oe.detail===3){const Je=`${et},${Ge}`;fe(wt=>{const dt=new Set(wt);return dt.has(Je)?dt.delete(Je):dt.add(Je),dt});return}if(y==="edit"){S&&S({r:et,c:Ge},g);return}const{board:st,selectedPiece:Ke,turn:rt}=ce;if(Ke)if(Do(st,Ke.r,Ke.c,et,Ge)){if(d){const Je=st.map(Ht=>[...Ht]),wt=Je[Ke.r][Ke.c],dt=Je[et][Ge],yt=lr(st,{from:Ke,to:{r:et,c:Ge},piece:wt});Je[et][Ge]=wt,Je[Ke.r][Ke.c]=null,d({from:Ke,to:{r:et,c:Ge},piece:wt,captured:dt,notation:yt},Je)!==!1&&ie(Ht=>({...Ht,board:Je,turn:rt==="red"?"black":"red",selectedPiece:null,lastMove:{from:Ke,to:{r:et,c:Ge}}}))}}else st[et][Ge]&&((it=st[et][Ge])==null?void 0:it.color)===rt?ie(Je=>({...Je,selectedPiece:{r:et,c:Ge}})):ie(Je=>({...Je,selectedPiece:null}));else st[et][Ge]&&((Ct=st[et][Ge])==null?void 0:Ct.color)===rt&&ie(Je=>({...Je,selectedPiece:{r:et,c:Ge}}))},ue=oe=>oe.preventDefault(),Pe=oe=>{if(oe.button!==2)return;oe.preventDefault();const g=w.current.getBoundingClientRect(),ve=oe.clientX-g.left,he=oe.clientY-g.top,A=pt(ve,he);A&&Ce({start:A,current:{x:ve,y:he}})},Te=oe=>{if(xe){const g=w.current.getBoundingClientRect(),ve=oe.clientX-g.left,he=oe.clientY-g.top;Ce(A=>A?{...A,current:{x:ve,y:he}}:null)}},Ie=oe=>{if(xe){const g=w.current.getBoundingClientRect(),ve=oe.clientX-g.left,he=oe.clientY-g.top,A=pt(ve,he);A&&(A.r!==xe.start.r||A.c!==xe.start.c)&&le(me=>{const Ne=me.findIndex(qe=>qe.from.r===xe.start.r&&qe.from.c===xe.start.c&&qe.to.r===A.r&&qe.to.c===A.c);return Ne!==-1?me.filter((qe,Ze)=>Ze!==Ne):[...me,{from:xe.start,to:A}]}),Ce(null)}},Fe=()=>{if((T==null?void 0:T.showVariationArrows)===!1||!V||!V.children||V.children.length<=1)return null;const oe=V.children.map((g,ve)=>{if(!g.move)return null;const he=Nt(g.move.from.r,g.move.from.c),A=Nt(g.move.to.r,g.move.to.c),me=V.children.findIndex(Ve=>Ve.id===g.id),Ne=String.fromCharCode(65+me),qe=A.x-he.x,Ze=A.y-he.y,et=Math.atan2(Ze,qe),Ge=et*(180/Math.PI),st=Math.sqrt(qe*qe+Ze*Ze),Ke=20,rt=14,it=5,Ct=4,Je=.5,wt=Math.max(0,st-Ke+Ct+Je),dt=`M 0,${-it/2} L ${wt},${-it/2} L ${wt},${it/2} L 0,${it/2} Z`,yt=st-Ke,fn=st,Ht=yt+Ct-Je,ge=`M ${Ht},${-it/2} L ${yt},${-rt/2} L ${fn},0 L ${yt},${rt/2} L ${Ht},${it/2} Z`,He=`M 0,${-it/2} L ${yt+Ct},${-it/2} L ${yt},${-rt/2} L ${fn},0 L ${yt},${rt/2} L ${yt+Ct},${it/2} L 0,${it/2}`,Qe=Ke*.8,Re=st-Qe,Be=he.x+Math.cos(et)*Re,Ae=he.y+Math.sin(et)*Re;return{id:g.id,child:g,fromPos:he,angleDeg:Ge,shaftPath:dt,headPath:ge,outlinePath:He,badgeX:Be,badgeY:Ae,label:Ne,isHovered:$e===g.id}}).filter(g=>g!==null);return oe.sort((g,ve)=>(g.isHovered?1:0)-(ve.isHovered?1:0)),l.jsx(l.Fragment,{children:oe.map(g=>{const{id:ve,child:he,fromPos:A,angleDeg:me,shaftPath:Ne,headPath:qe,outlinePath:Ze,badgeX:et,badgeY:Ge,label:st,isHovered:Ke}=g,rt=Ke?1:.7;return l.jsxs("g",{className:"transition-all duration-200 variation-arrow-group",style:{opacity:rt},children:[l.jsxs("g",{transform:`translate(${A.x}, ${A.y}) rotate(${me})`,pointerEvents:"none",children:[l.jsxs("g",{mask:`url(#${re})`,children:[l.jsx("path",{d:Ne,fill:`url(#${de})`,stroke:"none"}),l.jsx("path",{d:Ze,fill:"none",stroke:"rgba(59, 130, 246, 1)",strokeWidth:"1.5",strokeLinejoin:"round",strokeLinecap:"round"})]}),l.jsx("path",{d:qe,fill:"rgba(59, 130, 246, 0.9)",stroke:"none"})]}),l.jsxs("g",{onClick:Je=>{Je.stopPropagation(),Je.preventDefault(),!(ce.selectedPiece!==null||y==="edit"&&N!=null)&&G&&G(he)},onMouseEnter:()=>pe(ve),onMouseLeave:()=>pe(null),className:"cursor-pointer",pointerEvents:"all",children:[l.jsx("circle",{cx:et,cy:Ge,r:8,fill:"white",stroke:"#3b82f6",strokeWidth:"2"}),l.jsx("text",{x:et,y:Ge,dy:"0.35em",textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"#3b82f6",style:{pointerEvents:"none"},children:st})]})]},ve)})})},Oe=()=>l.jsxs(l.Fragment,{children:[M.map((oe,g)=>{const ve=Nt(oe.from.r,oe.from.c),he=Nt(oe.to.r,oe.to.c);return l.jsx("line",{x1:ve.x,y1:ve.y,x2:he.x,y2:he.y,stroke:"#22c55e",strokeWidth:"8",strokeOpacity:"0.8",strokeLinecap:"round",markerEnd:`url(#${ee})`},g)}),xe&&l.jsx("line",{x1:Nt(xe.start.r,xe.start.c).x,y1:Nt(xe.start.r,xe.start.c).y,x2:xe.current.x,y2:xe.current.y,stroke:"#22c55e",strokeWidth:"8",strokeOpacity:"0.5",strokeLinecap:"round",markerEnd:`url(#${ee})`})]});return l.jsxs("div",{ref:w,className:"w-full h-full flex justify-center items-center overflow-hidden bg-[#2a2a2e] rounded-lg shadow-2xl border border-zinc-700 select-none relative",onContextMenu:ue,onMouseDown:Pe,onMouseMove:Te,onMouseUp:Ie,onMouseLeave:()=>Ce(null),children:[l.jsx("canvas",{ref:H,width:Ee.width*Ee.dpr,height:Ee.height*Ee.dpr,style:{width:Ee.width,height:Ee.height},onClick:te,className:"cursor-pointer touch-none z-10"}),l.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-20",viewBox:`0 0 ${Ee.width} ${Ee.height}`,children:[l.jsxs("defs",{children:[l.jsx("marker",{id:se,markerWidth:"4",markerHeight:"4",refX:"3.5",refY:"2",orient:"auto",children:l.jsx("polygon",{points:"0 0, 4 2, 0 4",fill:"#3b82f6",fillOpacity:"0.7"})}),l.jsx("marker",{id:ee,markerWidth:"3",markerHeight:"3",refX:"2.5",refY:"1.5",orient:"auto",children:l.jsx("polygon",{points:"0 0, 3 1.5, 0 3",fill:"#22c55e",fillOpacity:"0.8"})}),l.jsxs("linearGradient",{id:O,gradientUnits:"objectBoundingBox",x1:"0",y1:"0",x2:"1",y2:"0",children:[l.jsx("stop",{offset:"0",stopColor:"white",stopOpacity:"0"}),l.jsx("stop",{offset:"0.15",stopColor:"white",stopOpacity:"1"})]}),l.jsx("mask",{id:re,maskUnits:"objectBoundingBox",maskContentUnits:"objectBoundingBox",children:l.jsx("rect",{x:"0",y:"0",width:"1",height:"1",fill:`url(#${O})`})}),l.jsxs("pattern",{id:de,x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:[l.jsx("path",{d:"M 10 0 L 0 10 L 10 20",fill:"none",stroke:"rgba(255,255,255,0.8)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("animateTransform",{attributeName:"patternTransform",type:"translate",from:"0 0",to:"20 0",dur:"1.5s",repeatCount:"indefinite"}),l.jsx("rect",{width:"20",height:"20",fill:"rgba(59, 130, 246, 0.4)"})]})]}),l.jsx(Oe,{}),l.jsx(Fe,{})]}),$.map(oe=>{const{gridSize:g,offsetX:ve,offsetY:he}=Ee;if(Ee.width===0)return null;const A=Xe(oe.r,oe.c);return l.jsx("div",{className:"absolute flex items-center justify-center text-red-600 font-bold z-30 pointer-events-none animate-ping-fade",style:{top:he+A.r*g,left:ve+A.c*g,width:g,height:g,transform:"translate(-50%, -50%)",fontSize:g*.8},children:""},oe.id)}),l.jsx("style",{children:`
                @keyframes ping-fade {
                    0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                    100% { opacity: 0; transform: translate(-50%, -50%) scale(1.5); }
                }
                .animate-ping-fade {
                    animation: ping-fade 0.8s ease-out forwards;
                }
                .variation-arrow-group:hover {
                    z-index: 100;
                }
            `})]})},U0=({onNavigate:d,onNavigateVariation:c,onJumpToStep:o,onFlip:f,onMirror:u,currentIndex:h,totalSteps:x,disabled:v=!1})=>{const[y,N]=C.useState(!1),[S,k]=C.useState(!1),[L,V]=C.useState(!1),[G,T]=C.useState(h),_=C.useRef(null);C.useEffect(()=>{T(h)},[h]),C.useEffect(()=>{let re;return L&&(re=window.setInterval(()=>{h<x-1?d("next"):V(!1)},1500)),()=>clearInterval(re)},[L,h,x,d]),C.useEffect(()=>{const re=de=>{_.current&&!_.current.contains(de.target)&&N(!1)};return document.addEventListener("mousedown",re),()=>document.removeEventListener("mousedown",re)},[]);const K=`relative flex flex-col items-center justify-center p-0.5 md:p-2 rounded-lg bg-zinc-800 border border-zinc-700 shadow-md group transition-all 
      ${v?"opacity-30 cursor-not-allowed text-zinc-500":"hover:bg-zinc-700 active:scale-95 text-zinc-300 hover:text-white"}`,U="text-[9px] md:text-[10px] mt-0.5 md:mt-1 font-medium opacity-70 group-hover:opacity-100 whitespace-nowrap",H=18,w=re=>{v||re()},I=Math.max(1,x-1),B=G/I*100;return l.jsxs("div",{className:"w-full relative z-30",children:[y&&!v&&l.jsxs("div",{ref:_,className:"absolute bottom-full left-0 mb-3 bg-zinc-900 border border-zinc-700 rounded-lg shadow-2xl p-2 w-48 flex flex-col gap-1 z-50 animate-in fade-in slide-in-from-bottom-2",children:[l.jsxs("button",{onClick:()=>{d("start"),N(!1)},className:"flex items-center gap-2 px-3 py-2 hover:bg-zinc-800 rounded text-sm text-zinc-300",children:[l.jsx(E0,{size:16}),"  (0)"]}),l.jsxs("button",{onClick:()=>{d("end"),N(!1)},className:"flex items-center gap-2 px-3 py-2 hover:bg-zinc-800 rounded text-sm text-zinc-300",children:[l.jsx(x0,{size:16})," "]}),l.jsx("div",{className:"h-px bg-zinc-800 my-1"}),l.jsxs("button",{onClick:()=>{c("prev"),N(!1)},className:"flex items-center gap-2 px-3 py-2 hover:bg-zinc-800 rounded text-sm text-zinc-300",children:[l.jsx(d0,{size:16})," "]}),l.jsxs("button",{onClick:()=>{c("next"),N(!1)},className:"flex items-center gap-2 px-3 py-2 hover:bg-zinc-800 rounded text-sm text-zinc-300",children:[l.jsx(f0,{size:16})," "]})]}),l.jsxs("div",{className:"relative bg-zinc-900 border-t md:border-t-0 md:border md:rounded-xl border-zinc-700 shadow-lg overflow-hidden",children:[l.jsxs("div",{className:`grid grid-cols-7 gap-0.5 md:gap-2 px-1 py-1 md:py-3 transition-opacity duration-300 ${S?"opacity-0 pointer-events-none":"opacity-100"}`,children:[l.jsxs("button",{className:`${K} ${y?"bg-zinc-700 text-white border-zinc-500":""}`,onClick:re=>{re.stopPropagation(),v||N(!y)},title:"",disabled:v,children:[l.jsx(P0,{size:H}),l.jsx("span",{className:U,children:""})]}),l.jsxs("button",{className:K,onClick:()=>w(()=>d("prev")),disabled:v||h<=0,title:"",children:[l.jsx(l0,{size:H}),l.jsx("span",{className:U,children:""})]}),l.jsxs("button",{className:`${K} ${L?"bg-indigo-900/50 border-indigo-700 text-indigo-200":""}`,onClick:()=>w(()=>V(!L)),title:L?"":"",disabled:v,children:[L?l.jsx(S0,{size:H,fill:"currentColor"}):l.jsx(Fs,{size:H,fill:"currentColor"}),l.jsx("span",{className:U,children:L?"":""})]}),l.jsxs("button",{className:K,onClick:()=>w(()=>d("next")),disabled:v||h>=x-1,title:"",children:[l.jsx(s0,{size:H}),l.jsx("span",{className:U,children:""})]}),l.jsxs("button",{className:K,onClick:re=>{re.stopPropagation(),v||k(!0)},title:"",disabled:v,children:[l.jsx(h0,{size:H}),l.jsx("span",{className:U,children:""})]}),l.jsxs("button",{className:K,onClick:f,title:"",children:[l.jsx(Qu,{size:H}),l.jsx("span",{className:U,children:""})]}),l.jsxs("button",{className:K,onClick:u,title:" ()",children:[l.jsx(n0,{size:H}),l.jsx("span",{className:U,children:""})]})]}),S&&!v&&l.jsxs("div",{className:"absolute inset-0 z-10 bg-zinc-900/95 backdrop-blur-md flex items-center px-4 gap-4 animate-in fade-in slide-in-from-bottom-2",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[3rem]",children:[l.jsx("span",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-wider",children:"Turn"}),l.jsx("span",{className:"text-xl font-black text-blue-400 font-mono leading-none drop-shadow-lg",children:G})]}),l.jsxs("div",{className:"flex-1 relative h-8 flex items-center group",children:[l.jsx("input",{type:"range",min:"0",max:I,value:G,onChange:re=>{const de=parseInt(re.target.value);T(de),o(de)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20"}),l.jsx("div",{className:"w-full h-1.5 bg-zinc-800 rounded-full overflow-hidden relative",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 via-cyan-500 to-blue-400 shadow-[0_0_10px_rgba(59,130,246,0.5)]",style:{width:`${B}%`}})}),l.jsx("div",{className:"absolute h-4 w-4 bg-white rounded-full shadow-[0_0_15px_rgba(255,255,255,0.8)] border-2 border-blue-500 pointer-events-none transition-transform duration-75 ease-out z-10",style:{left:`calc(${B}% - 8px)`},children:l.jsx("div",{className:"absolute inset-0 bg-blue-400 rounded-full opacity-20 animate-ping"})})]}),l.jsxs("div",{className:"text-[10px] text-zinc-500 font-mono font-bold min-w-[2rem] text-right",children:["/",I]}),l.jsx("button",{onClick:()=>k(!1),className:"p-2 -mr-2 text-zinc-500 hover:text-white hover:bg-zinc-800 rounded-full transition-colors",children:l.jsx(nn,{size:20})})]})]})]})},Ru=({movePath:d,currentNode:c,rootNode:o,onJumpToMove:f,onUpdateComment:u,onRequestDelete:h,onRequestDeleteNode:x,onReorder:v,onLinkFen:y,clipboardTags:N,onEditTags:S})=>{const k=C.useRef(null),L=C.useRef(null),V=C.useRef(null),[G,T]=Os.useState({moves:50,variations:25,comments:25}),_=C.useRef(null),K=O=>{_.current=O,document.body.style.cursor="row-resize",document.body.style.userSelect="none"};C.useEffect(()=>{const O=ee=>{if(!_.current||!V.current)return;const ce=V.current.getBoundingClientRect(),ie=(ee.clientY-ce.top)/ce.height*100,F=B.length>0;T(fe=>{const X={...fe};if(_.current==="resizer1")if(ie-fe.moves,F){const W=Math.max(10,Math.min(80,ie)),z=100-W,D=fe.variations+fe.comments,$=z/D;X.moves=W,X.variations=fe.variations*$,X.comments=fe.comments*$}else{const W=Math.max(10,Math.min(90,ie));X.moves=W,X.comments=100-W}else if(_.current==="resizer2"){const W=fe.moves,z=Math.max(W+5,Math.min(95,ie));X.variations=z-W,X.comments=100-z}return X})},se=()=>{_.current=null,document.body.style.cursor="",document.body.style.userSelect=""};return window.addEventListener("mousemove",O),window.addEventListener("mouseup",se),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",se)}},[G]);const U=c?c.id:null;C.useEffect(()=>{if(L.current)if(U&&U!=="root"&&k.current)try{k.current.scrollIntoView({behavior:"smooth",block:"nearest"})}catch{}else L.current.scrollTop=0},[U]);const H=d||[],w=H.filter(O=>O&&O.parentId!==null),I=c&&o&&c.id===o.id;let B=[];if(c&&!c.parentId)B=c.children||[];else if(c){const O=H.find(se=>se.id===c.parentId);O&&(B=O.children||[])}const re=O=>{var ee;O.preventDefault(),O.stopPropagation();let se=`

`;se+=`${((ee=c.move)==null?void 0:ee.notation)||""} 
`,B.length>1?se+=`
`:se+=`
`,h(se)},de=(O,se)=>{var ce;O.preventDefault(),O.stopPropagation();let ee=` [${(ce=se.move)==null?void 0:ce.notation}] 

`;x(se.id,ee)};return c?l.jsxs("div",{className:"flex flex-col h-full w-full bg-zinc-900 shadow-xl text-sm overflow-hidden",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-zinc-800 bg-zinc-900/50 backdrop-blur-sm shrink-0 flex justify-between items-center",children:[l.jsxs("h3",{className:"font-bold text-zinc-200 flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-6 bg-amber-600 rounded-sm"})," & "]}),w.length>0&&!I&&l.jsx("button",{onClick:re,className:"text-zinc-500 hover:text-red-400 p-1.5 rounded hover:bg-zinc-800 transition-colors",title:"",children:l.jsx(Cl,{size:16})})]}),l.jsxs("div",{ref:V,className:"flex-1 flex flex-col min-h-0 relative",children:[l.jsx("div",{ref:L,className:"overflow-y-auto custom-scrollbar bg-zinc-950/30 relative",style:{flex:`${G.moves} 0 0%`},children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-zinc-900 text-zinc-500 font-medium sticky top-0 z-10 shadow-sm",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 w-12 text-center border-b border-zinc-800",children:"#"}),l.jsx("th",{className:"px-2 py-2 border-b border-zinc-800 w-1/2",children:""}),l.jsx("th",{className:"px-2 py-2 border-b border-zinc-800 w-1/2",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-zinc-800/50",children:[l.jsxs("tr",{onClick:()=>f(o),className:`cursor-pointer group transition-colors ${I?"bg-blue-900/30":"hover:bg-zinc-800/30"}`,children:[l.jsx("td",{className:"px-2 py-2 text-center text-zinc-600 font-mono text-xs",children:"0"}),l.jsx("td",{colSpan:2,className:"px-2 py-2",children:l.jsxs("div",{className:`flex items-center justify-center font-bold text-xs border border-dashed rounded py-1 ${I?"border-blue-500 text-blue-300 bg-blue-500/10":"border-zinc-700 text-zinc-500 group-hover:border-zinc-500 group-hover:text-zinc-300"}`,children:["==  ==",o.comment&&l.jsx(ku,{size:12,className:"ml-2 text-amber-500"})]})})]}),w.length===0&&I?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-4 py-8 text-center text-zinc-600 italic text-xs",children:"..."})}):Array.from({length:Math.ceil(w.length/2)}).map((O,se)=>{const ee=se*2,ce=w[ee],ie=w[ee+1],F=(ce==null?void 0:ce.id)===c.id,fe=(ie==null?void 0:ie.id)===c.id,X=(W,z)=>{if(!W||!W.move)return null;let D=null;const $=H.find(p=>p.id===W.parentId);if($&&$.children&&$.children.length>1){const p=$.children.findIndex(M=>M.id===W.id);p!==-1&&(D=`${$.children.length}${String.fromCharCode(65+p)}`)}return l.jsxs("div",{className:`cursor-pointer px-2 py-1.5 rounded flex items-center justify-between group ${z?"bg-blue-600 text-white shadow-md":"hover:bg-zinc-800/50"}`,onClick:()=>f(W),children:[l.jsx("span",{className:"font-medium truncate",children:W.move.notation}),l.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[W.comment&&l.jsx(ku,{size:12,className:z?"text-blue-200":"text-amber-500"}),D&&l.jsx("span",{className:`text-[10px] px-1 rounded font-mono font-bold leading-none py-0.5 ${z?"bg-blue-500 text-white":"bg-zinc-700 text-zinc-400 group-hover:bg-zinc-600"}`,children:D})]})]})};return l.jsxs("tr",{ref:F||fe?k:null,className:"text-zinc-300",children:[l.jsx("td",{className:"px-2 py-1.5 text-center text-zinc-600 font-mono text-xs bg-zinc-900/20",children:se+1}),l.jsx("td",{className:`px-1 py-1 w-[45%] ${F?"bg-blue-900/20":""}`,children:X(ce,F)}),l.jsx("td",{className:`px-1 py-1 w-[45%] ${fe?"bg-blue-900/20":""}`,children:X(ie,fe)})]},se)})]})]})}),l.jsx("div",{className:"h-1.5 bg-zinc-800 hover:bg-amber-600 cursor-row-resize transition-colors shrink-0 z-20",onMouseDown:()=>K("resizer1")}),B.length>0?l.jsxs("div",{className:"bg-zinc-900 p-3 border-b border-zinc-800/50 overflow-hidden flex flex-col",style:{flex:`${G.variations} 0 0%`},children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_0,{size:14,className:"text-zinc-500"}),l.jsxs("h4",{className:"text-xs font-bold text-zinc-400",children:[" (",B.length,")"]})]}),l.jsxs("button",{onClick:y,className:"flex items-center gap-1.5 px-2 py-1 bg-zinc-800 hover:bg-blue-900/30 text-zinc-400 hover:text-blue-400 rounded text-[10px] border border-zinc-700 hover:border-blue-700/50 transition-colors",title:"",children:[l.jsx(b0,{size:12}),""]})]}),l.jsx("div",{className:"bg-zinc-950 border border-zinc-800 rounded p-1 flex flex-col gap-1 overflow-y-auto custom-scrollbar flex-1",children:B.map((O,se)=>{var ce;const ee=O.id===c.id;return l.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded text-sm border transition-colors group
                                            ${ee?"bg-blue-900/20 border-blue-800/50":"bg-zinc-900/50 border-zinc-800/50 hover:bg-zinc-800 hover:border-zinc-700"}
                                        `,children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1 cursor-pointer min-w-0",onClick:()=>f(O),children:[l.jsx("span",{className:`font-mono text-xs font-bold px-1.5 py-0.5 rounded shrink-0 ${ee?"bg-blue-600 text-white":"bg-zinc-800 text-zinc-500"}`,children:String.fromCharCode(65+se)}),l.jsx("span",{className:`truncate font-medium ${ee?"text-blue-200":"text-zinc-400 hover:text-zinc-200"}`,children:((ce=O.move)==null?void 0:ce.notation)||""})]}),l.jsxs("div",{className:"flex items-center gap-1 pl-2 border-l border-zinc-800/50 shrink-0",children:[l.jsx("button",{onClick:ie=>{ie.stopPropagation(),v(O.id,"up")},className:"p-1 hover:bg-zinc-700 rounded text-zinc-600 hover:text-zinc-300 disabled:opacity-20 disabled:cursor-not-allowed transition-colors",disabled:se===0,title:"",children:l.jsx(i0,{size:14})}),l.jsx("button",{onClick:ie=>{ie.stopPropagation(),v(O.id,"down")},className:"p-1 hover:bg-zinc-700 rounded text-zinc-600 hover:text-zinc-300 disabled:opacity-20 disabled:cursor-not-allowed transition-colors",disabled:se===B.length-1,title:"",children:l.jsx(Fo,{size:14})}),l.jsx("button",{onClick:ie=>de(ie,O),className:"p-1 hover:bg-red-900/50 rounded text-zinc-600 hover:text-red-400 transition-colors ml-1",title:"",children:l.jsx(Cl,{size:14})})]})]},O.id)})})]}):null,B.length>0&&l.jsx("div",{className:"h-1.5 bg-zinc-800 hover:bg-amber-600 cursor-row-resize transition-colors shrink-0 z-20",onMouseDown:()=>K("resizer2")}),l.jsxs("div",{className:"p-3 bg-zinc-900 flex flex-col overflow-hidden",style:{flex:`${B.length>0?G.comments:100-G.moves} 0 0%`},children:[l.jsxs("div",{className:"relative group flex-1 flex flex-col min-h-0",children:[l.jsx(j0,{size:14,className:"absolute top-3 left-3 text-zinc-500 group-focus-within:text-amber-500 transition-colors z-10"}),l.jsx("textarea",{className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg py-2 pl-9 pr-3 text-sm text-zinc-300 placeholder-zinc-600 focus:outline-none focus:ring-1 focus:ring-amber-500 resize-none flex-1 transition-all custom-scrollbar",placeholder:I?"...":"...",value:c.comment||"",onChange:O=>u(c.id,O.target.value)})]}),l.jsxs("div",{className:"flex gap-2 mt-2 overflow-x-auto pb-1 no-scrollbar shrink-0 items-center",children:[N.map(O=>l.jsx("button",{onClick:()=>u(c.id,((c.comment||"")+" "+O).trim()),className:"text-xs px-2 py-1 bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-400 whitespace-nowrap transition-colors",children:O},O)),l.jsx("button",{onClick:S,className:"p-1 bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-zinc-500 hover:text-zinc-300 transition-colors",title:"",children:l.jsx(Ro,{size:14})})]})]})]})]}):l.jsx("div",{className:"p-4 text-zinc-500",children:"..."})};function H0(){return window.location.pathname.includes("/Cloud-Chess-Note/")?"/Cloud-Chess-Note/engine/":"/engine/"}class vr{constructor(){this.stockfish=null,this.isReady=!1,this.isAnalyzing=!1,this.onInfoCallback=null,this.messageListeners=new Set,this.engineBasePath=H0()}static getInstance(){return vr.instance||(vr.instance=new vr),vr.instance}async init(){if(!this.isReady)return new Promise((c,o)=>{window.Module={locateFile:(u,h)=>(console.log("locateFile called:",u,"prefix:",h),this.engineBasePath+u),onReceiveStdout:u=>{console.log("Engine:",u),this.parseEngineOutput(u)},onReceiveStderr:u=>{console.warn("Engine Err:",u)},onExit:u=>{console.log("Engine exited with code",u)}};const f=document.createElement("script");f.src=this.engineBasePath+"pikafish.js",f.async=!0,f.onload=async()=>{try{typeof Pikafish=="function"?(this.stockfish=await Pikafish({locateFile:u=>(console.log("Pikafish locateFile:",u),this.engineBasePath+u),onReceiveStdout:u=>{console.log("Engine:",u),this.parseEngineOutput(u),this.messageListeners.forEach(h=>h(u))},onReceiveStderr:u=>{console.warn("Engine Err:",u)}}),console.log("Pikafish module loaded"),this.sendCommand("uci"),this.isReady=!0,c()):o(new Error("Pikafish function not found"))}catch(u){console.error("Engine Init Failed",u),o(u)}},f.onerror=u=>o(new Error("Failed to load engine script: "+u)),document.body.appendChild(f)})}sendCommand(c){this.stockfish&&(this.stockfish.sendCommand?this.stockfish.sendCommand(c):this.stockfish.postMessage?this.stockfish.postMessage(c):console.warn("Engine postMessage/sendCommand not available"))}parseEngineOutput(c){if(c==="uciok"&&(console.log("UCI ok"),this.sendCommand("setoption name Threads value 4"),this.sendCommand("setoption name Hash value 64"),this.sendCommand("setoption name EvalFile value pikafish.nnue")),c.startsWith("info")&&c.includes("depth")&&c.includes("score")){const o=this.parseInfo(c);this.onInfoCallback&&this.onInfoCallback(o)}c.startsWith("bestmove")}parseInfo(c){const o=c.split(" "),f=S=>{const k=o.indexOf(S);return k!==-1&&k+1<o.length?o[k+1]:null};let u=0,h=null;const x=f("score"),v=parseInt(o[o.indexOf("score")+2]||"0");x==="mate"?(h=v,u=v>0?9999:-9999):u=v;const y=o.indexOf("pv"),N=y!==-1?o.slice(y+1):[];return{depth:parseInt(f("depth")||"0"),score:u,mate:h,nodes:parseInt(f("nodes")||"0"),nps:parseInt(f("nps")||"0"),time:parseInt(f("time")||"0"),pv:N,bestMove:N[0]}}startAnalysis(c,o){this.isReady&&(this.stopAnalysis(),this.onInfoCallback=o,this.isAnalyzing=!0,this.sendCommand(`position fen ${c}`),this.sendCommand("go infinite"))}analyzeFixedDepth(c,o){return this.isReady?(this.stopAnalysis(),new Promise(f=>{let u=null;const h=x=>{var v;if(x.startsWith("info")&&x.includes("depth")&&x.includes("score")&&(u=this.parseInfo(x)),x.startsWith("bestmove")){this.messageListeners.delete(h);const N=(v=x.split(/\s+/)[1])==null?void 0:v.trim();f(u||{depth:0,score:0,mate:null,nodes:0,nps:0,time:0,pv:N?[N]:[],bestMove:N})}};this.messageListeners.add(h),this.sendCommand(`position fen ${c}`),this.sendCommand(`go depth ${o}`)})):Promise.reject("Engine not ready")}stopAnalysis(){this.isAnalyzing&&(this.sendCommand("stop"),this.isAnalyzing=!1,this.onInfoCallback=null)}}const Lu=({currentFen:d,currentBoard:c,onMoveClick:o,onOpenAnalysis:f,isEnabled:u,onToggleEnabled:h,onEngineStatsUpdate:x,isCompact:v=!1,forcedMode:y,onNavigate:N,onMenu:S})=>{var ie,F,fe;const[k,L]=C.useState("cloud");C.useEffect(()=>{y&&L(y)},[y]);const[V,G]=C.useState(!1),[T,_]=C.useState([]),[K,U]=C.useState(!1),[H,w]=C.useState(!1),[I,B]=C.useState(null),re=C.useRef(null);C.useEffect(()=>{k==="local"&&!re.current&&(async()=>{const W=vr.getInstance();await W.init(),re.current=W,U(!0)})()},[k]),C.useEffect(()=>(k==="local"&&H&&re.current&&K&&re.current.startAnalysis(d,X=>{B(X),x==null||x(X)}),()=>{k==="local"&&H&&re.current}),[d,k,H,K]);const de=()=>{var X;H?((X=re.current)==null||X.stopAnalysis(),w(!1)):w(!0)},O=X=>{try{const W=En(X);if(!W)return X;const{from:z,to:D}=W;if(z.r<0||z.r>9||z.c<0||z.c>8)return X;const $=c[z.r][z.c];if(!$)return X;const p=c[D.r][D.c];return lr(c,{from:z,to:D,piece:$,captured:p})}catch{return X}},se=async X=>{if(!(!u||k!=="cloud")){G(!0);try{const W=await Ku(X);_(W)}catch(W){console.error(W)}finally{G(!1)}}};C.useEffect(()=>{u&&k==="cloud"&&se(d)},[d,u,k]);const ee=d.split(" ")[1]==="w",ce=X=>{if(typeof X!="number")return{text:X,color:"text-zinc-600"};let W=!1;ee?W=X>0:W=X<0;const z=Math.abs(X);return{text:`${W?"":""}${z}`,color:W?"text-red-400 font-bold":"text-green-400 font-bold"}};return v?l.jsxs("div",{className:"flex flex-col h-full bg-zinc-900 border-t border-zinc-800 w-full overflow-hidden text-sm",children:[(k==="local"||k==="cloud"&&T.length>0)&&l.jsxs("div",{className:"grid grid-cols-5 gap-1 p-2 bg-zinc-950 border-b border-zinc-800 text-xs text-center items-center shrink-0",children:[l.jsxs("div",{className:"flex flex-col border-r border-zinc-800",children:[l.jsx("span",{className:"text-zinc-500 scale-75 origin-center",children:"SCORE"}),l.jsx("span",{className:`font-mono font-bold ${ce(k==="local"?(I==null?void 0:I.score)||"-":((ie=T[0])==null?void 0:ie.score)||"-").color}`,children:ce(k==="local"?I!=null&&I.mate?`M${Math.abs(I.mate)}`:(I==null?void 0:I.score)||"-":((F=T[0])==null?void 0:F.score)||"-").text})]}),l.jsxs("div",{className:"flex flex-col border-r border-zinc-800",children:[l.jsx("span",{className:"text-zinc-500 scale-75 origin-center",children:"DEPTH"}),l.jsx("span",{className:"text-amber-500 font-mono",children:k==="local"?(I==null?void 0:I.depth)||"-":((fe=T[0])==null?void 0:fe.depth)||"-"})]}),l.jsxs("div",{className:"flex flex-col border-r border-zinc-800",children:[l.jsx("span",{className:"text-zinc-500 scale-75 origin-center",children:"TIME"}),l.jsx("span",{className:"text-zinc-300 font-mono scale-90",children:k==="local"?I?(I.time/1e3).toFixed(1)+"s":"0s":"-"})]}),l.jsxs("div",{className:"flex flex-col border-r border-zinc-800",children:[l.jsx("span",{className:"text-zinc-500 scale-75 origin-center",children:"NPS"}),l.jsx("span",{className:"text-zinc-400 font-mono scale-90",children:k==="local"?I?(I.nps/1e3).toFixed(0)+"k":"0":"-"})]}),l.jsx("div",{className:"flex flex-col justify-center items-center h-full pl-1",children:k==="local"?l.jsxs("button",{onClick:de,disabled:!K,className:`flex items-center justify-center gap-1 w-full h-full rounded text-[10px] font-bold transition-colors ${H?"bg-red-900/40 text-red-400 border border-red-900":"bg-green-900/40 text-green-400 border border-green-900"}`,children:[H?l.jsx(Mu,{size:10,fill:"currentColor"}):l.jsx(Fs,{size:10,fill:"currentColor"}),H?"":""]}):l.jsx("span",{className:"text-zinc-600",children:"-"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto bg-zinc-950 p-0",children:k==="cloud"?l.jsx("div",{className:"space-y-0 divide-y divide-zinc-800/50",children:u?V?l.jsx("div",{className:"text-center text-zinc-500 text-xs py-2",children:"..."}):T.length===0?l.jsx("div",{className:"text-center text-zinc-500 text-xs py-2",children:""}):l.jsx("table",{className:"w-full text-xs",children:l.jsx("tbody",{children:T.map((X,W)=>{const z=ce(X.score);return l.jsxs("tr",{onClick:()=>o(En(X.move)),className:"active:bg-zinc-800",children:[l.jsx("td",{className:"py-2 text-zinc-300 font-medium pl-2",children:O(X.move)}),l.jsx("td",{className:`py-2 text-right ${z.color}`,children:z.text}),l.jsxs("td",{className:"py-2 text-right text-zinc-500 pr-2",children:[X.winrate,"%"]})]},W)})})}):l.jsx("div",{className:"p-2",children:l.jsx("button",{onClick:()=>h(!0),className:"w-full py-2 bg-blue-600/20 text-blue-400 rounded border border-blue-600/50 text-xs font-bold",children:""})})}):l.jsxs("div",{className:"flex flex-col gap-2 p-2",children:[(I==null?void 0:I.bestMove)&&l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded p-2 flex items-center justify-between",children:[l.jsx("span",{className:"text-amber-400 font-bold text-lg",children:O(I.bestMove)}),l.jsx("button",{onClick:()=>o(En(I.bestMove)),className:"px-3 py-1 bg-zinc-800 text-xs rounded border border-zinc-700",children:""})]}),(I==null?void 0:I.pv)&&l.jsx("div",{className:"text-xs text-zinc-500 break-words leading-relaxed px-1",children:Tu(d,I.pv).slice(1).join(" ")})]})})]}):l.jsxs("div",{className:"flex flex-col h-full bg-zinc-900 border-zinc-800 w-full overflow-hidden",children:[!y&&l.jsxs("div",{className:"bg-zinc-900 border-b border-zinc-800 shrink-0",children:[l.jsxs("div",{className:"flex px-2 pt-2 gap-1",children:[l.jsxs("button",{onClick:()=>L("cloud"),className:`flex-1 py-2 text-xs font-bold rounded-t-lg flex items-center justify-center gap-2 border-t border-x ${k==="cloud"?"bg-zinc-800 text-blue-400 border-zinc-700":"bg-zinc-900 text-zinc-500 border-transparent hover:bg-zinc-800/50"}`,children:[l.jsx(Vr,{size:14})," "]}),l.jsxs("button",{onClick:()=>L("local"),className:`flex-1 py-2 text-xs font-bold rounded-t-lg flex items-center justify-center gap-2 border-t border-x ${k==="local"?"bg-zinc-800 text-amber-500 border-zinc-700":"bg-zinc-900 text-zinc-500 border-transparent hover:bg-zinc-800/50"}`,children:[l.jsx(Sl,{size:14})," "]})]}),l.jsx("div",{className:"px-2 py-2 bg-zinc-800/50 flex gap-2 border-b border-zinc-800",children:k==="cloud"?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>{u?se(d):h(!0)},className:`flex-1 px-3 py-1.5 rounded text-xs font-bold flex items-center justify-center gap-2 transition-all active:scale-95 whitespace-nowrap ${u?"bg-zinc-800 hover:bg-zinc-700 text-zinc-300 border border-zinc-700":"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20"}`,children:[l.jsx(D0,{size:14,className:V&&u?"animate-pulse":""})," "]}),l.jsxs("button",{onClick:()=>h(!1),className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-red-400 border border-zinc-700 rounded text-xs flex items-center justify-center gap-2 whitespace-nowrap",title:"",children:[l.jsx(L0,{size:14})," "]}),l.jsxs("button",{onClick:f,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-blue-400 border border-zinc-700 rounded text-xs flex items-center justify-center gap-2 whitespace-nowrap",title:"",children:[l.jsx(ju,{size:14})," "]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:de,className:`flex-1 px-3 py-1.5 rounded text-xs font-bold flex items-center justify-center gap-2 border transition-all active:scale-95 whitespace-nowrap ${H?"bg-red-900/40 text-red-200 border-red-800 hover:bg-red-900/60":"bg-amber-600 hover:bg-amber-500 text-white border-amber-500"}`,children:[H?l.jsx(Mu,{size:14,fill:"currentColor"}):l.jsx(Fs,{size:14,fill:"currentColor"}),H?"":""]}),l.jsxs("button",{onClick:f,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-blue-400 border border-zinc-700 rounded text-xs flex items-center justify-center gap-2 whitespace-nowrap",title:"",children:[l.jsx(ju,{size:14})," "]})]})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto bg-zinc-950 relative min-h-0",children:k==="cloud"?l.jsx(l.Fragment,{children:u?V?l.jsxs("div",{className:"flex flex-col items-center justify-center h-40 gap-3 text-zinc-500",children:[l.jsx(Cu,{size:24,className:"animate-spin text-blue-500"}),l.jsx("span",{className:"text-xs font-medium",children:"..."})]}):T.length===0?l.jsx("div",{className:"p-10 text-center text-zinc-600 italic text-sm",children:""}):l.jsxs("table",{className:"w-full text-left border-collapse text-sm",children:[l.jsx("thead",{className:"bg-zinc-900 text-zinc-500 font-bold sticky top-0 z-10 text-[10px] uppercase tracking-wider",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 border-b border-zinc-800",children:""}),l.jsx("th",{className:"px-2 py-2 border-b border-zinc-800 text-right",children:""}),l.jsx("th",{className:"px-2 py-2 border-b border-zinc-800 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-zinc-800/30",children:T.map((X,W)=>{const z=ce(X.score);return l.jsxs("tr",{onClick:()=>o(En(X.move)),className:"hover:bg-blue-900/10 cursor-pointer transition-colors",children:[l.jsx("td",{className:"px-3 py-2 font-bold text-zinc-300",children:O(X.move)}),l.jsx("td",{className:`px-2 py-2 text-right font-mono ${z.color}`,children:z.text}),l.jsxs("td",{className:"px-2 py-2 text-right text-zinc-500 text-xs",children:[X.winrate,"%"]})]},W)})})]}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center gap-4 opacity-50",children:[l.jsx(Vr,{size:48,className:"text-zinc-700"}),l.jsxs("p",{className:"text-zinc-500 text-sm leading-relaxed",children:[" API",l.jsx("br",{}),""]})]})}):l.jsx("div",{className:"flex flex-col h-full",children:K?!H&&!I?l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 gap-2 opacity-50",children:[l.jsx(Sl,{size:48}),l.jsx("span",{className:"text-xs",children:"Pikafish NNUE "})]}):l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-zinc-900 rounded p-2 text-center border border-zinc-800",children:[l.jsx("div",{className:"text-[10px] text-zinc-500 uppercase",children:"Score"}),l.jsx("div",{className:`text-xl font-mono font-bold ${I?ce(I.score).color:"text-zinc-600"}`,children:I!=null&&I.mate?`M${Math.abs(I.mate)}`:I?ce(I.score).text:"-"})]}),l.jsxs("div",{className:"bg-zinc-900 rounded p-2 text-center border border-zinc-800",children:[l.jsx("div",{className:"text-[10px] text-zinc-500 uppercase",children:"Depth"}),l.jsx("div",{className:"text-xl font-mono font-bold text-amber-400",children:(I==null?void 0:I.depth)||0})]})]}),l.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-500 font-mono bg-zinc-900/50 p-2 rounded border border-zinc-800/50",children:[l.jsxs("span",{children:["NPS: ",I?(I.nps/1e3).toFixed(1)+"k":"-"]}),l.jsxs("span",{children:["Nodes: ",I?(I.nodes/1e6).toFixed(2)+"M":"-"]})]}),(I==null?void 0:I.pv)&&I.pv.length>0&&l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-xs font-bold text-zinc-400 flex items-center gap-1",children:[l.jsx(Gu,{size:12}),"  (PV)"]}),l.jsx("div",{className:"bg-zinc-900 border border-zinc-800 rounded p-2 text-sm text-zinc-300 font-mono leading-relaxed break-words",children:Tu(d,I.pv).map((X,W)=>l.jsx("span",{className:W===0?"text-amber-400 font-bold mr-1.5":"mr-1.5 text-zinc-400",children:X},W))}),l.jsxs("button",{onClick:()=>I.bestMove&&o(En(I.bestMove)),className:"w-full mt-2 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 text-xs rounded border border-zinc-700 transition-colors",children:[" (",I.bestMove&&O(I.bestMove),")"]})]})]}):l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-500 gap-2",children:[l.jsx(Cu,{size:24,className:"animate-spin text-amber-500"}),l.jsx("span",{className:"text-xs",children:" ( NNUE)..."})]})})})]})},Q0=({header:d,leftSidebar:c,rightSidebar:o,board:f,controls:u,mobileTabs:h,mobileOverlay:x,isMobilePortrait:v=!1})=>l.jsxs("div",{className:"flex flex-col w-full bg-zinc-950 text-zinc-100 overflow-hidden",style:{height:"var(--app-height, 100vh)"},children:[l.jsx("div",{className:"shrink-0 z-50",children:d}),l.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[!v&&l.jsx("aside",{className:"hidden xl:flex w-80 2xl:w-96 flex-col border-r border-zinc-800 bg-zinc-900/50",children:c}),l.jsx("main",{className:"flex-1 flex flex-col bg-zinc-950 min-w-0 relative w-full",children:l.jsx("div",{className:"flex-1 flex flex-col p-1 md:p-4 overflow-hidden w-full",children:l.jsxs("div",{className:"flex-1 flex flex-col max-w-[800px] mx-auto w-full min-h-0",children:[l.jsx("div",{className:"flex-1 flex items-center justify-center relative min-h-0 overflow-hidden w-full",children:f}),l.jsxs("div",{className:"flex flex-col shrink-0 mt-1 gap-1",children:[l.jsx("div",{className:"w-full",children:u}),v&&l.jsx("div",{className:"shrink-0 h-12 pb-1",children:h})]})]})})}),!v&&l.jsx("aside",{className:"hidden xl:flex w-80 2xl:w-96 flex-col border-l border-zinc-800 bg-zinc-900/50",children:o}),x]})]}),Du=({isAnalyzing:d,analysisMode:c,currentStepInfo:o,progress:f,results:u,setResults:h,startCloudAnalysis:x,startLocalAnalysis:v,stopAnalysis:y,writeAnnotations:N,onJumpToStep:S,localDepth:k,setLocalDepth:L,isCompact:V=!1,onJumpToNode:G})=>{const[T,_]=C.useState(null),[K,U]=C.useState("red"),[H,w]=C.useState("graph"),I={mistake:0,blunder:0,inaccuracy:0,win:0,total:0},B={mistake:0,blunder:0,inaccuracy:0,win:0,total:0};u.forEach(p=>{p.score!==null&&(p.isRedTurn?I.total++:B.total++,p.quality==="mistake"&&(p.isRedTurn?I.mistake++:B.mistake++),p.quality==="blunder"&&(p.isRedTurn?I.blunder++:B.blunder++),p.quality==="inaccuracy"&&(p.isRedTurn?I.inaccuracy++:B.inaccuracy++))});const re=(p,M)=>{_(p),G&&G(M)},[de,O]=C.useState(500),se=()=>{O(p=>p===500?1e3:p===1e3?2e3:500)},ee=600,ce=(p,M)=>p/(M-1||1)*ee,ie=V?150:200,F=p=>{const le=Math.max(-de,Math.min(de,p))/de;return ie*(.5-le*.5)},fe=u.filter(p=>p.score!==null&&!isNaN(p.score)).map((p,M)=>{const le=M/(u.filter(pe=>pe.score!==null).length-1||1)*ee,xe=p.score,Ce=F(xe);return`${M===0?"M":"L"} ${le},${Ce}`}).join(" "),X=()=>l.jsx("div",{className:"flex gap-2 items-center flex-wrap shrink-0",children:d&&l.jsxs("div",{className:"flex gap-2 w-full",children:[l.jsxs("div",{className:"text-xs text-zinc-400 flex items-center gap-1 bg-zinc-900 px-2 py-1 rounded border border-zinc-800 flex-1",children:[c==="cloud"?l.jsx(Vr,{size:14,className:"text-blue-500"}):l.jsx(Sl,{size:14,className:"text-amber-500"}),l.jsx("span",{className:"truncate",children:o})]}),l.jsx("button",{onClick:y,className:"bg-red-900/50 hover:bg-red-900 text-red-200 px-3 py-1 rounded text-xs border border-red-800",children:l.jsx(Vu,{size:14})})]})}),W=()=>l.jsx("div",{className:"relative bg-zinc-950 rounded border border-zinc-800 select-none h-full flex flex-col justify-center overflow-hidden group touch-none",children:u.length>0?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:se,className:"absolute top-2 left-2 z-10 text-[10px] text-zinc-400 bg-zinc-900/80 hover:bg-zinc-800 px-2 py-1 rounded border border-zinc-700 transition-colors flex items-center gap-1 shadow-lg",title:"",children:[l.jsx("span",{children:":"}),l.jsxs("span",{className:"font-bold text-zinc-200",children:["",de]})]}),l.jsx("div",{className:"flex-1 w-full relative h-full",children:l.jsx("svg",{width:"100%",height:"100%",className:"overflow-visible",viewBox:`0 0 ${ee} ${ie}`,preserveAspectRatio:"none",children:l.jsxs("g",{children:[l.jsx("line",{x1:"0",y1:ie/2,x2:ee,y2:ie/2,stroke:"#3f3f46",strokeWidth:"1",strokeDasharray:"4 4"}),l.jsx("path",{d:fe,fill:"none",stroke:"#2563eb",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-lg",vectorEffect:"non-scaling-stroke"}),u.filter(p=>p.score!==null).map((p,M,le)=>{const xe=ce(M,le.length),Ce=F(p.score),$e=p.quality==="blunder"||p.quality==="mistake"||p.quality==="inaccuracy";let pe="#3b82f6";p.quality==="blunder"&&(pe="#a855f7"),p.quality==="mistake"&&(pe="#f97316"),p.quality==="inaccuracy"&&(pe="#94a3b8");const Ee=T===M;return l.jsxs("g",{onClick:()=>re(M,p.nodeId),className:"cursor-pointer group",children:[l.jsx("rect",{x:xe-5,y:0,width:10,height:ie,fill:"transparent"}),l.jsx("circle",{cx:xe,cy:Ce,r:Ee?5:$e?3:1.5,fill:pe,className:`transition-all duration-200 ${Ee?"breathing-glow":""} ${!$e&&!Ee?"opacity-0 group-hover:opacity-100":"opacity-100"}`,stroke:Ee?"#fff":"rgba(0,0,0,0.5)",strokeWidth:Ee?2:$e?1:0}),Ee&&l.jsx("circle",{cx:xe,cy:Ce,r:8,fill:"none",stroke:pe,strokeWidth:2,className:"breathing-ring",opacity:.6})]},M)})]})})}),l.jsxs("div",{className:"absolute right-0 top-0 bottom-0 flex flex-col justify-between text-[9px] text-zinc-600 font-mono py-1 z-0 pointer-events-none text-right pr-1 border-r border-zinc-800/20 select-none bg-gradient-to-l from-zinc-900/50 to-transparent",children:[l.jsxs("span",{children:["+",de]}),l.jsxs("span",{children:["+",de/2]}),l.jsx("span",{className:"opacity-0",children:"0"}),l.jsxs("span",{children:["-",de/2]}),l.jsxs("span",{children:["-",de]})]})]}):l.jsx("div",{className:"text-zinc-500 text-xs text-center",children:""})}),z=()=>l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs shrink-0",children:[l.jsx($u,{title:"",stats:I,isRed:!0}),l.jsx($u,{title:"",stats:B,isRed:!1})]}),D=u.map((p,M)=>({res:p,idx:M})).filter(p=>p.res.isRedTurn===(K==="red")&&p.res.quality!=="good"),$=()=>l.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 bg-zinc-900 rounded-lg border border-zinc-800 flex flex-col",children:[l.jsxs("div",{className:"flex border-b border-zinc-800 shrink-0",children:[l.jsxs("button",{onClick:()=>U("red"),className:`flex-1 py-2 text-xs font-bold transition-colors ${K==="red"?"bg-red-900/20 text-red-400 border-b-2 border-red-500":"text-zinc-500 hover:text-zinc-300"}`,children:[" (",I.mistake+I.blunder,")"]}),l.jsxs("button",{onClick:()=>U("black"),className:`flex-1 py-2 text-xs font-bold transition-colors ${K==="black"?"bg-zinc-800/50 text-zinc-300 border-b-2 border-black":"text-zinc-500 hover:text-zinc-300"}`,children:[" (",B.mistake+B.blunder,")"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 relative",children:D.length>0?l.jsx("div",{className:"space-y-1 pb-4",children:D.map(({res:p,idx:M})=>l.jsx(V0,{res:p,idx:M,selectedIndex:T,onJump:re},p.nodeId))}):l.jsx("div",{className:"text-center py-4 text-xs text-zinc-500 absolute inset-0 flex items-center justify-center",children:""})})]});return V?l.jsxs("div",{className:"flex flex-col h-full gap-2 relative",children:[X(),d&&l.jsx("div",{className:"text-[10px] text-zinc-500 text-center animate-pulse -mt-1",children:o}),l.jsxs("div",{className:"flex bg-zinc-900 rounded-lg overflow-hidden shrink-0 border border-zinc-800 p-0.5 gap-0.5",children:[l.jsx("button",{onClick:()=>w("graph"),className:`flex-1 py-1.5 text-xs rounded-md transition-all ${H==="graph"?"bg-zinc-700 text-white font-bold shadow":"text-zinc-500 hover:text-zinc-300"}`,children:""}),l.jsx("button",{onClick:()=>w("report"),className:`flex-1 py-1.5 text-xs rounded-md transition-all ${H==="report"?"bg-zinc-700 text-white font-bold shadow":"text-zinc-500 hover:text-zinc-300"}`,children:""}),l.jsx("button",{onClick:()=>w("errors"),className:`flex-1 py-1.5 text-xs rounded-md transition-all ${H==="errors"?"bg-zinc-700 text-white font-bold shadow":"text-zinc-500 hover:text-zinc-300"}`,children:""})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 relative bg-zinc-950/30 rounded-lg",children:[H==="graph"&&l.jsx("div",{className:"h-full",children:W()}),H==="report"&&l.jsxs("div",{className:"space-y-3 p-2 h-full overflow-y-auto",children:[z(),l.jsxs("div",{className:"p-3 bg-zinc-900 rounded border border-zinc-800 text-xs text-zinc-400 leading-relaxed",children:[l.jsx("h4",{className:"font-bold text-zinc-200 mb-2",children:""}),l.jsxs("p",{children:[" ",Math.ceil(u.length/2)," "]}),l.jsxs("p",{children:[": ",I.total>0?Math.round((I.mistake+I.blunder)/I.total*100):0,"%"]}),l.jsxs("p",{children:[": ",B.total>0?Math.round((B.mistake+B.blunder)/B.total*100):0,"%"]})]}),l.jsxs("button",{onClick:N,className:"w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 shadow-lg shadow-blue-900/20 active:scale-95 transition-all",children:[l.jsx(Su,{size:16})," "]})]}),H==="errors"&&$()]})]}):l.jsxs("div",{className:"flex flex-col h-full gap-4 p-2",children:[X(),d&&l.jsx("div",{className:"text-xs text-zinc-500 text-center animate-pulse",children:o}),l.jsx("div",{className:"h-48 shrink-0",children:W()}),z(),$(),l.jsxs("button",{onClick:N,className:"py-2 bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded text-sm text-zinc-300 flex items-center justify-center gap-2 transition-colors",children:[l.jsx(Su,{size:16})," "]}),l.jsx("style",{children:`
                @keyframes breathing-ring-animation {
                    0%, 100% { transform: scale(1); opacity: 0.6; }
                    50% { transform: scale(1.3); opacity: 0.2; }
                }
                .breathing-ring {
                    animation: breathing-ring-animation 1.5s ease-in-out infinite;
                    transform-origin: center;
                    transform-box: fill-box;
                }
                .breathing-glow {
                    filter: drop-shadow(0 0 3px currentColor);
                }
            `})]})},V0=({res:d,idx:c,selectedIndex:o,onJump:f})=>{let u="",h="",x="";d.quality==="blunder"?(u="border-purple-900/50",h="bg-purple-950/30 hover:bg-purple-900/20",x="text-purple-400"):d.quality==="mistake"?(u="border-orange-900/50",h="bg-orange-950/30 hover:bg-orange-900/20",x="text-orange-400"):(u="border-zinc-700/50",h="bg-zinc-800/30 hover:bg-zinc-700/20",x="text-zinc-400");const v=o===c,y=Math.ceil(d.moveIndex/2);return l.jsxs("button",{onClick:()=>f(c,d.nodeId),className:`w-full px-2 py-2.5 rounded text-left border transition-all text-[11px] md:text-xs flex items-center justify-between gap-2 ${u} ${h} ${x} ${v?"ring-1 ring-white/50 bg-opacity-70":"opacity-90"}`,children:[l.jsxs("span",{className:"font-bold shrink-0 flex items-center gap-2",children:[l.jsx("span",{className:"opacity-60 font-mono w-6 text-right",children:y}),l.jsx("span",{children:d.moveNotation})]}),l.jsxs("span",{className:"font-mono opacity-80 flex items-center gap-1",children:[l.jsx("span",{children:d.score}),l.jsxs("span",{className:"opacity-60 text-[10px]",children:["(",d.deviation,")"]})]})]})},$u=({title:d,stats:c,isRed:o,compact:f=!1})=>l.jsxs("div",{className:`p-2 rounded border flex flex-col gap-1 ${o?"bg-red-950/20 border-red-900/30":"bg-zinc-900 border-zinc-800"}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:`font-bold ${o?"text-red-400":"text-zinc-400"}`,children:d}),l.jsxs("span",{className:"text-[10px] opacity-60",children:[" ",Math.ceil(c.total/2)," "]})]}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx(Co,{label:"",count:c.blunder,color:"bg-purple-500/10 text-purple-400 border-purple-500/30"}),l.jsx(Co,{label:"",count:c.mistake,color:"bg-orange-500/10 text-orange-400 border-orange-500/30"}),l.jsx(Co,{label:"",count:c.inaccuracy,color:"bg-zinc-500/10 text-zinc-400 border-zinc-500/30"})]})]}),Co=({label:d,count:c,color:o})=>l.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center p-1 rounded border ${o}`,children:[l.jsx("span",{className:"text-[10px] opacity-70",children:d}),l.jsx("span",{className:"font-bold text-xs",children:c})]}),W0=({isOpen:d,onClose:c,metadata:o,onSave:f})=>{const[u,h]=C.useState(o);if(!d)return null;const x=(y,N)=>{h(S=>({...S,[y]:N}))},v=()=>{f(u),c()};return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl w-full max-w-md mx-4 overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-zinc-800 flex justify-between items-center bg-zinc-900",children:[l.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(Wu,{className:"text-amber-500",size:20}),""]}),l.jsx("button",{onClick:c,className:"p-1 hover:bg-zinc-800 rounded text-zinc-400 hover:text-white transition-colors",children:l.jsx(nn,{size:24})})]}),l.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto custom-scrollbar",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-bold text-zinc-400 block",children:" :"}),l.jsx("input",{type:"text",value:u.title,onChange:y=>x("title",y.target.value),placeholder:"",className:"w-full bg-zinc-950 border border-zinc-700 rounded-lg px-3 py-2 text-zinc-200 focus:outline-none focus:border-amber-500 transition-colors"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-bold text-zinc-400 block",children:" :"}),l.jsxs("div",{className:"relative",children:[l.jsx(T0,{size:16,className:"absolute left-3 top-3 text-zinc-500"}),l.jsx("input",{type:"text",value:u.event,onChange:y=>x("event",y.target.value),placeholder:"",className:"w-full bg-zinc-950 border border-zinc-700 rounded-lg pl-9 pr-3 py-2 text-zinc-200 focus:outline-none focus:border-amber-500 transition-colors"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-bold text-zinc-400 block",children:" :"}),l.jsxs("div",{className:"relative",children:[l.jsx(r0,{size:16,className:"absolute left-3 top-3 text-zinc-500"}),l.jsx("input",{type:"text",value:u.date,onChange:y=>x("date",y.target.value),placeholder:"YYYY-MM-DD",className:"w-full bg-zinc-950 border border-zinc-700 rounded-lg pl-9 pr-3 py-2 text-zinc-200 focus:outline-none focus:border-amber-500 transition-colors"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-bold text-zinc-400 block",children:" :"}),l.jsxs("select",{value:u.result,onChange:y=>x("result",y.target.value),className:"w-full bg-zinc-950 border border-zinc-700 rounded-lg px-3 py-2 text-zinc-200 focus:outline-none focus:border-amber-500 transition-colors appearance-none cursor-pointer",children:[l.jsx("option",{value:"unknown",children:""}),l.jsx("option",{value:"red",children:""}),l.jsx("option",{value:"black",children:""}),l.jsx("option",{value:"draw",children:""})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 pt-2 border-t border-zinc-800",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-bold text-red-400 block",children:" :"}),l.jsxs("div",{className:"relative",children:[l.jsx(Pu,{size:16,className:"absolute left-3 top-3 text-red-900"}),l.jsx("input",{type:"text",value:u.redName,onChange:y=>x("redName",y.target.value),placeholder:"",className:"w-full bg-zinc-950 border border-zinc-700 rounded-lg pl-9 pr-3 py-2 text-zinc-200 focus:outline-none focus:border-red-500 transition-colors"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-sm font-bold text-zinc-400 block",children:" :"}),l.jsxs("div",{className:"relative",children:[l.jsx(Pu,{size:16,className:"absolute left-3 top-3 text-zinc-600"}),l.jsx("input",{type:"text",value:u.blackName,onChange:y=>x("blackName",y.target.value),placeholder:"",className:"w-full bg-zinc-950 border border-zinc-700 rounded-lg pl-9 pr-3 py-2 text-zinc-200 focus:outline-none focus:border-zinc-500 transition-colors"})]})]})]})]}),l.jsxs("div",{className:"p-4 border-t border-zinc-800 bg-zinc-900/50 flex justify-end gap-3",children:[l.jsx("button",{onClick:c,className:"px-5 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg font-medium transition-colors",children:""}),l.jsx("button",{onClick:v,className:"px-5 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg font-bold shadow-lg shadow-green-900/20 transition-colors",children:""})]})]})})},Eo=["king","advisor","elephant","horse","chariot","cannon","soldier"],X0={king:1,advisor:2,elephant:2,horse:2,chariot:2,cannon:2,soldier:5},G0=({isOpen:d,onClose:c,initialFen:o,onConfirm:f,isFlippedInitial:u})=>{const[h,x]=C.useState(br()),[v,y]=C.useState("red"),[N,S]=C.useState(u),[k,L]=C.useState(null),[V,G]=C.useState(null),[T,_]=C.useState(""),[K,U]=C.useState(!1),H=C.useRef(null),w=C.useRef(null);if(C.useEffect(()=>{if(d){const{board:F,turn:fe}=rr(o);x(F),y(fe),_(o),L(null),G(null),S(u)}},[d,o,u]),C.useEffect(()=>{if(d){const F=Qr(h,v);_(F)}},[h,v,d]),!d)return null;const I=(F,fe)=>{const X=Date.now(),W=H.current,z=W&&X-W.time<300&&W.r===F.r&&W.c===F.c;H.current={time:X,r:F.r,c:F.c},V&&G(null);const D=h[F.r][F.c];if(z&&D){const $=h.map(p=>[...p]);$[F.r][F.c]=null,x($),L(null);return}if(k){let $=null;if(k.type==="box"?$=k.piece:$=h[k.r][k.c],$){if(!_u($.type,$.color,F.r,F.c)){L(D?{type:"board",r:F.r,c:F.c}:null);return}const p=h.map(M=>[...M]);if(k.type==="board"){if(k.r===F.r&&k.c===F.c){L(null);return}p[k.r][k.c]=null}p[F.r][F.c]=$,x(p),L(null)}return}D?L({type:"board",r:F.r,c:F.c}):G({r:F.r,c:F.c,x:0,y:0})},B=F=>{L({type:"box",piece:F}),G(null)},re=()=>{x(br()),y("red")},de=()=>{const F=Array(10).fill(null).map(()=>Array(9).fill(null));F[9][4]={type:"king",color:"red",text:ct.red.king},F[0][4]={type:"king",color:"black",text:ct.black.king},x(F)},O=()=>{var F;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(T).then(()=>{U(!0),setTimeout(()=>U(!1),2e3)}).catch(fe=>{var X;(X=w.current)==null||X.select()});else{(F=w.current)==null||F.select();try{document.execCommand("copy"),U(!0),setTimeout(()=>U(!1),2e3)}catch{}}},se=async()=>{try{if(!navigator.clipboard||!navigator.clipboard.readText)throw new Error("Clipboard API not supported");const F=await navigator.clipboard.readText();if(F){if(F.indexOf("/")===-1){alert(" FEN ()");return}try{const{board:fe,turn:X}=rr(F);x(fe),y(X)}catch{alert("FEN ")}}}catch{alert(` ()

 FEN  (Ctrl+V)`),w.current&&(w.current.focus(),w.current.select())}},ce=(()=>{const F={};return h.flat().forEach(fe=>{if(fe){const X=`${fe.color}-${fe.type}`;F[X]=(F[X]||0)+1}}),F})(),ie=(F,fe,X)=>{const W=ce[`${fe}-${F}`]||0,z=X0[F],D=W>=z,$={type:F,color:fe,text:X},p=(k==null?void 0:k.type)==="box"&&k.piece.color===fe&&k.piece.type===F;return l.jsx("button",{onClick:()=>B($),className:`
                    w-9 h-9 md:w-10 md:h-10 rounded-full flex items-center justify-center font-bold font-serif text-lg shadow-sm border
                    ${p?"ring-2 ring-blue-500 scale-110 z-10":""}
                    ${D?"opacity-30 cursor-not-allowed bg-zinc-800 border-zinc-700 grayscale":"cursor-pointer hover:brightness-110"}
                    ${fe==="red"?D?"text-zinc-500":"bg-[#f0d9b5] text-[#a61c1c] border-[#a61c1c]":D?"text-zinc-500":"bg-[#f0d9b5] text-black border-black"}
                `,children:X},`${fe}-${F}`)};return l.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/95 backdrop-blur-md animate-in fade-in duration-200",children:l.jsxs("div",{className:"w-full h-full md:max-w-6xl flex flex-col md:flex-row overflow-hidden bg-zinc-900 md:rounded-xl md:h-[95vh] md:border border-zinc-800 shadow-2xl",children:[l.jsxs("div",{className:"flex-1 relative bg-[#2a2a2e] flex items-center justify-center p-2 min-h-0",children:[l.jsx("div",{className:"w-full h-full max-w-[600px] flex flex-col justify-center",children:l.jsx(Yu,{currentBoard:h,isFlipped:N,isMirrored:!1,mode:"edit",selectedCoord:(k==null?void 0:k.type)==="board"?{r:k.r,c:k.c}:null,onSquareClick:I})}),V&&l.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>G(null),children:l.jsxs("div",{className:"bg-zinc-800 p-4 rounded-xl shadow-2xl border border-zinc-700 grid grid-cols-4 gap-3 animate-in zoom-in-95 duration-200",onClick:F=>F.stopPropagation(),children:[l.jsxs("div",{className:"col-span-4 text-center text-zinc-400 text-xs mb-1 font-bold",children:[" (",V.r,", ",V.c,")"]}),["red","black"].map(F=>Eo.map(fe=>{if(!_u(fe,F,V.r,V.c))return null;const X=ct[F][fe];return l.jsx("button",{onClick:()=>{const W=h.map(z=>[...z]);W[V.r][V.c]={type:fe,color:F,text:X},x(W),G(null)},className:"w-10 h-10 rounded-full bg-zinc-700 hover:bg-zinc-600 flex items-center justify-center border border-zinc-600 shadow-sm",children:l.jsx("span",{className:`font-bold font-serif text-lg ${F==="red"?"text-red-500":"text-black bg-white/10 rounded-full w-8 h-8 flex items-center justify-center"}`,children:X})},`mini-${F}-${fe}`)}))]})})]}),l.jsxs("div",{className:"w-full md:w-80 bg-zinc-900 border-t md:border-t-0 md:border-l border-zinc-800 flex flex-col shrink-0 h-auto max-h-[50vh] md:max-h-none",children:[l.jsxs("div",{className:"hidden md:flex px-4 py-3 border-b border-zinc-800 justify-between items-center bg-zinc-900",children:[l.jsx("h3",{className:"font-bold text-zinc-200",children:""}),l.jsx("button",{onClick:c,className:"p-1 hover:bg-zinc-800 rounded text-zinc-400 hover:text-white",children:l.jsx(nn,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-4 md:space-y-6 custom-scrollbar",children:[l.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-3 border border-zinc-700/50",children:[l.jsx("div",{className:"flex justify-between gap-1 mb-2",children:Eo.map(F=>F==="king"?null:ie(F,"red",ct.red[F]))}),l.jsx("div",{className:"flex justify-between gap-1",children:Eo.map(F=>F==="king"?null:ie(F,"black",ct.black[F]))})]}),l.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[l.jsxs("button",{onClick:re,className:"flex flex-col items-center justify-center p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700 text-xs gap-1 text-zinc-300 border border-zinc-700",children:[l.jsx(M0,{size:16})," ",l.jsx("span",{className:"scale-90",children:""})]}),l.jsxs("button",{onClick:de,className:"flex flex-col items-center justify-center p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700 text-xs gap-1 text-zinc-300 border border-zinc-700",children:[l.jsx(Cl,{size:16})," ",l.jsx("span",{className:"scale-90",children:""})]}),l.jsxs("button",{onClick:()=>S(!N),className:"flex flex-col items-center justify-center p-2 bg-zinc-800 rounded-lg hover:bg-zinc-700 text-xs gap-1 text-zinc-300 border border-zinc-700",children:[l.jsx(Qu,{size:16})," ",l.jsx("span",{className:"scale-90",children:""})]}),l.jsxs("button",{onClick:()=>y(v==="red"?"black":"red"),className:`flex flex-col items-center justify-center p-2 rounded-lg text-xs gap-1 font-bold border transition-colors ${v==="red"?"bg-red-900/20 text-red-400 border-red-900/50":"bg-zinc-800 text-zinc-300 border-zinc-700"}`,children:[l.jsx(C0,{size:16})," ",l.jsx("span",{className:"scale-90",children:v==="red"?"":""})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:O,className:"flex-1 py-2 bg-blue-600/20 hover:bg-blue-600/30 text-blue-300 border border-blue-600/30 rounded-lg text-sm flex items-center justify-center gap-1.5 font-medium transition-colors",children:[K?l.jsx(yr,{size:14}):l.jsx($s,{size:14}),"  FEN"]}),l.jsx("button",{onClick:se,className:"flex-1 py-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 border border-zinc-700 rounded-lg text-sm font-medium transition-colors",children:" FEN"})]}),l.jsx("textarea",{ref:w,value:T,onChange:F=>{_(F.target.value);try{const{board:fe,turn:X}=rr(F.target.value);x(fe),y(X)}catch{}},placeholder:"FEN ...",className:"w-full h-14 bg-black/20 border border-zinc-700 rounded px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none focus:border-amber-500 focus:bg-black/40 resize-none transition-colors"})]}),l.jsxs("div",{className:"p-3 bg-zinc-900 border-t border-zinc-800 flex gap-3 shrink-0 pb-6 md:pb-4",children:[l.jsx("button",{onClick:c,className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 font-bold rounded-lg transition-colors text-sm",children:""}),l.jsx("button",{onClick:()=>f(T),className:"flex-1 py-3 bg-amber-600 hover:bg-amber-500 text-white font-bold rounded-lg transition-colors shadow-lg shadow-amber-900/20 text-sm",children:""})]})]})]})})},q0=({isOpen:d,onClose:c,settings:o,onUpdate:f})=>{if(!d)return null;const u=x=>{f({...o,[x]:!o[x]})},h=(x,v)=>{f({...o,[x]:v})};return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm animate-in fade-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl w-full max-w-sm mx-4 overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"px-5 py-4 border-b border-zinc-800 bg-zinc-900 flex justify-between items-center",children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:""}),l.jsx("button",{onClick:c,className:"text-zinc-500 hover:text-white transition-colors",children:l.jsx(nn,{size:24})})]}),l.jsxs("div",{className:"p-5 space-y-6 overflow-y-auto custom-scrollbar max-h-[70vh]",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${o.enableSound?"bg-green-500/20 text-green-400":"bg-zinc-800 text-zinc-500"}`,children:o.enableSound?l.jsx(I0,{size:20}):l.jsx(R0,{size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-zinc-200",children:""}),l.jsx("div",{className:"text-xs text-zinc-500",children:""})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:o.enableSound,onChange:()=>u("enableSound"),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),l.jsx("hr",{className:"border-zinc-800"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${o.showPlayerNames?"bg-blue-500/20 text-blue-400":"bg-zinc-800 text-zinc-500"}`,children:o.showPlayerNames?l.jsx(m0,{size:20}):l.jsx(p0,{size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-zinc-200",children:""}),l.jsx("div",{className:"text-xs text-zinc-500",children:""})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:o.showPlayerNames,onChange:()=>u("showPlayerNames"),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${o.showVariationArrows?"bg-blue-500/20 text-blue-400":"bg-zinc-800 text-zinc-500"}`,children:l.jsx($0,{size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-zinc-200",children:""}),l.jsx("div",{className:"text-xs text-zinc-500",children:" (A/B)"})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:o.showVariationArrows,onChange:()=>u("showVariationArrows"),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${o.showEngineArrows?"bg-purple-500/20 text-purple-400":"bg-zinc-800 text-zinc-500"}`,children:l.jsx(To,{size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-zinc-200",children:""}),l.jsx("div",{className:"text-xs text-zinc-500",children:" (/)"})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:o.showEngineArrows,onChange:()=>u("showEngineArrows"),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${o.showCoords?"bg-blue-500/20 text-blue-400":"bg-zinc-800 text-zinc-500"}`,children:l.jsx(v0,{size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-zinc-200",children:""}),l.jsx("div",{className:"text-xs text-zinc-500",children:" 1-9 "})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:o.showCoords,onChange:()=>u("showCoords"),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),l.jsx("hr",{className:"border-zinc-800"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-zinc-800 text-zinc-400",children:l.jsx(z0,{size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-zinc-200",children:""}),l.jsxs("div",{className:"text-xs text-zinc-500",children:[o.animationSpeed," ms"]})]})]})}),l.jsxs("div",{className:"px-1",children:[l.jsx("input",{type:"range",min:"0",max:"1000",step:"100",value:o.animationSpeed,onChange:x=>h("animationSpeed",parseInt(x.target.value)),className:"w-full h-2 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-amber-600"}),l.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-600 mt-1",children:[l.jsx("span",{children:" (0ms)"}),l.jsx("span",{children:" (1s)"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"font-bold text-zinc-200",children:""}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:["small","medium","large"].map(x=>{let v="";return x==="small"&&(v=" ()"),x==="medium"&&(v=" ()"),x==="large"&&(v=" ()"),l.jsx("button",{onClick:()=>h("boardSize",x),className:`py-2 px-1 rounded-lg text-sm font-bold border transition-all ${o.boardSize===x?"bg-amber-600/20 border-amber-500 text-amber-400":"bg-zinc-950 border-zinc-700 text-zinc-400 hover:border-zinc-500"}`,children:v},x)})})]})]}),l.jsx("div",{className:"p-4 border-t border-zinc-800 bg-zinc-900/50 flex justify-end",children:l.jsx("button",{onClick:c,className:"px-6 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg font-bold transition-colors",children:""})})]})})},K0=({isOpen:d,onClose:c,analysisMode:o,setAnalysisMode:f,localDepth:u,setLocalDepth:h,onStart:x})=>{const v=()=>{x&&x(o,u),c()};return d?l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl shadow-2xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800 bg-zinc-900/50",children:[l.jsx("h3",{className:"font-bold text-zinc-100",children:""}),l.jsx("button",{onClick:c,className:"p-1 hover:bg-zinc-800 rounded-lg text-zinc-400 transition-colors",children:l.jsx(nn,{size:20})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"text-xs text-zinc-500 font-bold uppercase tracking-wider",children:""}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:()=>f("cloud"),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border transition-all ${o==="cloud"?"bg-blue-600/20 border-blue-600 text-blue-400":"bg-zinc-800 border-zinc-700 text-zinc-400 hover:bg-zinc-700"}`,children:[l.jsx(Vr,{size:24}),l.jsx("span",{className:"text-sm font-bold",children:""})]}),l.jsxs("button",{onClick:()=>f("local"),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border transition-all ${o==="local"?"bg-amber-600/20 border-amber-600 text-amber-400":"bg-zinc-800 border-zinc-700 text-zinc-400 hover:bg-zinc-700"}`,children:[l.jsx(Sl,{size:24}),l.jsx("span",{className:"text-sm font-bold",children:""})]})]})]}),l.jsxs("div",{className:`space-y-3 transition-opacity duration-200 ${o==="local"?"opacity-100":"opacity-30 pointer-events-none"}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("label",{className:"text-xs text-zinc-500 font-bold uppercase tracking-wider",children:""}),l.jsx("span",{className:"text-amber-500 font-mono font-bold text-lg",children:u})]}),l.jsx("input",{type:"range",min:"10",max:"30",value:u,onChange:y=>h(parseInt(y.target.value)),className:"w-full accent-amber-500 h-2 bg-zinc-800 rounded-lg appearance-none cursor-pointer"}),l.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-600 font-mono",children:[l.jsx("span",{children:"10 ()"}),l.jsx("span",{children:"30 ()"})]})]})]}),l.jsx("div",{className:"p-4 border-t border-zinc-800 bg-zinc-900/50",children:l.jsxs("button",{onClick:v,className:"w-full py-3 bg-zinc-100 hover:bg-white text-zinc-900 rounded-lg font-bold flex items-center justify-center gap-2 transition-all active:scale-[0.98]",children:[l.jsx(yr,{size:18})," "]})})]})}):null},Au={:1,:2,:3,:4,:5,:6,:7,:8,:9,"":1,"":2,"":3,"":4,"":5,"":6,"":7,"":8,"":9,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,"":0,0:0},Fu={parseInput(d){return d.includes("[DhtmlXQ")?this.parseDhtmlXQ(d):this.parseTextNotation(d)},normalizeText(d){let c=d.replace(/[--]/g,o=>{const f=o.charCodeAt(0);return f>=65296&&f<=65305||f>=65313&&f<=65321?String.fromCharCode(f-65248):o});return c=c.replace(/[]/g,"-"),c=c.replace(/[]/g," "),c=c.replace(//g,"-"),c=c.replace(//g,""),c=c.replace(//g,""),c=c.replace(//g,""),c=c.replace(//g,""),c=c.replace(//g,""),c=c.replace(/\d+\.\s*/g," "),c=c.replace(/[\d]+[:]/g," "),c=c.replace(/[,.;:]/g," "),c},extractTextMetadata(d){const c={Title:"",Event:"",Date:"",Red:"",Black:"",Result:""},o=u=>{for(const h of u){const x=d.match(h);if(x&&x[1])return x[1].trim()}return""};c.Title=o([/[]+[:]\s*(.+?)(?:\r?\n|$)/,/[:]\s*(.+?)(?:\r?\n|$)/,/\[Game\s+"(.+?)"\]/i]),c.Event=o([/[]*[:]\s*(.+?)(?:\r?\n|$)/,/[]*[:]\s*(.+?)(?:\r?\n|$)/,/\[Event\s+"(.+?)"\]/i]),c.Date=o([/[:]\s*(.+?)(?:\r?\n|$)/,/\[Date\s+"(.+?)"\]/i,/(\d{4}[.\-\/]\d{1,2}[.\-\/]\d{1,2})/]),c.Red=o([/[]*[:]\s*(.+?)(?:\r?\n|$)/,/[]*[:]\s*(.+?)(?:\r?\n|$)/,/\[Red\s+"(.+?)"\]/i]),c.Black=o([/[]*[:]\s*(.+?)(?:\r?\n|$)/,/\[Black\s+"(.+?)"\]/i]);const f=o([/[][][:]\s*(.+?)(?:\r?\n|$)/,/[:]\s*(.+?)(?:\r?\n|$)/,/\[Result\s+"(.+?)"\]/i]);return f&&(/||[]|1-0/.test(f)?c.Result="":/||[]|[]|0-1/.test(f)?c.Result="":/||1\/2/.test(f)?c.Result="":c.Result=f),c},parseTextNotation(d){let c="rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR w - - 0 1";const o=this.extractTextMetadata(d),f=d.match(/\[FEN\s+"([^"]+)"\]/i)||d.match(/[Ff][Ee][Nn][:\s]+([rnbakabnrcpRNBAKABNRCP1-9\/]+ [wb])/);f&&(d.includes("[")?c=f[1]:c=f[1]+" - - 0 1");let u=d.replace(/\[[^\]]+\]/g," ");const h=[];u=u.replace(/\{([\s\S]*?)\}/g,(V,G)=>V.startsWith("{#")?V:(h.push(G.trim()),` __COMMENT_${h.length-1}__ `)),u=u.replace(/\{#([\s\S]*?)#\}/g,(V,G)=>(h.push(G.trim()),` __COMMENT_${h.length-1}__ `));const x=this.normalizeText(u),v=/([a-i][0-9]-?[a-i][0-9]|[RCNHPKAB][1-9][+.-][1-9]|(?:[\u4e00-\u9fa5]{2}|[\u4e00-\u9fa5][0-9])[][0-9]|__COMMENT_\d+__)/gi,y=x.match(v)||[],N=[];let{board:S,turn:k}=rr(c),L=null;for(let V of y){if(V.startsWith("__COMMENT_")){if(L){const _=parseInt(V.match(/\d+/)[0]);L.comment=(L.comment||"")+(L.comment?" ":"")+h[_]}continue}let G=null;const T=V.toLowerCase();if(/^[a-i][0-9]/.test(T)?G=this.iccsToMoveStr(V):/^[RCNHPKAB]/i.test(V)?G=this.parseWXFMove(V,S,k):/[\u4e00-\u9fa5]/.test(V)&&(G=this.parseChineseMove(V,S,k)),G){const[_,K]=G.split("-").map(Number),U=Math.floor(_/9),H=_%9,w=Math.floor(K/9),I=K%9,B=S[U][H];if(B){let re=V;/[\u4e00-\u9fa5]/.test(V)||(re=lr(S,{from:{r:U,c:H},to:{r:w,c:I},piece:B,captured:S[w][I]})),L={moveStr:G,notation:re},N.push(L);const de=S.map(O=>[...O]);de[w][I]=B,de[U][H]=null,S=de,k=k==="red"?"black":"red"}}}return{fen:c,moves:N,header:o}},parseChineseMove(d,c,o){var T;if(d.length<3)return null;const f=o==="red";let u=d[0],h=d[1],x=d[2],v=d[3];if(["","","",""].includes(d[0])){const _=d[0];u=d[1],h=_,x=d[2],v=d[3]}let y=[];for(let _=0;_<10;_++)for(let K=0;K<9;K++){const U=c[_][K];U&&U.color===o&&this.matchPieceName(U.text,u)&&y.push({r:_,c:K})}if(["","","",""].includes(h)){const _={};y.forEach(U=>{_[U.c]||(_[U.c]=[]),_[U.c].push(U)});let K=-1;for(const U in _)if(_[U].length>1){_[U].sort((w,I)=>w.r-I.r);let H=null;if(f?(h===""&&(H=_[U][0]),(h===""||h==="")&&(H=_[U][_[U].length-1]),h===""&&(H=_[U][1])):(h===""&&(H=_[U][_[U].length-1]),(h===""||h==="")&&(H=_[U][0]),h===""&&(H=_[U][1])),H){y=[H],K=parseInt(U);break}}if(K===-1)return null}else{const _=Au[h];if(_!==void 0){const K=f?9-_:_-1;y=y.filter(U=>U.c===K)}else return null}if(y.length===0)return null;y.sort((_,K)=>f?_.r-K.r:K.r-_.r);const N=y[0],S=Au[v];if(S===void 0)return null;let k=N.r,L=N.c;const V=((T=c[N.r][N.c])==null?void 0:T.text)||"",G=["","","","","","","","","",""].some(_=>this.matchPieceName(_,V));if(x==="")L=f?9-S:S-1;else{const _=x===""||x==="",K=f?_?-1:1:_?1:-1;if(G)k=N.r+S*K;else{L=f?9-S:S-1;const U=Math.abs(L-N.c);let H=0;this.matchPieceName("",V)?H=U===2?1:2:this.matchPieceName("",V)?H=2:H=1,k=N.r+H*K}}return k<0||k>9||L<0||L>8?null:`${N.r*9+N.c}-${k*9+L}`},parseWXFMove(d,c,o){const f=d[0].toUpperCase(),u=parseInt(d[1]),h=d[2],x=parseInt(d[3]),y={R:"",C:"",N:"",H:"",P:"",K:"",A:"",B:"",E:"",S:""}[f];if(!y)return null;const N=h==="+"?"":h==="-"?"":"",S=["","","","","","","","","",""][u],k=h==="."?["","","","","","","","","",""][x]:x.toString();return this.parseChineseMove(`${y}${S}${N}${k}`,c,o)},matchPieceName(d,c){const o={:["","","","R","r",""],:["","","","N","n","H","h",""],:["","","","C","c"],:["","","P","p"],:["","","P","p"],:["","","B","b","E","e"],:["","","B","b","E","e"],:["","","A","a"],:["","","A","a"],:["","","","","K","k"],:["","","","","K","k"]};let f="";for(const u in o)if(o[u].includes(d)||u===d){f=u;break}return f?o[f].includes(c)||f===c:d===c},iccsToMoveStr(d){const c=d.match(/([a-i])([0-9]).*([a-i])([0-9])/i);if(!c)return"";const o=c[1].toLowerCase().charCodeAt(0)-97,f=9-parseInt(c[2]),u=c[3].toLowerCase().charCodeAt(0)-97,h=9-parseInt(c[4]);return`${f*9+o}-${h*9+u}`},parseDhtmlXQ(d){const c=_=>{const K=new RegExp(`\\[${_}\\]([\\s\\S]*?)\\[\\/${_}\\]`,"i"),U=d.match(K);return U?U[1].trim():""},o={Title:c("DhtmlXQ_title"),Event:c("DhtmlXQ_event"),Date:c("DhtmlXQ_date"),Red:c("DhtmlXQ_red"),Black:c("DhtmlXQ_black"),Result:c("DhtmlXQ_result")},f=/\[DhtmlXQ_movelist\]([\d\s]+)\[\/DhtmlXQ_movelist\]/.exec(d),u=f?f[1].replace(/\s/g,"").substring(0,4):null;let h=!1;u&&u.length===4&&parseInt(u[1])>4&&(h=!0);let x=c("DhtmlXQ_fen");if(!x){const _=c("DhtmlXQ_binit");x=_?this.convertBinitToFen(_,h):"rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR w - - 0 1"}const v={id:"root",moveStr:"",stepIndex:0,ownerId:0,children:[],comment:"",parentId:null},y=new Map;y.set(0,[v]);const N=(_,K,U,H)=>{_=_.replace(/[^\d]/g,"").split("||")[0];let w=K,I=U;for(let B=0;B<_.length;B+=4){I++;const re=_.substring(B,B+4);if(re.length<4)break;const de={id:Math.random().toString(36).substring(2,9),moveStr:re,stepIndex:I,ownerId:H,children:[],comment:"",parentId:w.id};w.children.push(de),w=de,y.has(I)||y.set(I,[]),y.get(I).push(de)}};f&&N(f[1],v,0,0);const S=/\[DhtmlXQ_move_(\d+)_(\d+)_(\d+)\]([\s\S]*?)\[\/DhtmlXQ_move_\1_\2_\3\]/g;let k;for(;(k=S.exec(d))!==null;){const _=parseInt(k[1]),K=parseInt(k[2]),U=parseInt(k[3]),H=K-1,w=k[4],I=y.get(H);if(I&&I.length>0){let B=I.find(re=>re.ownerId===_);B||(B=I[I.length-1]),B&&N(w,B,H,U)}}const L=/\[DhtmlXQ_comment(\d+)(?:_(\d+))?\]([\s\S]*?)\[\/DhtmlXQ_comment\1(?:_\2)?\]/g;for(;(k=L.exec(d))!==null;){const _=parseInt(k[2]||k[1]),K=k[2]?parseInt(k[1]):0,U=y.get(_);if(U){let H=U.find(w=>w.ownerId===K);H||(H=U[0]),H&&(H.comment=k[3].trim())}}const{board:V,turn:G}=rr(x),T=(_,K,U)=>{let H=null,w=K,I=U,B=Qr(w,I);if(_.moveStr){const de=parseInt(_.moveStr[0]),O=parseInt(_.moveStr[1]),se=parseInt(_.moveStr[2]),ee=parseInt(_.moveStr[3]),ce={r:O,c:de},ie={r:ee,c:se},F=K[O][de],fe=K[ee][se];if(F){const X=lr(K,{from:ce,to:ie,piece:F});H={from:ce,to:ie,piece:F,captured:fe,notation:X},w=K.map(W=>[...W]),w[ee][se]=F,w[O][de]=null,I=U==="red"?"black":"red",B=Qr(w,I)}}const re={id:_.id,parentId:_.parentId,move:H,boardState:w,children:[],comment:_.comment,turn:I,fen:B,stepIndex:_.stepIndex,ownerId:_.ownerId};return _.children.length>0&&(re.children=_.children.map(de=>T(de,w,I)),re.selectedChildId=re.children[0].id),re};return{fen:x,moves:[],header:o,root:T(v,V,G)}},convertBinitToFen(d,c){if(!d||d.length!==64)return"";const o=new Array(90).fill(null),f="RNBAKABNRCCPPPPP".split(""),u="rnbakabnrccppppp".split(""),h=c?f:u,x=c?u:f;for(let y=0;y<32;y++){const N=parseInt(d[y*2]),k=parseInt(d[y*2+1])*9+N;y<16?o[k]=h[y]:o[k]=x[y-16]}let v="";for(let y=0;y<10;y++){let N=0;for(let S=0;S<9;S++){const k=o[y*9+S];k?(N>0&&(v+=N,N=0),v+=k):N++}N>0&&(v+=N),y<9&&(v+="/")}return v+" w - - 0 1"}},Y0=({isOpen:d,onClose:c,onImport:o})=>{const[f,u]=C.useState(!1),[h,x]=C.useState(""),[v,y]=C.useState(null),N=C.useRef(null);if(!d)return null;const S=T=>{T.preventDefault(),T.stopPropagation(),T.type==="dragenter"||T.type==="dragover"?u(!0):T.type==="dragleave"&&u(!1)},k=T=>{const _=new FileReader;_.onload=K=>{var H;const U=(H=K.target)==null?void 0:H.result;if(U)try{const w=Fu.parseInput(U);if(w.moves.length===0&&!w.fen)throw new Error("");o(w),c()}catch{y("")}},_.readAsText(T)},L=T=>{T.preventDefault(),T.stopPropagation(),u(!1),T.dataTransfer.files&&T.dataTransfer.files[0]&&k(T.dataTransfer.files[0])},V=T=>{T.target.files&&T.target.files[0]&&k(T.target.files[0])},G=()=>{if(h.trim())try{const T=Fu.parseInput(h);if(T.moves.length===0&&!T.fen)throw new Error("");o(T),c()}catch{y("")}};return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl w-full max-w-lg mx-4 flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-zinc-800 flex justify-between items-center",children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:""}),l.jsx("button",{onClick:c,className:"text-zinc-500 hover:text-white",children:l.jsx(nn,{size:20})})]}),l.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[l.jsx("div",{className:"text-sm text-zinc-400 mb-2",children:"PGN (/ICCS/WXF),  DhtmlXQ ()"}),l.jsxs("div",{className:`
                            relative h-40 rounded-xl border-2 border-dashed flex flex-col items-center justify-center gap-3 transition-all
                            ${f?"border-amber-500 bg-amber-900/10":"border-zinc-700 bg-zinc-950/50 hover:bg-zinc-900 hover:border-zinc-500"}
                        `,onDragEnter:S,onDragLeave:S,onDragOver:S,onDrop:L,children:[l.jsx(Lo,{size:32,className:f?"text-amber-500":"text-zinc-500"}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-sm font-medium text-zinc-300",children:""}),l.jsx("button",{onClick:()=>{var T;return(T=N.current)==null?void 0:T.click()},className:"mt-2 px-4 py-1.5 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded shadow-lg transition-colors",children:""})]}),l.jsx("p",{className:"text-[10px] text-zinc-500",children:" .pgn, .txt, .dhtmlxq "}),l.jsx("input",{ref:N,type:"file",className:"hidden",accept:".pgn,.txt,.dhtmlxq",onChange:V})]}),l.jsxs("div",{className:"relative flex items-center py-2",children:[l.jsx("div",{className:"grow border-t border-zinc-800"}),l.jsx("span",{className:"shrink-0 mx-4 text-xs text-zinc-500",children:" "}),l.jsx("div",{className:"grow border-t border-zinc-800"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("textarea",{value:h,onChange:T=>{x(T.target.value),y(null)},className:"w-full h-32 bg-zinc-950 border border-zinc-700 rounded-lg p-3 text-xs font-mono text-zinc-300 focus:border-amber-500 focus:outline-none resize-none placeholder-zinc-600",placeholder:" PGN  DhtmlXQ ..."}),v&&l.jsxs("div",{className:"text-red-400 text-xs flex items-center gap-1",children:[l.jsx(qu,{size:12})," ",v]})]})]}),l.jsxs("div",{className:"p-4 border-t border-zinc-800 bg-zinc-900/50 flex justify-end gap-3",children:[l.jsx("button",{onClick:c,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded font-medium text-sm",children:""}),l.jsx("button",{onClick:G,disabled:!h.trim(),className:"px-6 py-2 bg-green-600 hover:bg-green-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded font-bold text-sm shadow-lg",children:""})]})]})})},Rs=(d,c)=>{const o=["A","B","C","D","E","F","G","H","I"],f=9-d;return`${o[c]}${f}`},Ou=(d,c)=>`${c}${9-d}`,Ls={generateDhtmlXQ(d,c){let o=`[DhtmlXQ]
`;if(o+=`[DhtmlXQ_ver]www_dpxq_com[/DhtmlXQ_ver]
`,o+=`[DhtmlXQ_init]500,350[/DhtmlXQ_init]
`,o+=`[DhtmlXQ_pver]1300700002[/DhtmlXQ_pver]
`,c.title&&(o+=`[DhtmlXQ_title]${c.title}[/DhtmlXQ_title]
`),c.event&&(o+=`[DhtmlXQ_event]${c.event}[/DhtmlXQ_event]
`),c.date&&(o+=`[DhtmlXQ_date]${c.date}[/DhtmlXQ_date]
`),c.redName&&(o+=`[DhtmlXQ_red]${c.redName}[/DhtmlXQ_red]
`),c.blackName&&(o+=`[DhtmlXQ_black]${c.blackName}[/DhtmlXQ_black]
`),c.result!=="unknown"&&(o+=`[DhtmlXQ_result]${{red:"",black:"",draw:""}[c.result]||""}[/DhtmlXQ_result]
`),d.boardState){const N=this.generateBinit(d.boardState);o+=`[DhtmlXQ_binit]${N}[/DhtmlXQ_binit]
`}d.fen&&(o+=`[DhtmlXQ_fen]${d.fen}[/DhtmlXQ_fen]
`);const f=d.turn==="black"?1:0;o+=`[DhtmlXQ_firstnum]${f}[/DhtmlXQ_firstnum]
`;const u=[],h=[];let x=0;d.comment&&h.push(`[DhtmlXQ_comment0]${d.comment.replace(/\n/g,"||")}[/DhtmlXQ_comment0]`);const v=[],y=(N,S,k,L)=>{let V="",G=N,T=0;for(;G;){if(G.move){const _=G.move.from,K=G.move.to;V+=`${Ou(_.r,_.c)}${Ou(K.r,K.c)}`}if(G.comment){const _=k+T,K=L===0?`[DhtmlXQ_comment${_}]`:`[DhtmlXQ_comment${L}_${_}]`;h.push(`${K}${G.comment.replace(/\n/g,"||")}${K.replace("[","[/")}`)}if(G.children.length>1)for(let _=1;_<G.children.length;_++){const K=G.children[_];x++,v.push({node:K,parentIdx:L,parentSteps:k+T+1,branchIdx:x})}G=G.children&&G.children.length>0?G.children[0]:null,G&&T++}L===0?u.push(`[DhtmlXQ_movelist]${V}[/DhtmlXQ_movelist]`):u.push(`[DhtmlXQ_move_${S}_${k}_${L}]${V}[/DhtmlXQ_move_${S}_${k}_${L}]`)};if(d.children&&d.children.length>0){y(d.children[0],0,1,0);for(let N=1;N<d.children.length;N++)x++,v.push({node:d.children[N],parentIdx:0,parentSteps:1,branchIdx:x})}else u.push("[DhtmlXQ_movelist][/DhtmlXQ_movelist]");for(;v.length>0;){const N=v.shift();y(N.node,N.parentIdx,N.parentSteps,N.branchIdx)}return o+=u.join(`
`)+`
`,o+=h.join(`
`)+`
`,o+=`[DhtmlXQ_generator]AI_Studio_CloudNote[/DhtmlXQ_generator]
`,o+="[/DhtmlXQ]",o},generateBinit(d){const c=Array(32).fill("99"),o=(u,h)=>{const x=[];for(let v=0;v<10;v++)for(let y=0;y<9;y++){const N=d[v][y];N&&N.color===u&&N.type===h&&x.push({r:v,c:y})}return x.sort((v,y)=>v.r-y.r||v.c-y.c)},f=(u,h)=>{const x=(v,y)=>{const N=o(u,v);y.forEach((S,k)=>{N[k]&&(c[h+S]=`${N[k].c}${9-N[k].r}`)})};x("chariot",[0,8]),x("horse",[1,7]),x("elephant",[2,6]),x("advisor",[3,5]),x("king",[4]),x("cannon",[9,10]),x("soldier",[11,12,13,14,15])};return f("black",0),f("red",16),c.join("")},generatePGN(d,c){var N;let o="";c.result==="red"?o="":c.result==="black"?o="":c.result==="draw"&&(o="");const f=`${c.redName||""} ${o} ${c.blackName||""}`;let u="";u+=`[Game "Chinese Chess"]
`,u+=`[Title "${c.title||f}"]
`,u+=`[Event "${c.event||""}"]
`,u+=`[Red "${c.redName||"Unknown"}"]
`,u+=`[RedTeam ""]
`,u+=`[Black "${c.blackName||"Unknown"}"]
`,u+=`[BlackName ""]
`,u+=`[Opening "${c.title||""}"]
`,u+=`[Date "${((N=c.date)==null?void 0:N.replace(/-/g,"."))||""}"]
`,u+=`[Site ""]
`,u+=`[Round ""]
`,u+=`[Format "ICCS"]
`;let h="*";c.result==="red"?h="1-0":c.result==="black"?h="0-1":c.result==="draw"&&(h="1/2-1/2"),u+=`[Result "${h}"]
`,d.fen&&d.fen.split(" ")[0]!=="rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR w - - 0 1".split(" ")[0]&&(u+=`[FEN "${d.fen}"]
`),u+=`
`;const v=[];let y=d;if(d.children.length>0)for(y=d.selectedChildId?d.children.find(S=>S.id===d.selectedChildId):d.children[0];y;)y.move&&v.push(this.getPgnMoveString(y)),y.children.length>0?y=y.selectedChildId?y.children.find(S=>S.id===y.selectedChildId):y.children[0]:y=null;for(let S=0;S<v.length;S+=2){const k=Math.floor(S/2)+1,L=v[S],V=v[S+1]||"";u+=`${k}. ${L} ${V}`,S+2>=v.length?u+=` ${h}
`:u+=`
`}return v.length===0&&(u+=h+`
`),u},getPgnMoveString(d){if(!d.move)return"00-00";const{from:c,to:o}=d.move;return`${Rs(c.r,c.c)}-${Rs(o.r,o.c)}`},generateText(d,c){let o="";c.title&&(o+=`${c.title}
`),c.redName&&(o+=`${c.redName}
`),c.blackName&&(o+=`${c.blackName}
`),c.result!=="unknown"&&(o+=`${c.result==="red"?"":c.result==="black"?"":""}
`),o+=`
`;let f=d;const u=[];for(;f.children.length>0;){const h=f.selectedChildId?f.children.find(x=>x.id===f.selectedChildId):f.children[0];if(!h||!h.move)break;u.push(h.move.notation),f=h}for(let h=0;h<u.length;h+=2){const x=u[h],v=u[h+1]||"";o+=`${Math.floor(h/2)+1}. ${x}  ${v}
`}return o},generateFenMove(d){let o=`${d.fen} moves`,f=d;for(;f.children.length>0;){const u=f.selectedChildId?f.children.find(y=>y.id===f.selectedChildId):f.children[0];if(!u||!u.move)break;const h=u.move.from,x=u.move.to,v=`${Rs(h.r,h.c).toLowerCase()}${Rs(x.r,x.c).toLowerCase()}`;o+=` ${v}`,f=u}return o}},J0=({isOpen:d,onClose:c,rootNode:o,metadata:f})=>{const[u,h]=C.useState("DhtmlXQ"),[x,v]=C.useState(""),[y,N]=C.useState(!1);if(C.useEffect(()=>{if(!d)return;let L="";try{switch(u){case"DhtmlXQ":L=Ls.generateDhtmlXQ(o,f);break;case"Text":L=Ls.generateText(o,f);break;case"FenMove":L=Ls.generateFenMove(o);break;case"PGN":L=Ls.generatePGN(o,f);break}}catch(V){console.error("Export generation failed:",V),L="Error generating export."}v(L),N(!1)},[d,u,o,f]),!d)return null;const S=L=>{navigator.clipboard.writeText(L),N(!0),setTimeout(()=>N(!1),2e3)},k=()=>{const L=new Blob([x],{type:"text/plain"}),V=URL.createObjectURL(L),G=document.createElement("a");G.href=V;const T=(f.title||"chess_game").replace(/\s+/g,"_");G.download=`${T}.pgn`,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(V)};return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl w-full max-w-xl mx-4 flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-zinc-800 flex justify-between items-center bg-zinc-900",children:[l.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[l.jsx(Z0,{className:"text-blue-500"})," "]}),l.jsx("button",{onClick:c,className:"text-zinc-500 hover:text-white",children:l.jsx(nn,{size:20})})]}),l.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-zinc-400",children:" FEN"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",readOnly:!0,value:o.fen,className:"flex-1 bg-zinc-950 border border-zinc-700 rounded px-3 py-2 text-xs font-mono text-zinc-300 focus:outline-none"}),l.jsx("button",{onClick:()=>S(o.fen),className:"px-3 bg-blue-600 hover:bg-blue-500 text-white rounded flex items-center justify-center",children:l.jsx($s,{size:16})})]})]}),l.jsx("div",{className:"border-t border-zinc-800 my-2"}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("label",{className:"text-sm font-bold text-zinc-400",children:""}),l.jsx("div",{className:"relative",children:l.jsxs("select",{value:u,onChange:L=>h(L.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-40 p-2 appearance-none cursor-pointer",children:[l.jsx("option",{value:"DhtmlXQ",children:"UBB"}),l.jsx("option",{value:"Text",children:"TXT"}),l.jsx("option",{value:"FenMove",children:"Fen&Move"}),l.jsx("option",{value:"PGN",children:"PGN"})]})})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("textarea",{readOnly:!0,value:x,className:"w-full h-48 bg-zinc-950 border border-zinc-700 rounded-lg p-3 text-xs font-mono text-zinc-300 focus:outline-none resize-none custom-scrollbar"}),l.jsx("button",{onClick:()=>S(x),className:"absolute top-2 right-2 p-2 bg-zinc-800 hover:bg-blue-600 text-zinc-400 hover:text-white rounded border border-zinc-700 transition-colors shadow-lg",title:"",children:y?l.jsx(yr,{size:16}):l.jsx($s,{size:16})})]}),u==="PGN"&&l.jsx("div",{className:"flex justify-center",children:l.jsxs("button",{onClick:k,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-lg shadow-lg flex items-center justify-center gap-2 transition-colors",children:[l.jsx(As,{size:18}),"  PGN "]})})]})]})})},Z0=({className:d})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:d,children:[l.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),l.jsx("path",{d:"M12 12v9"}),l.jsx("path",{d:"m16 16-4-4-4 4"})]}),eh=`// gif.worker.js 0.2.0 - https://github.com/jnordberg/gif.js
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var NeuQuant=require("./TypedNeuQuant.js");var LZWEncoder=require("./LZWEncoder.js");function ByteArray(){this.page=-1;this.pages=[];this.newPage()}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0};ByteArray.prototype.getData=function(){var rv="";for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]]}}return rv};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i))};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i])};function GIFEncoder(width,height){this.width=~~width;this.height=~~height;this.transparent=null;this.transIndex=0;this.repeat=-1;this.delay=0;this.image=null;this.pixels=null;this.indexedPixels=null;this.colorDepth=null;this.colorTab=null;this.neuQuant=null;this.usedEntry=new Array;this.palSize=7;this.dispose=-1;this.firstFrame=true;this.sample=10;this.dither=false;this.globalPalette=false;this.out=new ByteArray}GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10)};GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps)};GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode};GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat};GIFEncoder.prototype.setTransparent=function(color){this.transparent=color};GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();this.analyzePixels();if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();this.writePalette();if(this.repeat>=0){this.writeNetscapeExt()}}this.writeGraphicCtrlExt();this.writeImageDesc();if(!this.firstFrame&&!this.globalPalette)this.writePalette();this.writePixels();this.firstFrame=false};GIFEncoder.prototype.finish=function(){this.out.writeByte(59)};GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality};GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither="FloydSteinberg";this.dither=dither};GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette};GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant(this.pixels,this.sample);this.neuQuant.buildColormap();this.colorTab=this.neuQuant.getColormap()}if(this.dither){this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null)}else{this.indexPixels()}this.pixels=null;this.colorDepth=8;this.palSize=7;if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true)}};GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&255,this.pixels[k++]&255,this.pixels[k++]&255);this.usedEntry[index]=true;this.indexedPixels[j]=index}};GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw"Unknown dithering kernel: "+kernel}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d))}}}}};GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&16711680)>>16,(c&65280)>>8,c&255,used)};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return-1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b)}var c=b|g<<8|r<<16;var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&255);var dg=g-(this.colorTab[i++]&255);var db=b-(this.colorTab[i++]&255);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index}}return minpos};GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++}}};GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33);this.out.writeByte(249);this.out.writeByte(4);var transp,disp;if(this.transparent===null){transp=0;disp=0}else{transp=1;disp=2}if(this.dispose>=0){disp=dispose&7}disp<<=2;this.out.writeByte(0|disp|0|transp);this.writeShort(this.delay);this.out.writeByte(this.transIndex);this.out.writeByte(0)};GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(44);this.writeShort(0);this.writeShort(0);this.writeShort(this.width);this.writeShort(this.height);if(this.firstFrame||this.globalPalette){this.out.writeByte(0)}else{this.out.writeByte(128|0|0|0|this.palSize)}};GIFEncoder.prototype.writeLSD=function(){this.writeShort(this.width);this.writeShort(this.height);this.out.writeByte(128|112|0|this.palSize);this.out.writeByte(0);this.out.writeByte(0)};GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(33);this.out.writeByte(255);this.out.writeByte(11);this.out.writeUTFBytes("NETSCAPE2.0");this.out.writeByte(3);this.out.writeByte(1);this.writeShort(this.repeat);this.out.writeByte(0)};GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0)};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&255);this.out.writeByte(pValue>>8&255)};GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out)};GIFEncoder.prototype.stream=function(){return this.out};module.exports=GIFEncoder},{"./LZWEncoder.js":2,"./TypedNeuQuant.js":3}],2:[function(require,module,exports){var EOF=-1;var BITS=12;var HSIZE=5003;var masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;var maxcode;var clear_flg=false;var g_init_bits,ClearCode,EOFCode;function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs)}function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs)}function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;g_init_bits=init_bits;clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;hsize_reg=HSIZE;cl_hash(hsize_reg);output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;if(htab[i]===fcode){ent=codetab[i];continue}else if(htab[i]>=0){disp=hsize_reg-i;if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop}}while(htab[i]>=0)}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;htab[i]=fcode}else{cl_block(outs)}}output(ent,outs);output(EOFCode,outs)}function encode(outs){outs.writeByte(initCodeSize);remaining=width*height;curPixel=0;compress(initCodeSize+1,outs);outs.writeByte(0)}function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0}}function MAXCODE(n_bits){return(1<<n_bits)-1}function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&255}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false}else{++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits)}}if(code==EOFCode){while(cur_bits>0){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}flush_char(outs)}}this.encode=encode}module.exports=LZWEncoder},{}],3:[function(require,module,exports){var ncycles=100;var netsize=256;var maxnetpos=netsize-1;var netbiasshift=4;var intbiasshift=16;var intbias=1<<intbiasshift;var gammashift=10;var gamma=1<<gammashift;var betashift=10;var beta=intbias>>betashift;var betagamma=intbias<<gammashift-betashift;var initrad=netsize>>3;var radiusbiasshift=6;var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;var radiusdec=30;var alphabiasshift=10;var initalpha=1<<alphabiasshift;var alphadec;var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;function NeuQuant(pixels,samplefac){var network;var netindex;var bias;var freq;var radpower;function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);freq[i]=intbias/netsize;bias[i]=0}}function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i}}function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha}function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}}}function contest(b,g,r){var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos}function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){smallpos=j;smallval=q[1]}}q=network[smallpos];if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j}if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos}function inxsearch(b,g,r){var a,p,dist;var bestd=1e3;var best=-1;var i=netindex[g];var j=i-1;while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;if(dist>=bestd)i=netsize;else{i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}if(j>=0){p=network[j];dist=g-p[1];if(dist>=bestd)j=-1;else{j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}}return best}function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3}else if(lengthcount%prime1!==0){step=3*prime1}else if(lengthcount%prime2!==0){step=3*prime2}else if(lengthcount%prime3!==0){step=3*prime3}else{step=3*prime4}var b,g,r,j;var pix=0;i=0;while(i<samplepixels){b=(pixels[pix]&255)<<netbiasshift;g=(pixels[pix+1]&255)<<netbiasshift;r=(pixels[pix+2]&255)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad))}}}function buildColormap(){init();learn();unbiasnet();inxbuild()}this.buildColormap=buildColormap;function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2]}return map}this.getColormap=getColormap;this.lookupRGB=inxsearch}module.exports=NeuQuant},{}],4:[function(require,module,exports){var GIFEncoder,renderFrame;GIFEncoder=require("./GIFEncoder.js");renderFrame=function(frame){var encoder,page,stream,transfer;encoder=new GIFEncoder(frame.width,frame.height);if(frame.index===0){encoder.writeHeader()}else{encoder.firstFrame=false}encoder.setTransparent(frame.transparent);encoder.setRepeat(frame.repeat);encoder.setDelay(frame.delay);encoder.setQuality(frame.quality);encoder.setDither(frame.dither);encoder.setGlobalPalette(frame.globalPalette);encoder.addFrame(frame.data);if(frame.last){encoder.finish()}if(frame.globalPalette===true){frame.globalPalette=encoder.getGlobalPalette()}stream=encoder.stream();frame.data=stream.pages;frame.cursor=stream.cursor;frame.pageSize=stream.constructor.pageSize;if(frame.canTransfer){transfer=function(){var i,len,ref,results;ref=frame.data;results=[];for(i=0,len=ref.length;i<len;i++){page=ref[i];results.push(page.buffer)}return results}();return self.postMessage(frame,transfer)}else{return self.postMessage(frame)}};self.onmessage=function(event){return renderFrame(event.data)}},{"./GIFEncoder.js":1}]},{},[4]);
//# sourceMappingURL=gif.worker.js.map
`,th=async(d,c,o,f,u)=>{if(!window.GIF)throw new Error("GIF Library not loaded. Please refresh the page.");const h=40,x=f.width,v=Math.floor((x-h*2)/8),y=Math.floor((v*8+h*2)/8)*8,N=v*9+h*2,S=24,k=Math.floor(v*.9),L=o.title?1:0,V=o.redName||o.blackName?1:0;let G=0;L+V>0&&(G=S+L*Math.floor(k*1.3)+V*k+S);const T=Math.ceil((G+N)/8)*8,_=new Blob([eh],{type:"application/javascript"}),K=URL.createObjectURL(_),U=new window.GIF({workers:2,quality:10,workerScript:K,width:y,height:T,transparent:null}),H=document.createElement("canvas");H.width=y,H.height=T;const w=H.getContext("2d",{willReadFrequently:!0});if(!w)throw new Error("Could not create canvas");const I=O=>{w.save(),w.fillStyle="#18181b",w.fillRect(0,0,y,G);const se=G,ee=w.createLinearGradient(0,se,0,T);ee.addColorStop(0,"#cbbfa0"),ee.addColorStop(1,"#bba98b"),w.fillStyle=ee,w.fillRect(0,se,y,N);let ce=S;w.textAlign="center",w.textBaseline="top";const F=`bold ${Math.floor(v*.55)}px "KaiTi", "STKaiti", "Microsoft JhengHei", sans-serif`;if(o.title&&(w.font=`bold ${Math.floor(v*.65)}px "KaiTi", "STKaiti", "Microsoft JhengHei", sans-serif`,w.fillStyle="#fbbf24",w.fillText(o.title,y/2,ce),ce+=Math.floor(k*1.3)),V>0){w.font=F;const z=y/2,D=Math.floor(v*.8),$=o.redName||"",p=o.blackName||"",M=o.result;$&&(w.textAlign="right",w.fillStyle="#f87171",w.fillText($,z-D/2,ce));let le="",xe="#71717a",Ce="";if(M==="red"?$&&(le="",xe="#ef4444"):M==="black"?$?(le="",xe="#22c55e"):p&&(Ce=" "):M==="draw"?($||p)&&(!$&&p?Ce=" ":(le="",xe="#3b82f6")):$&&p&&(le="VS"),le&&(w.textAlign="center",w.fillStyle=xe,w.fillText(le,z,ce)),p){w.textAlign="left",w.fillStyle="#a1a1aa";const $e=p+Ce;w.fillText($e,z+D/2,ce)}}w.translate(h,se+h),w.strokeStyle="#3d2b1f",w.lineWidth=1.6;for(let z=0;z<10;z++)w.beginPath(),w.moveTo(0,Math.floor(z*v)),w.lineTo(Math.floor(8*v),Math.floor(z*v)),w.stroke();for(let z=0;z<9;z++){const D=Math.floor(z*v);z===0||z===8?(w.beginPath(),w.moveTo(D,0),w.lineTo(D,Math.floor(9*v)),w.stroke()):(w.beginPath(),w.moveTo(D,0),w.lineTo(D,Math.floor(4*v)),w.stroke(),w.beginPath(),w.moveTo(D,Math.floor(5*v)),w.lineTo(D,Math.floor(9*v)),w.stroke())}const fe=z=>{const D=Math.floor(z*v),$=Math.floor((z+2)*v),p=Math.floor(3*v),M=Math.floor(5*v);w.beginPath(),w.moveTo(p,D),w.lineTo(M,$),w.stroke(),w.beginPath(),w.moveTo(M,D),w.lineTo(p,$),w.stroke()};fe(0),fe(7);const X=(z,D,$,p)=>{const M=Math.floor(v*.18),le=Math.floor(v*.08);w.lineWidth=1.2,$||(w.beginPath(),w.moveTo(z-le-M,D-le),w.lineTo(z-le,D-le),w.lineTo(z-le,D-le-M),w.stroke(),w.beginPath(),w.moveTo(z-le-M,D+le),w.lineTo(z-le,D+le),w.lineTo(z-le,D+le+M),w.stroke()),p||(w.beginPath(),w.moveTo(z+le+M,D-le),w.lineTo(z+le,D-le),w.lineTo(z+le,D-le-M),w.stroke(),w.beginPath(),w.moveTo(z+le+M,D+le),w.lineTo(z+le,D+le),w.lineTo(z+le,D+le+M),w.stroke())};[[1,2],[7,2],[1,7],[7,7]].forEach(([z,D])=>{X(Math.floor(z*v),Math.floor(D*v),z===0,z===8)}),[[0,3],[2,3],[4,3],[6,3],[8,3],[0,6],[2,6],[4,6],[6,6],[8,6]].forEach(([z,D])=>{X(Math.floor(z*v),Math.floor(D*v),z===0,z===8)}),w.font=`bold ${Math.floor(v*.55)}px "KaiTi", serif`,w.fillStyle="#3d2b1f",w.textAlign="center",w.textBaseline="middle";const W=Math.floor(4.5*v);w.fillText(" ",Math.floor(2*v),W),w.fillText(" ",Math.floor(6*v),W);for(let z=0;z<10;z++)for(let D=0;D<9;D++){const $=O[z][D];if($){const p=Math.floor(D*v),M=Math.floor(z*v),le=Math.floor(v*.45);if(w.save(),w.shadowColor="rgba(0,0,0,0.3)",w.shadowBlur=4,w.shadowOffsetY=2,w.beginPath(),w.arc(p,M,le,0,Math.PI*2),$.color==="red")w.fillStyle="#fdfdfd",w.strokeStyle="#a61c1c";else{const Ce=w.createRadialGradient(p-3,M-3,2,p,M,le);Ce.addColorStop(0,"#2563eb"),Ce.addColorStop(1,"#1e3a8a"),w.fillStyle=Ce,w.strokeStyle="#000000"}w.fill(),w.shadowColor="transparent",w.lineWidth=2.5,w.stroke(),$.color==="red"?(w.beginPath(),w.arc(p,M,le-4,0,Math.PI*2),w.lineWidth=1,w.strokeStyle="#e5e5e5",w.stroke(),w.fillStyle="#a61c1c"):w.fillStyle="#ffffff";const xe=Math.floor(v*.65);w.font=`bold ${xe}px "KaiTi", serif`,w.textBaseline="middle",w.fillText($.text,p,M+Math.floor(v*.05)),w.restore()}}w.restore()},B=Math.max(0,f.startRound),re=Math.min(c.length-1,f.endRound),de=re-B+1;for(let O=B;O<=re;O++){const se=c[O],ee=Math.round((O-B)/de*90);u(ee,` ${O} ...`),w.fillStyle="#18181b",w.fillRect(0,0,y,T),I(se.boardState);const ce=O===re?3e3:f.interval*1e3;U.addFrame(H,{copy:!0,delay:ce}),await new Promise(ie=>setTimeout(ie,0))}return u(95," ()..."),new Promise((O,se)=>{U.on("finished",ee=>{URL.revokeObjectURL(K),u(100,""),O(ee)}),U.on("abort",()=>{URL.revokeObjectURL(K),se("")}),U.render()})},nh=({isOpen:d,onClose:c,activePath:o,rootNode:f,metadata:u})=>{const h=o.length-1,[x,v]=C.useState(0),[y,N]=C.useState(h),[S,k]=C.useState(1),[L,V]=C.useState(5),[G,T]=C.useState(480),[_,K]=C.useState(!1),[U,H]=C.useState(0),[w,I]=C.useState(""),[B,re]=C.useState(null);if(C.useEffect(()=>{d&&(N(o.length-1),v(0),re(null),H(0),K(!1))},[d,o.length]),!d)return null;const de=async()=>{if(x>y){alert("");return}K(!0),re(null);try{const ee=await th(f,o,u,{startRound:x,endRound:y,interval:S,quality:L,width:G},(ce,ie)=>{H(ce),I(ie)});re(ee)}catch(ee){console.error(ee),I("")}finally{K(!1)}},O=()=>{if(!B)return;const ee=URL.createObjectURL(B),ce=document.createElement("a");ce.href=ee;const ie=(u.title||"chess_game").replace(/\s+/g,"_")+".gif";ce.download=ie,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),URL.revokeObjectURL(ee),c()},se=[{label:" ()",val:1},{label:"",val:5},{label:" ()",val:10}];return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl w-full max-w-md mx-4 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-zinc-800 flex justify-between items-center bg-zinc-900",children:[l.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[l.jsx(zu,{className:"text-pink-500"}),"  GIF"]}),!_&&l.jsx("button",{onClick:c,className:"text-zinc-500 hover:text-white",children:l.jsx(nn,{size:20})})]}),l.jsx("div",{className:"p-6 space-y-6",children:!B&&!_?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between text-sm font-bold text-zinc-400",children:[l.jsx("span",{children:""}),l.jsxs("span",{className:"text-pink-400",children:[x," - ",y]})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"number",min:"0",max:y,value:x,onChange:ee=>v(Math.min(parseInt(ee.target.value)||0,y)),className:"w-16 bg-zinc-950 border border-zinc-700 rounded p-1 text-center text-sm"}),l.jsx("div",{className:"flex-1 relative h-2 bg-zinc-800 rounded-full",children:l.jsx("div",{className:"absolute h-full bg-pink-600/50 rounded-full",style:{left:`${x/h*100}%`,width:`${(y-x)/h*100}%`}})}),l.jsx("input",{type:"number",min:x,max:h,value:y,onChange:ee=>N(Math.min(parseInt(ee.target.value)||0,h)),className:"w-16 bg-zinc-950 border border-zinc-700 rounded p-1 text-center text-sm"})]})]}),l.jsx("hr",{className:"border-zinc-800"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-xs font-bold text-zinc-500 flex items-center gap-1",children:[l.jsx(Gu,{size:12}),"  ()"]}),l.jsxs("select",{value:S.toString(),onChange:ee=>k(parseFloat(ee.target.value)),className:"w-full bg-zinc-800 border border-zinc-700 rounded px-2 py-1.5 text-sm text-zinc-200 cursor-pointer",children:[l.jsx("option",{value:"0.5",children:"0.5  ()"}),l.jsx("option",{value:"1",children:"1.0  ()"}),l.jsx("option",{value:"1.5",children:"1.5  ()"}),l.jsx("option",{value:"2",children:"2.0  ()"}),l.jsx("option",{value:"3",children:"3.0  ()"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-xs font-bold text-zinc-500 flex items-center gap-1",children:[l.jsx(Io,{size:12})," "]}),l.jsx("select",{value:L,onChange:ee=>V(parseInt(ee.target.value)),className:"w-full bg-zinc-800 border border-zinc-700 rounded px-2 py-1.5 text-sm text-zinc-200 cursor-pointer",children:se.map(ee=>l.jsx("option",{value:ee.val,children:ee.label},ee.val))})]})]}),l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-zinc-800/50 rounded-lg text-xs text-zinc-400 border border-zinc-800",children:[l.jsx(yr,{size:14,className:"text-green-500"}),l.jsx("span",{children:""})]})]}):_?l.jsxs("div",{className:"py-8 flex flex-col items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-zinc-800 border-t-pink-500 rounded-full animate-spin"}),l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-white",children:[Math.round(U),"%"]}),l.jsx("div",{className:"text-sm text-zinc-500",children:w})]}),l.jsx("div",{className:"w-full h-1.5 bg-zinc-800 rounded-full overflow-hidden mt-4",children:l.jsx("div",{className:"h-full bg-pink-500 transition-all duration-300",style:{width:`${U}%`}})})]}):l.jsxs("div",{className:"py-6 flex flex-col items-center gap-4 text-center animate-in zoom-in-95",children:[l.jsx("div",{className:"w-16 h-16 bg-green-500/20 text-green-500 rounded-full flex items-center justify-center mb-2",children:l.jsx(yr,{size:32})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:"GIF "}),l.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:""})]})]})}),l.jsxs("div",{className:"p-4 border-t border-zinc-800 bg-zinc-900/50 flex justify-end gap-3",children:[!_&&!B&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:c,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded font-medium text-sm transition-colors",children:""}),l.jsxs("button",{onClick:de,className:"px-6 py-2 bg-pink-600 hover:bg-pink-500 text-white rounded font-bold text-sm shadow-lg shadow-pink-900/20 transition-all active:scale-95 flex items-center gap-2",children:[l.jsx(zu,{size:16})," "]})]}),B&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>re(null),className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded font-medium text-sm transition-colors",children:""}),l.jsxs("button",{onClick:O,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded font-bold text-sm shadow-lg transition-all active:scale-95 flex items-center gap-2",children:[l.jsx(As,{size:16}),"  GIF"]})]})]})]})})},rh=({tabs:d,activeTabId:c,onSwitch:o,onAdd:f,onDelete:u,onRename:h,onReorder:x,onColorChange:v,isLocked:y=!1})=>{const[N,S]=C.useState(!1),[k,L]=C.useState(null),[V,G]=C.useState(""),T=C.useRef(null),_=C.useRef(null),K=d.find(B=>B.id===c);if(!K&&d.length>0,d.length===0||!K)return l.jsx("div",{className:"p-4 text-zinc-500 text-sm",children:"..."});const U=K;C.useEffect(()=>{const B=re=>{T.current&&!T.current.contains(re.target)&&S(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]),C.useEffect(()=>{k&&_.current&&(_.current.focus(),_.current.select())},[k]);const H=(B,re)=>{re.stopPropagation(),L(B.id),G(B.title)},w=()=>{k&&V.trim()&&h(k,V.trim()),L(null)},I=B=>{switch(B){case"blue":return"bg-blue-500";case"green":return"bg-green-500";case"red":return"bg-red-500";case"orange":return"bg-orange-500";case"purple":return"bg-purple-500";case"teal":return"bg-teal-500";case"dark":return"bg-zinc-500";case"pink":return"bg-pink-400";case"yellow":return"bg-yellow-400";case"coffee":return"bg-amber-700";default:return"bg-zinc-600"}};return l.jsxs("div",{className:"w-full bg-[#1e1e20] border-b border-zinc-800 flex flex-col shrink-0 relative z-20",ref:T,children:[l.jsxs("div",{className:"flex items-center gap-1 p-2",children:[l.jsxs("button",{onClick:()=>S(!N),className:"flex-1 flex items-center justify-between bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded-lg px-3 py-2 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${I(U.colorTag)}`}),l.jsx("span",{className:"font-bold text-zinc-200 text-sm truncate max-w-[140px]",children:U.title||""}),l.jsxs("span",{className:"text-[10px] text-zinc-500 px-1 border border-zinc-700 rounded",children:[d.findIndex(B=>B.id===c)+1,"/",d.length]})]}),l.jsx(Fo,{size:14,className:`text-zinc-500 transition-transform ${N?"rotate-180":""}`})]}),l.jsx("button",{onClick:f,className:"p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg shadow-lg hover:shadow-blue-500/20 transition-all active:scale-95",title:"",children:l.jsx(Xu,{size:18})})]}),N?l.jsx("div",{className:"absolute top-full left-0 w-full bg-zinc-900 border-b border-r border-zinc-800 shadow-2xl max-h-[400px] overflow-y-auto custom-scrollbar animate-in slide-in-from-top-1",children:l.jsx("div",{className:"p-1 space-y-0.5",children:d.map((B,re)=>{const de=B.id===c;return l.jsxs("div",{onClick:()=>{o(B.id),S(!1)},className:`
                                        group flex items-center justify-between p-2 rounded-md cursor-pointer border
                                        ${de?"bg-blue-900/20 border-blue-800/50":"hover:bg-zinc-800 border-transparent hover:border-zinc-700"}
                                    `,children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[l.jsx("div",{className:`w-1.5 h-8 rounded-full shrink-0 ${de?"bg-blue-500":"bg-zinc-700 group-hover:bg-zinc-600"}`}),k===B.id?l.jsxs("div",{className:"flex items-center gap-1 flex-1",onClick:O=>O.stopPropagation(),children:[l.jsx("input",{ref:_,value:V,onChange:O=>G(O.target.value),onKeyDown:O=>O.key==="Enter"&&w(),onBlur:w,className:"w-full bg-zinc-950 border border-blue-500 rounded px-1 py-0.5 text-sm text-white focus:outline-none"}),l.jsx("button",{onClick:w,className:"text-green-500 hover:bg-zinc-800 p-1 rounded",children:l.jsx(yr,{size:14})})]}):l.jsxs("div",{className:"flex flex-col min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-sm font-medium truncate ${de?"text-blue-100":"text-zinc-300"}`,children:B.title}),l.jsx("div",{className:`w-2 h-2 rounded-full ${I(B.colorTag)}`})]}),l.jsxs("span",{className:"text-[10px] text-zinc-600 truncate",children:[B.metadata.redName||""," vs ",B.metadata.blackName||"","  ",new Date(B.createdAt).toLocaleDateString()]})]})]}),l.jsxs("div",{className:`flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ${de?"opacity-100":""}`,children:[l.jsxs("select",{value:B.colorTag||"none",onClick:O=>O.stopPropagation(),onChange:O=>{v(B.id,O.target.value)},className:"bg-zinc-800 border border-zinc-700 text-zinc-300 text-[10px] rounded px-1 py-0.5 focus:outline-none focus:ring-1 focus:ring-blue-500",title:"",children:[l.jsx("option",{value:"none",children:" "}),l.jsx("option",{value:"blue",children:" "}),l.jsx("option",{value:"green",children:" "}),l.jsx("option",{value:"red",children:" "}),l.jsx("option",{value:"orange",children:" "}),l.jsx("option",{value:"purple",children:" "}),l.jsx("option",{value:"teal",children:" "}),l.jsx("option",{value:"dark",children:" "}),l.jsx("option",{value:"pink",children:" "}),l.jsx("option",{value:"yellow",children:" "}),l.jsx("option",{value:"coffee",children:" "})]}),l.jsx("button",{onClick:O=>H(B,O),className:"p-1.5 hover:bg-zinc-700 text-zinc-500 hover:text-blue-400 rounded",title:"",children:l.jsx(Wu,{size:13})}),l.jsxs("div",{className:"flex flex-col gap-0.5",children:[l.jsx("button",{onClick:O=>{O.stopPropagation(),x(B.id,"up")},className:"p-0.5 hover:bg-zinc-700 text-zinc-600 hover:text-zinc-300 rounded disabled:opacity-30",disabled:re===0,children:l.jsx(wu,{size:10})}),l.jsx("button",{onClick:O=>{O.stopPropagation(),x(B.id,"down")},className:"p-0.5 hover:bg-zinc-700 text-zinc-600 hover:text-zinc-300 rounded disabled:opacity-30",disabled:re===d.length-1,children:l.jsx(bu,{size:10})})]}),d.length>1&&l.jsx("button",{onClick:O=>{O.stopPropagation(),u(B.id)},className:"p-1.5 hover:bg-red-900/50 text-zinc-500 hover:text-red-400 rounded ml-1",title:"",children:l.jsx(Cl,{size:13})})]})]},B.id)})})}):l.jsxs("div",{className:"flex items-center justify-between px-2 pb-2 text-[10px] text-zinc-500",children:[l.jsx("div",{className:"flex gap-2",children:l.jsxs("span",{className:"flex items-center gap-1",children:["Alt+",l.jsx(wu,{size:10}),"/",l.jsx(bu,{size:10})," "]})}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>{S(!0),L(U.id),G(U.title)},className:"hover:text-zinc-300",children:""}),l.jsx("span",{className:"opacity-50",children:"|"}),l.jsx("button",{onClick:()=>u(U.id),className:"hover:text-red-400 disabled:opacity-50",disabled:d.length<=1,children:""})]})]})]})},lh=({isOpen:d,onClose:c,tabs:o,activeTabId:f,onSwitch:u,onAdd:h,onDelete:x})=>{if(!d)return null;const v=N=>{switch(N){case"blue":return"border-blue-500";case"green":return"border-green-500";case"red":return"border-red-500";case"orange":return"border-orange-500";case"purple":return"border-purple-500";case"teal":return"border-teal-500";case"dark":return"border-zinc-500";case"pink":return"border-pink-400";case"yellow":return"border-yellow-400";case"coffee":return"border-amber-700";default:return"border-zinc-700"}},y=N=>{switch(N){case"blue":return"text-blue-400";case"green":return"text-green-400";case"red":return"text-red-400";case"orange":return"text-orange-400";case"purple":return"text-purple-400";case"teal":return"text-teal-400";case"dark":return"text-zinc-400";case"pink":return"text-pink-400";case"yellow":return"text-yellow-400";case"coffee":return"text-amber-600";default:return"text-zinc-600"}};return l.jsxs("div",{className:"fixed inset-0 z-[70] bg-zinc-950 flex flex-col animate-in slide-in-from-bottom-5 duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-zinc-900 border-b border-zinc-800 shrink-0",children:[l.jsxs("h3",{className:"font-bold text-lg text-zinc-200",children:[" (",o.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:h,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg flex items-center gap-1 font-bold text-sm",children:[l.jsx(Xu,{size:16})," "]}),l.jsx("button",{onClick:c,className:"p-2 bg-zinc-800 rounded-lg text-zinc-400 hover:text-white",children:l.jsx(nn,{size:20})})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:l.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.map(N=>{const S=N.id===f;return l.jsxs("div",{onClick:()=>{u(N.id),c()},className:`
                                    relative flex flex-col aspect-[4/3] rounded-xl border-2 p-3 cursor-pointer transition-all
                                    ${S?"bg-zinc-800 border-blue-500 shadow-lg shadow-blue-900/20":`bg-zinc-900 ${v(N.colorTag)} hover:bg-zinc-800`}
                                `,children:[l.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center text-center gap-1",children:[l.jsx("div",{className:`w-10 h-10 rounded-full bg-zinc-950 flex items-center justify-center text-lg font-bold font-serif ${y(N.colorTag)} border border-zinc-800 mb-1`,children:""}),l.jsx("div",{className:"font-bold text-zinc-200 line-clamp-1 w-full px-1",children:N.title}),l.jsx("div",{className:"text-[10px] text-zinc-500",children:new Date(N.createdAt).toLocaleDateString()})]}),S&&l.jsx("div",{className:"absolute top-2 right-2 text-blue-500",children:l.jsx(c0,{size:18,fill:"currentColor",className:"text-zinc-900"})}),o.length>1&&!S&&l.jsx("button",{onClick:k=>{k.stopPropagation(),x(N.id)},className:"absolute top-2 right-2 p-1.5 text-zinc-600 hover:text-red-400 bg-zinc-950/50 rounded-full backdrop-blur-sm",children:l.jsx(Cl,{size:14})}),l.jsxs("div",{className:"mt-auto pt-2 border-t border-zinc-800/50 flex justify-between items-center text-[10px] text-zinc-500 w-full",children:[l.jsx("span",{className:"truncate max-w-[45%] text-red-900/70 font-bold",children:N.metadata.redName||""}),l.jsx("span",{children:"vs"}),l.jsx("span",{className:"truncate max-w-[45%] text-zinc-600 font-bold",children:N.metadata.blackName||""})]})]},N.id)})})})]})},sh=({isOpen:d,onClose:c,onStart:o})=>{const[f,u]=C.useState("red"),[h,x]=C.useState("main"),[v,y]=C.useState("");if(!d)return null;const N=()=>{o({side:f,mode:h,randomRange:v}),c()};return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl w-full max-w-sm mx-4 overflow-hidden",children:[l.jsxs("div",{className:"px-5 py-4 border-b border-zinc-800 bg-zinc-900 flex justify-between items-center",children:[l.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[l.jsx(Ds,{className:"text-amber-500",size:20}),""]}),l.jsx("button",{onClick:c,className:"text-zinc-500 hover:text-white",children:l.jsx(nn,{size:20})})]}),l.jsxs("div",{className:"p-5 space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-zinc-400",children:""}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:["red","black","both"].map(S=>l.jsx("button",{onClick:()=>u(S),className:`py-2 px-1 rounded-lg text-sm font-bold border transition-all ${f===S?"bg-amber-600/20 border-amber-500 text-amber-400":"bg-zinc-950 border-zinc-700 text-zinc-400 hover:border-zinc-500"}`,children:S==="red"?"":S==="black"?"":""},S))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-bold text-zinc-400",children:""}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:()=>x("main"),className:`py-2 rounded-lg text-sm font-bold border transition-all ${h==="main"?"bg-blue-600/20 border-blue-500 text-blue-400":"bg-zinc-950 border-zinc-700 text-zinc-400 hover:border-zinc-500"}`,children:""}),l.jsx("button",{onClick:()=>x("random"),className:`py-2 rounded-lg text-sm font-bold border transition-all ${h==="random"?"bg-purple-600/20 border-purple-500 text-purple-400":"bg-zinc-950 border-zinc-700 text-zinc-400 hover:border-zinc-500"}`,children:""})]})]}),h==="random"&&l.jsxs("div",{className:"space-y-2 animate-in slide-in-from-top-2",children:[l.jsxs("label",{className:"text-sm font-bold text-zinc-400 flex justify-between",children:[" ()",l.jsx("span",{className:"text-xs font-normal text-zinc-500",children:""})]}),l.jsx("input",{type:"text",value:v,onChange:S=>y(S.target.value.toUpperCase()),placeholder:": A-C  A,B,D",className:"w-full bg-zinc-950 border border-zinc-700 rounded-lg px-3 py-2 text-zinc-200 focus:outline-none focus:border-purple-500 uppercase font-mono placeholder:normal-case"}),l.jsx("p",{className:"text-xs text-zinc-500",children:"*  A, B, C... "})]})]}),l.jsxs("div",{className:"p-4 border-t border-zinc-800 bg-zinc-900/50 flex justify-end gap-3",children:[l.jsx("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white",children:""}),l.jsxs("button",{onClick:N,className:"px-6 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg font-bold shadow-lg shadow-amber-900/20 flex items-center gap-2",children:[l.jsx(Fs,{size:16,fill:"currentColor"})," "]})]})]})})},ih=({isOpen:d,onClose:c,errors:o,totalSteps:f,activePath:u,startNodeId:h,endNodeId:x})=>{const[v,y]=C.useState(!1);if(!d)return null;const N=o.reduce((U,H)=>U+H.count,0),S=Math.max(0,Math.round((f-N)/Math.max(f,1)*100));let k="S",L="text-yellow-400";S<60?(k="C",L="text-zinc-500"):S<80?(k="B",L="text-blue-400"):S<100&&(k="A",L="text-green-400");const V=u.findIndex(U=>U.id===h),G=u.findIndex(U=>U.id===x),T=u.filter(U=>U.move!==null),_=()=>{var w,I;let U=`:${k} :${f} :${N}

`;o.length>0&&(U+=`
`,o.forEach(B=>{U+=` ${B.round} :  ${B.count} 
`}),U+=`
`);let H=1;for(let B=0;B<T.length;B+=2){const re=T[B],de=T[B+1],O=u.findIndex(F=>F.id===re.id),se=de?u.findIndex(F=>F.id===de.id):-1,ee=(F,fe)=>fe<V||fe>G?"":o.find(W=>W.nodeId===F.parentId)?"()":"()",ce=ee(re,O),ie=de?ee(de,se):"";U+=`${H}. ${(w=re.move)==null?void 0:w.notation}${ce}  ${de?((I=de.move)==null?void 0:I.notation)+ie:""}
`,H++}return U},K=()=>{navigator.clipboard.writeText(_()),y(!0),setTimeout(()=>y(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in zoom-in-95 duration-300",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl w-full max-w-lg mx-4 overflow-hidden flex flex-col max-h-[85vh]",children:[l.jsxs("div",{className:"px-6 py-5 border-b border-zinc-800 bg-zinc-900 text-center relative shrink-0",children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:""}),l.jsxs("div",{className:"text-zinc-500 text-sm",children:[" ",f,"  ()"]})]}),l.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1 bg-zinc-950/50",children:[l.jsxs("div",{className:"flex justify-center items-center gap-6 mb-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`text-5xl font-black ${L} drop-shadow-lg mb-1`,children:k}),l.jsx("div",{className:"text-xs text-zinc-500 font-bold tracking-widest uppercase",children:""})]}),l.jsx("div",{className:"w-px h-12 bg-zinc-800"}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:N}),l.jsx("div",{className:"text-xs text-zinc-500 font-bold",children:""})]})]}),o.length>0&&l.jsxs("div",{className:"mb-4 bg-red-950/20 border border-red-900/30 rounded-lg p-3",children:[l.jsxs("h4",{className:"text-xs font-bold text-red-400 mb-2 flex items-center gap-1",children:[l.jsx(qu,{size:12})," "]}),l.jsx("div",{className:"max-h-24 overflow-y-auto custom-scrollbar space-y-1",children:o.map((U,H)=>l.jsxs("div",{className:"text-xs text-red-300 flex justify-between",children:[l.jsxs("span",{children:[" ",U.round," "]}),l.jsxs("span",{children:[" ",U.count," "]})]},H))})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("h3",{className:"font-bold text-zinc-400 text-sm",children:""}),l.jsxs("div",{className:"flex gap-2 text-[10px]",children:[l.jsxs("span",{className:"flex items-center gap-1 text-zinc-500",children:[l.jsx("span",{className:"w-2 h-2 bg-zinc-500 rounded-full"}),""]}),l.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),""]}),l.jsxs("span",{className:"flex items-center gap-1 text-red-500",children:[l.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),""]})]})]}),l.jsx("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4 font-mono text-sm leading-relaxed max-h-64 overflow-y-auto custom-scrollbar",children:T.length===0?l.jsx("div",{className:"text-zinc-600 italic text-center",children:""}):l.jsx("div",{className:"grid grid-cols-[3rem_1fr_1fr] gap-y-1",children:Array.from({length:Math.ceil(T.length/2)}).map((U,H)=>{var de,O;const w=T[H*2],I=T[H*2+1],B=H+1,re=se=>{const ee=u.findIndex(ie=>ie.id===se.id);return ee<V||ee>G?"text-zinc-500":o.find(ie=>ie.nodeId===se.parentId)?"text-red-400 font-bold":"text-green-400"};return l.jsxs(Os.Fragment,{children:[l.jsxs("div",{className:"text-zinc-600 text-right pr-3",children:[B,"."]}),l.jsx("div",{className:re(w),children:(de=w.move)==null?void 0:de.notation}),l.jsx("div",{className:I?re(I):"",children:(O=I==null?void 0:I.move)==null?void 0:O.notation})]},H)})})})]})]}),l.jsxs("div",{className:"p-4 border-t border-zinc-800 bg-zinc-900 flex gap-3 shrink-0",children:[l.jsxs("button",{onClick:K,className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-lg font-bold transition-colors flex items-center justify-center gap-2 border border-zinc-700",children:[v?l.jsx(yr,{size:18,className:"text-green-500"}):l.jsx($s,{size:18})," "]}),l.jsx("button",{onClick:c,className:"flex-1 py-3 bg-amber-600 hover:bg-amber-500 text-white rounded-lg font-bold transition-colors",children:""})]})]})})},Mo=(d,c,o,f)=>{if(f)try{let u="move";o?u="check":c&&(u=d==="cannon"||d==="C"||d==="c"?"bomb":"eat");const h="/Cloud-Chess-Note/",x=new Audio(`${h}sound/${u}.mp3`);x.volume=1;const v=x.play();v!==void 0&&v.catch(y=>{console.warn("Audio play failed (interaction required or file missing):",y)})}catch(u){console.error("Audio error:",u)}},Po=(d,c)=>{let o=null;for(let f=0;f<10;f++){for(let u=0;u<9;u++){const h=d[f][u];if(h&&h.type==="king"&&h.color===c){o={r:f,c:u};break}}if(o)break}if(!o)return!1;for(let f=0;f<10;f++)for(let u=0;u<9;u++){const h=d[f][u];if(h&&h.color!==c&&oh(d,{r:f,c:u},o,h))return!0}return!1},oh=(d,c,o,f)=>{const u=o.r-c.r,h=o.c-c.c;switch(f.type){case"chariot":if(u===0||h===0){const x=u===0?{r:0,c:h>0?1:-1}:{r:u>0?1:-1,c:0};let v=c.r+x.r,y=c.c+x.c;for(;v!==o.r||y!==o.c;){if(d[v][y])return!1;v+=x.r,y+=x.c}return!0}return!1;case"cannon":if(u===0||h===0){const x=u===0?{r:0,c:h>0?1:-1}:{r:u>0?1:-1,c:0};let v=c.r+x.r,y=c.c+x.c,N=0;for(;v!==o.r||y!==o.c;)d[v][y]&&N++,v+=x.r,y+=x.c;return N===1}return!1;case"horse":if(Math.abs(u)===2&&Math.abs(h)===1||Math.abs(u)===1&&Math.abs(h)===2){const x=c.r+(Math.abs(u)===2?u/2:0),v=c.c+(Math.abs(h)===2?h/2:0);return!d[x][v]}return!1;default:return!1}},Bu=d=>d.split(" ").slice(0,2).join(" "),Ju=(d,c)=>{const o="link-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),f={...d,id:o,parentId:c,children:[]};if(f.children=d.children.map(u=>Ju(u,o)),d.selectedChildId){const u=d.children.findIndex(h=>h.id===d.selectedChildId);u!==-1&&f.children[u]?f.selectedChildId=f.children[u].id:f.selectedChildId=f.children.length>0?f.children[0].id:null}return f},$o=(d,c,o)=>{let f=0;for(const u of c){if(!u.move)continue;const h=d.find(x=>{var v,y;return((v=x.move)==null?void 0:v.notation)===((y=u.move)==null?void 0:y.notation)});if(h)$o(h.children,u.children,h.id);else{const x=Ju(u,o);d.push(x),f++}}return f},ah=(d=!0)=>{const c=br(),o=Qr(c,"red"),[f,u]=C.useState({id:"root",parentId:null,move:null,boardState:c,children:[],comment:"",turn:"red",selectedChildId:null,fen:o}),[h,x]=C.useState("root"),[v,y]=C.useState({show:!1,title:"",message:"",type:"info"}),[N,S]=C.useState({show:!1,title:"",message:"",onConfirm:()=>{}}),[k,L]=C.useState({active:!1,side:"red",mode:"main",randomRange:""}),[V,G]=C.useState([]),[T,_]=C.useState(0),[K,U]=C.useState("root"),[H,w]=C.useState(!1),I=C.useRef(null),B=()=>y(q=>({...q,show:!1})),re=(q,J,te)=>{S({show:!0,title:q,message:J,onConfirm:te})},de=()=>{S(q=>({...q,show:!1}))},O=(q,J)=>{if(J.id===q)return J;for(const te of J.children){const ue=O(q,te);if(ue)return ue}return null},se=(q,J)=>{const te=(ue,Pe,Te)=>{if(ue.id===J)return{node:ue,parent:Pe,index:Te};for(let Ie=0;Ie<ue.children.length;Ie++){const Fe=te(ue.children[Ie],ue,Ie);if(Fe)return Fe}return null};return te(q,null,-1)},ee=(q,J)=>{if(J.id===q)return[J];for(const te of J.children){const ue=ee(q,te);if(ue)return[J,...ue]}return null},ce=q=>{const J=ee(q,f);return J?Math.floor((J.length-1)/2)+1:1},ie=C.useMemo(()=>O(h,f)||f,[f,h]),F=C.useMemo(()=>{const q=ee(ie.id,f);if(!q)return[f];const J=[];let te=ie,ue=0;for(;te.children.length>0&&ue<200;){let Pe=te.selectedChildId?te.children.find(Te=>Te.id===te.selectedChildId):te.children[0];Pe||(Pe=te.children[0]),J.push(Pe),te=Pe,ue++}return[...q,...J]},[ie,f]);C.useEffect(()=>{if(!k.active){I.current&&clearTimeout(I.current);return}const q=O(h,f);if(!q)return;if(q.children.length===0){I.current=window.setTimeout(()=>{L(te=>({...te,active:!1})),w(!0)},1e3);return}return k.side==="both"||q.turn===k.side||(I.current=window.setTimeout(()=>{const te=q.children;let ue;if(k.mode==="random"){let Pe=te.map((Ie,Fe)=>Fe);if(k.randomRange)try{const Fe=k.randomRange.toUpperCase().split(/[,\s]+/),Oe=[];Fe.forEach(oe=>{if(oe.includes("-")){const[g,ve]=oe.split("-"),he=g.charCodeAt(0)-65,A=ve.charCodeAt(0)-65;if(!isNaN(he)&&!isNaN(A))for(let me=Math.min(he,A);me<=Math.max(he,A);me++)Oe.push(me)}else{const g=oe.charCodeAt(0)-65;isNaN(g)||Oe.push(g)}}),Oe.length>0&&(Pe=Pe.filter(oe=>Oe.includes(oe)))}catch{}Pe.length===0&&(Pe=te.map((Ie,Fe)=>Fe));const Te=Pe[Math.floor(Math.random()*Pe.length)];ue=te[Te]}else ue=te[0];if(ue&&(x(ue.id),ue.move)){const Pe=ue.turn,Te=Po(ue.boardState,Pe);Mo(ue.move.piece.type,!!ue.move.captured,Te,d)}},800)),()=>{I.current&&clearTimeout(I.current)}},[k,h,f,d]);const fe=(q,J,te)=>{if(te){te.comment||(te.comment=""),u(te),x(te.id);return}const{board:ue,turn:Pe}=rr(q),Te={id:"root-"+Date.now(),parentId:null,move:null,boardState:ue,children:[],comment:"",turn:Pe,selectedChildId:null,fen:q};let Ie=Te,Fe=ue,Oe=Pe;for(const oe of J){const[g,ve]=oe.moveStr.split("-").map(Number),he={r:Math.floor(g/9),c:g%9},A={r:Math.floor(ve/9),c:ve%9},me=Fe[he.r][he.c];if(!me)break;const Ne=Fe[A.r][A.c],qe=Fe.map(st=>[...st]);qe[A.r][A.c]=me,qe[he.r][he.c]=null;const Ze=Oe==="red"?"black":"red",et=Qr(qe,Ze),Ge={id:"node-"+Date.now()+Math.random().toString().slice(2,6),parentId:Ie.id,move:{from:he,to:A,piece:me,captured:Ne,notation:oe.notation},boardState:qe,children:[],comment:oe.comment||"",turn:Ze,selectedChildId:null,fen:et};Ie.children.push(Ge),Ie.selectedChildId=Ge.id,Ie=Ge,Fe=qe,Oe=Ze}u(Te),x(Te.id)},X=(q,J)=>{if(k.active){const Oe=O(h,f);if(!Oe||!(k.side==="both"||Oe.turn===k.side))return!1;const g=Oe.children.find(ve=>{if(!ve.move)return!1;const he=ve.move;return he.from.r===q.from.r&&he.from.c===q.from.c&&he.to.r===q.to.r&&he.to.c===q.to.c});if(g){x(g.id);const ve=g.turn,he=Po(g.boardState,ve);return Mo(q.piece.type,!!q.captured,he,d),_(A=>A+1),!0}else{const ve=ce(Oe.id);return G(he=>{const A=he.findIndex(me=>me.nodeId===Oe.id);if(A>=0){const me=[...he];return me[A]={...me[A],count:me[A].count+1},me}else{const me=Oe.children.map(Ne=>{var qe;return((qe=Ne.move)==null?void 0:qe.notation)||""});return[...he,{round:ve,nodeId:Oe.id,correctNotations:me,count:1}]}}),!1}}const te=ie.turn==="red"?"black":"red",ue=Po(J,te);Mo(q.piece.type,!!q.captured,ue,d);const Pe=JSON.parse(JSON.stringify(f)),Te=se(Pe,h);if(!Te)return!1;const Ie=Te.node,Fe=Ie.children.find(Oe=>{var oe;return((oe=Oe.move)==null?void 0:oe.notation)===q.notation});if(Fe)Ie.selectedChildId=Fe.id,u(Pe),x(Fe.id);else{const Oe=Ie.turn==="red"?"black":"red",oe=Qr(J,Oe),g={id:Date.now().toString()+Math.random().toString().slice(2,6),parentId:Ie.id,move:q,boardState:J,children:[],comment:"",turn:Oe,selectedChildId:null,fen:oe};Ie.children.push(g),Ie.selectedChildId=g.id,u(Pe),x(g.id)}return!0},W=C.useCallback(()=>{const q=O(h,f);if(!q||q.children.length===0)return null;const J=q.selectedChildId?q.children.find(te=>te.id===q.selectedChildId):q.children[0];return J!=null&&J.move?{from:J.move.from,to:J.move.to}:null},[h,f]),z=q=>{if(k.active)return;const J=JSON.parse(JSON.stringify(f)),te=(Pe,Te)=>{if(Pe.id===Te)return[Pe];for(const Ie of Pe.children){const Fe=te(Ie,Te);if(Fe)return[Pe,...Fe]}return null},ue=te(J,q.id);if(ue)for(let Pe=0;Pe<ue.length-1;Pe++)ue[Pe].selectedChildId=ue[Pe+1].id;u(J),x(q.id)},D=(q,J)=>{const te=JSON.parse(JSON.stringify(f)),ue=se(te,q);ue&&(ue.node.comment=J,u(te))},$=q=>{const J=JSON.parse(JSON.stringify(f));let te=0;q.forEach(({id:ue,text:Pe})=>{const Te=se(J,ue);Te&&(Te.node.comment=Pe,te++)}),te>0&&u(J)},p=()=>{if(h==="root"){y({show:!0,title:"",message:"",type:"error"});return}M(h)},M=q=>{if(q==="root")return;const J=JSON.parse(JSON.stringify(f)),te=se(J,q);if(!te||!te.parent)return;const{parent:ue,index:Pe}=te;ue.children.splice(Pe,1);let Te=ue.id;if(ue.selectedChildId===q)if(ue.children.length>0){const Fe=Math.min(Pe,ue.children.length-1),Oe=ue.children[Fe];ue.selectedChildId=Oe.id}else ue.selectedChildId=null;O(h,J)||(ue.selectedChildId?Te=ue.selectedChildId:Te=ue.id,x(Te)),u(J),y({show:!0,title:"",message:"",type:"success"})},le=(q,J)=>{const te=JSON.parse(JSON.stringify(f)),ue=se(te,q);if(ue&&ue.parent){const{parent:Pe,index:Te}=ue,Ie=Pe.children;J==="up"&&Te>0?([Ie[Te],Ie[Te-1]]=[Ie[Te-1],Ie[Te]],u(te)):J==="down"&&Te<Ie.length-1&&([Ie[Te],Ie[Te+1]]=[Ie[Te+1],Ie[Te]],u(te))}},xe=()=>{if(h==="root"){y({show:!0,title:"",message:"",type:"error"});return}const q=JSON.parse(JSON.stringify(f)),J=ie.fen,te=Bu(J),ue=[],Pe=Fe=>{Bu(Fe.fen)===te&&ue.push(Fe),Fe.children.forEach(Pe)};if(Pe(q),ue.length<2){y({show:!0,title:"",message:"",type:"info"});return}const Te=[];ue.forEach(Fe=>{$o(Te,Fe.children,"temp-union-parent")});let Ie=0;ue.forEach(Fe=>{const Oe=$o(Fe.children,Te,Fe.id);Ie+=Oe}),Ie>0?(u(q),y({show:!0,title:"",message:` ${ue.length} 
 ${Ie} ()`,type:"success"})):y({show:!0,title:"",message:` ${ue.length} `,type:"info"})},Ce=C.useCallback(q=>{if(k.active)return;if(q==="start"){x(f.id);return}const J=O(h,f);if(J){if(q==="prev")J.parentId&&x(J.parentId);else if(q==="next"){if(J.children.length>0){const te=J.selectedChildId||J.children[0].id;x(te)}}else if(q==="end"){let te=J;for(;te.children.length>0;){const ue=te.selectedChildId?te.children.find(Pe=>Pe.id===te.selectedChildId):te.children[0];ue?te=ue:te=te.children[0]}x(te.id)}}},[h,f,k.active]),$e=C.useCallback(q=>{if(k.active)return;let J=O(h,f);if(J)if(q==="prev"){if(J.parentId)J=O(J.parentId,f);else{y({show:!0,title:"",message:"",type:"info"});return}for(;J&&J.parentId;){const te=O(J.parentId,f);if(!te)break;if(te.children.length>1){x(J.id);return}J=te}y({show:!0,title:"",message:"",type:"info"})}else{for(;J.children.length>0;){if(J.children.length>1){const ue=J.selectedChildId||J.children[0].id;x(ue);return}const te=J.selectedChildId||J.children[0].id;J=J.children.find(ue=>ue.id===te)||J.children[0]}y({show:!0,title:"",message:"",type:"info"})}},[h,f,k.active]),pe=C.useCallback(q=>{if(k.active)return;const J=O(h,f);if(!J||!J.parentId)return;const te=O(J.parentId,f);if(!te||te.children.length<=1)return;const ue=te.children.findIndex(Te=>Te.id===J.id);if(ue===-1)return;let Pe=-1;if(q==="up"?ue>0&&(Pe=ue-1):ue<te.children.length-1&&(Pe=ue+1),Pe!==-1){const Te=te.children[Pe].id,Ie=JSON.parse(JSON.stringify(f)),Fe=se(Ie,te.id);Fe&&(Fe.node.selectedChildId=Te,u(Ie),x(Te))}},[h,f,k.active]),Ee=C.useCallback(q=>{if(k.active)return;const te=(ue=>{let Pe=[ue],Te=ue;for(;Te.children.length>0;){let Ie=Te.selectedChildId?Te.children.find(Fe=>Fe.id===Te.selectedChildId):Te.children[0];Ie||(Ie=Te.children[0]),Pe.push(Ie),Te=Ie}return Pe})(f);q>=0&&q<te.length&&x(te[q].id)},[f,k.active]),Me=C.useCallback((q,J=!1)=>{if(k.active)return;O(q,f)&&x(q)},[f,k.active]);return{currentNode:ie,rootNode:f,activePath:F,addMove:X,importGame:fe,jumpToMove:z,updateComment:D,batchUpdateComments:$,deleteCurrentMove:p,deleteNode:M,reorderChildren:le,linkMovesByFen:xe,navigate:Ce,navigateVariation:$e,cycleVariation:pe,jumpToStep:Ee,jumpToNode:Me,notification:v,closeNotification:B,confirmState:N,showConfirm:re,closeConfirm:de,setRootNode:q=>{u(q),x(q.id)},restoreState:(q,J)=>{u(q),x(J||q.id)},memConfig:k,memErrors:V,memTotalSteps:T,memStartNodeId:K,getHint:W,showReport:H,startMemorization:q=>{L({...q,active:!0}),G([]),_(0),U(h)},stopMemorization:()=>{L(q=>({...q,active:!1})),w(!0)},setShowReport:w}},ch=({onPrev:d,onNext:c,onUp:o,onDown:f,onTabNext:u,onTabPrev:h})=>{C.useEffect(()=>{const x=v=>{const y=v.target;if(!(["INPUT","TEXTAREA","SELECT"].includes(y.tagName)||y.isContentEditable)){if(v.altKey){if(v.key==="ArrowUp"){h&&(v.preventDefault(),h());return}if(v.key==="ArrowDown"){u&&(v.preventDefault(),u());return}}switch(v.key){case"ArrowLeft":d&&(v.preventDefault(),d());break;case"ArrowRight":c&&(v.preventDefault(),c());break;case"ArrowUp":o&&(v.preventDefault(),o());break;case"ArrowDown":f&&(v.preventDefault(),f());break}}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[d,c,o,f,u,h])},uh=(d,c,o,f)=>{const[u,h]=C.useState(!1),[x,v]=C.useState("cloud"),[y,N]=C.useState(15),[S,k]=C.useState([]),[L,V]=C.useState(0),[G,T]=C.useState(""),[_,K]=C.useState(null),U=C.useRef(null),H=C.useRef(!1);C.useEffect(()=>{S.length>0&&!u&&V(100)},[S.length]);const w=(O,se,ee,ce,ie,F)=>{var $;let fe=0,X=null,W="";if(ce){const p=En(ce.move);if(p){const M=O.boardState[p.from.r][p.from.c];O.boardState[p.to.r][p.to.c],M?W=lr(O.boardState,{from:p.from,to:p.to,piece:M}):W=ce.move}}const z=(ce==null?void 0:ce.score)||0;if(ee){const p=ee.score;X=p,fe=Math.abs(z-p)}else ce&&(fe=200,X=z+(F?-200:200));let D="good";return fe>=251?D="blunder":fe>=151?D="mistake":fe>=51&&(D="inaccuracy"),{nodeId:se.id,moveIndex:ie,moveNotation:(($=se.move)==null?void 0:$.notation)||"",fen:O.fen,score:X,deviation:fe,isRedTurn:F,bestMove:W,bestScore:z,quality:D}};return{isAnalyzing:u,analysisMode:x,localDepth:y,setLocalDepth:N,results:S,setResults:k,progress:L,currentStepInfo:G,startCloudAnalysis:async()=>{h(!0),v("cloud"),k([]),V(0),U.current=new AbortController;const O=[],se=d.length-1;for(let ee=0;ee<se&&!U.current.signal.aborted;ee++){const ce=d[ee],ie=d[ee+1];T(` ${ee+1} ...`);const F=await Ku(ce.fen);let fe="";if(ie.move){const pe=ie.move.from,Ee=ie.move.to,Me=["a","b","c","d","e","f","g","h","i"];fe=`${Me[pe.c]}${9-pe.r}${Me[Ee.c]}${9-Ee.r}`}const X=F.find(pe=>pe.move===fe),W=F.length>0?F[0]:null,D=ce.fen.split(" "),$=D.length>1?D[1]:"w",p=$==="w"||$==="r";let M=X?X.score:null,le=W?W.score:null;p||(M!==null&&(M*=-1),le!==null&&(le*=-1));const xe=X?{...X,score:M}:void 0,Ce=W?{...W,score:le}:void 0,$e=w(ce,ie,xe,Ce,ee+1,p);O.push($e),k([...O]),V((ee+1)/se*100),await new Promise(pe=>setTimeout(pe,100))}h(!1),T("")},startLocalAnalysis:async O=>{var X;const se=vr.getInstance();try{await se.init()}catch{alert("");return}h(!0),v("local"),k([]),V(0),H.current=!1;const ee=[],ce=d.length-1,ie=[],F=[],fe=O||y;try{T("...");const W=await se.analyzeFixedDepth(d[0].fen,fe);ie[0]=d[0].turn==="red"?W.score:-W.score,F[0]=W.bestMove||"";for(let z=0;z<ce&&!H.current;z++){const D=d[z],$=d[z+1];T(` ${z+1} ...`),K($.id);const p=await se.analyzeFixedDepth($.fen,fe),le=$.turn==="red"?p.score:-p.score;ie[z+1]=le,F[z+1]=p.bestMove||"";const xe=ie[z],Ce=ie[z+1],$e=D.turn==="red";let pe=$e?xe-Ce:Ce-xe;const Ee=$.move?(()=>{const q=$.move.from,J=$.move.to,te=["a","b","c","d","e","f","g","h","i"];return`${te[q.c]}${9-q.r}${te[J.c]}${9-J.r}`})():"",Me=F[z];Ee===Me.trim().toLowerCase()&&(pe=0),pe=Math.max(0,pe);let Xe="good";pe>500?Xe="blunder":pe>200?Xe="mistake":pe>50&&(Xe="inaccuracy");let nt="";const Nt=En(Me);if(Nt){const q=D.boardState[Nt.from.r][Nt.from.c],J=D.boardState[Nt.to.r][Nt.to.c];q&&(nt=lr(D.boardState,{from:Nt.from,to:Nt.to,piece:q,captured:J}))}const pt={nodeId:$.id,moveIndex:z+1,moveNotation:((X=$.move)==null?void 0:X.notation)||"",fen:D.fen,score:Ce,deviation:pe,isRedTurn:$e,bestMove:nt||Me,bestScore:xe,quality:Xe};ee.push(pt),k([...ee]),V((z+1)/ce*100)}}catch(W){console.error(W)}se.stopAnalysis(),h(!1),T("")},stopAnalysis:()=>{U.current&&U.current.abort(),H.current=!0,h(!1)},writeAnnotations:()=>{if(S.length===0)return;const O=[];S.forEach(se=>{if(se.quality!=="good"){const ee=d.find(fe=>fe.id===se.nodeId);if(!ee)return;let ce="";se.quality==="blunder"?ce="":se.quality==="mistake"?ce="":se.quality==="inaccuracy"&&(ce="");const ie=`${ce}
: ${se.score}
: ${se.deviation}
: ${se.bestMove} (${se.bestScore})`;let F=ee.comment||"";F.includes(`: ${se.score}`)||(F.trim().length>0?F+=`
`+ie:F=ie,O.push({id:se.nodeId,text:F}))}}),o(O),alert(` ${O.length} `),f()},onJumpToStep:c,setAnalysisMode:v,currentAnalyzingNodeId:_}};function Uu(d,c){const[o,f]=C.useState(()=>{if(typeof window>"u")return c;try{const h=window.localStorage.getItem(d);return h?JSON.parse(h):c}catch(h){return console.warn(`Error reading localStorage key "${d}":`,h),c}});C.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(d,JSON.stringify(o))}catch(h){console.warn(`Error writing to localStorage key "${d}":`,h)}},[d,o]);const u=C.useCallback(h=>{f(x=>h instanceof Function?h(x):h)},[]);return[o,u]}const dh={enableSound:!0,showPlayerNames:!0,showVariationArrows:!0,showCoords:!0,animationSpeed:300,boardSize:"large",showEngineArrows:!0},_o={title:"",event:"",date:new Date().toISOString().split("T")[0],result:"unknown",redName:"",blackName:""},fh=()=>{const[d,c]=C.useState(dh),[o,f]=C.useState(!0),[u,h]=C.useState(!1),[x,v]=Uu("clipboard-tags",["","","","","",""]),y=()=>{const Q=prompt(" (6):",x.join(", "));if(Q!==null){const ye=Q.split(",").map(we=>we.trim()).filter(we=>we.length>0).slice(0,6);ye.length>0&&v(ye)}},N=C.useRef(!1),{currentNode:S,rootNode:k,activePath:L,addMove:V,importGame:G,jumpToMove:T,updateComment:_,batchUpdateComments:K,deleteCurrentMove:U,deleteNode:H,reorderChildren:w,linkMovesByFen:I,navigate:B,navigateVariation:re,cycleVariation:de,jumpToStep:O,jumpToNode:se,notification:ee,closeNotification:ce,confirmState:ie,showConfirm:F,closeConfirm:fe,setRootNode:X,restoreState:W,memConfig:z,memErrors:D,memTotalSteps:$,memStartNodeId:p,getHint:M,showReport:le,startMemorization:xe,stopMemorization:Ce,setShowReport:$e}=ah(d.enableSound&&!N.current),pe=uh(L,Q=>{f(!1),O(Q)},K,()=>{window.innerWidth<1024?oe("none"):Ne("moves")});C.useEffect(()=>{N.current=pe.isAnalyzing},[pe.isAnalyzing]);const Ee=()=>{const Q=`game-${Date.now()}`,ye=br(),we={id:`root-${Q}`,parentId:null,move:null,boardState:ye,children:[],comment:"",turn:"red",selectedChildId:null,fen:"rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR w - - 0 1"};return[{id:Q,title:" 1",rootNode:we,currentNodeId:we.id,metadata:{..._o,title:" 1"},createdAt:Date.now(),colorTag:"none",analysisResults:[]}]},[Me,Xe]=Uu("cloud-chess-tabs",Ee()),[nt,Nt]=C.useState(()=>{var Q;return((Q=Me[0])==null?void 0:Q.id)||""}),[pt,q]=C.useState(()=>{var Q;return((Q=Me[0])==null?void 0:Q.metadata)||_o}),J=C.useRef(!1);C.useEffect(()=>{if(Me.length>0&&nt){const Q=Me.find(ye=>ye.id===nt);Q&&W(Q.rootNode,Q.currentNodeId)}},[]),C.useEffect(()=>{if(!nt||J.current)return;const Q=Me.find(ye=>ye.id===nt);!Q||k.id!==Q.rootNode.id||Xe(ye=>{const we=ye.find(We=>We.id===nt);return!we||we.rootNode===k&&we.currentNodeId===S.id&&we.metadata===pt?ye:ye.map(We=>We.id===nt?{...We,rootNode:JSON.parse(JSON.stringify(k)),currentNodeId:S.id,metadata:{...pt}}:We)})},[k,S.id,pt,nt]);const te=(Q,ye)=>{if(!ye&&Q===nt)return;J.current=!0,nt&&pe.results.length>0&&Xe(We=>We.map(ln=>ln.id===nt?{...ln,analysisResults:pe.results}:ln));const we=ye||Me.find(We=>We.id===Q);if(we){f(!1),Nt(Q),q({...we.metadata});const We=JSON.parse(JSON.stringify(we.rootNode));W(We,we.currentNodeId),pe.setResults(we.analysisResults||[]),setTimeout(()=>{J.current=!1},150)}},ue=()=>{if(Me.length>=10){alert(` 10 
`);return}const Q=`game-${Date.now()}`,ye=br(),we={id:`root-${Q}`,parentId:null,move:null,boardState:ye,children:[],comment:"",turn:"red",selectedChildId:null,fen:"rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR w - - 0 1"},We=["blue","green","red","orange","purple","teal","dark","pink","yellow","coffee"],ln=Me.map(kn=>kn.colorTag).filter(kn=>kn&&kn!=="none"),$n=We.find(kn=>!ln.includes(kn))||We[Me.length%We.length],sr={id:Q,title:` ${Me.length+1}`,rootNode:we,currentNodeId:we.id,metadata:{..._o,title:` ${Me.length+1}`},createdAt:Date.now(),colorTag:$n,analysisResults:[]};Xe(kn=>[...kn,sr]),te(Q,sr)},Pe=Q=>{if(Me.length<=1)return;const ye=Me.filter(we=>we.id!==Q);Xe(ye),nt===Q&&te(ye[ye.length-1].id)},Te=(Q,ye)=>{Xe(we=>we.map(We=>We.id===Q?{...We,title:ye}:We))},Ie=(Q,ye)=>{const we=Me.findIndex(ln=>ln.id===Q);if(we===-1)return;const We=[...Me];ye==="up"&&we>0?[We[we],We[we-1]]=[We[we-1],We[we]]:ye==="down"&&we<We.length-1&&([We[we],We[we+1]]=[We[we+1],We[we]]),Xe(We)},Fe=(Q,ye)=>{Xe(we=>we.map(We=>We.id===Q?{...We,colorTag:ye}:We))},[Oe,oe]=C.useState("none"),[g,ve]=C.useState(!1),[he,A]=C.useState(!1),[me,Ne]=C.useState("moves"),[qe,Ze]=C.useState(!1),[et,Ge]=C.useState(!1),[st,Ke]=C.useState(!1),[rt,it]=C.useState(!1),[Ct,Je]=C.useState(!1),[wt,dt]=C.useState(!1),[yt,fn]=C.useState(null),[Ht,ge]=C.useState(null),[He,Qe]=C.useState(!1),[Re,Be]=C.useState(!1),[Ae,Ve]=C.useState(null);C.useEffect(()=>{pe.isAnalyzing&&pe.currentAnalyzingNodeId&&(f(!1),se(pe.currentAnalyzingNodeId,!0))},[pe.currentAnalyzingNodeId,pe.isAnalyzing,se]),C.useEffect(()=>{pe.results.length>0&&nt&&Xe(Q=>Q.map(ye=>ye.id===nt?{...ye,analysisResults:pe.results}:ye))},[pe.results,nt]),C.useEffect(()=>{Ve(null)},[S.id,Re]);const at=Os.useMemo(()=>{if(!d.showEngineArrows||!(Ae!=null&&Ae.pv)||Ae.pv.length===0)return[];const Q=[],ye=En(Ae.pv[0]);if(ye&&Q.push({...ye,color:S.turn}),Ae.pv.length>1){const we=En(Ae.pv[1]);we&&Q.push({...we,color:S.turn==="red"?"black":"red"})}return Q},[Ae,S.turn,d.showEngineArrows]);ch({onPrev:()=>{z.active||(f(!1),B("prev"))},onNext:()=>{z.active||(f(!0),B("next"))},onUp:()=>{z.active||(f(!1),de("up"))},onDown:()=>{z.active||(f(!1),de("down"))},onTabPrev:()=>{const ye=(Me.findIndex(we=>we.id===nt)-1+Me.length)%Me.length;te(Me[ye].id)},onTabNext:()=>{const ye=(Me.findIndex(we=>we.id===nt)+1)%Me.length;te(Me[ye].id)}});const mt=(Q,ye)=>{oe("analysis"),Ne("analysis");const we=Q||pe.analysisMode;Q&&pe.setAnalysisMode(Q),ye&&pe.setLocalDepth(ye),we==="cloud"?pe.startCloudAnalysis():(console.log("Starting Local Analysis with depth:",ye),pe.startLocalAnalysis(ye))},Et=Q=>F("",Q,U),_t=(Q,ye)=>F("",ye,()=>H(Q)),kt=Q=>{const ye=S.boardState,we=ye[Q.from.r][Q.from.c];if(!we||we.color!==S.turn)return;const We=ye[Q.to.r][Q.to.c],ln=lr(ye,{...Q,piece:we}),$n=ye.map(sr=>[...sr]);$n[Q.to.r][Q.to.c]=we,$n[Q.from.r][Q.from.c]=null,f(!0),V({...Q,piece:we,captured:We,notation:ln},$n)},Qt=Q=>{try{const{board:ye,turn:we}=rr(Q);X({id:"root-"+Date.now(),parentId:null,move:null,boardState:ye,children:[],comment:"",turn:we,selectedChildId:null,fen:Q}),Ze(!1)}catch{alert("FEN ")}},rn=()=>{const Q=M();Q&&(ge(Q),setTimeout(()=>ge(null),1500))},Vt=L.findIndex(Q=>Q.id===S.id),[wn,hn]=C.useState(!1);return C.useEffect(()=>{const Q=()=>{const ye=window.innerWidth,we=window.innerHeight,We=ye<we||ye<1024;hn(We)};return Q(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),l.jsxs(l.Fragment,{children:[l.jsx(Q0,{isMobilePortrait:wn,header:l.jsx(A0,{title:pt.title,onTitleChange:Q=>q(ye=>({...ye,title:Q})),onOpenInfo:()=>Qe(!0),onOpenEdit:()=>Ze(!0),onOpenSettings:()=>Ge(!0),onOpenImport:()=>Ke(!0),onOpenExport:()=>it(!0),onOpenGif:()=>Je(!0),onOpenMemorize:()=>z.active?Ce():dt(!0),isMemorizing:z.active}),leftSidebar:l.jsxs(l.Fragment,{children:[l.jsx(rh,{tabs:Me,activeTabId:nt,onSwitch:te,onAdd:ue,onDelete:Pe,onRename:Te,onReorder:Ie,onColorChange:Fe}),l.jsx(Lu,{currentFen:S.fen,currentBoard:S.boardState,onMoveClick:kt,onOpenAnalysis:()=>h(!0),isEnabled:Re,onToggleEnabled:Be,onEngineStatsUpdate:Ve})]}),rightSidebar:z.active?l.jsxs("div",{className:"flex flex-col h-full bg-zinc-900 items-center justify-center text-zinc-500 gap-4 p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-900/20 flex items-center justify-center animate-pulse",children:l.jsx(Ds,{size:32,className:"text-amber-500"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-zinc-300",children:""}),l.jsx("p",{className:"text-sm mt-2",children:""})]})]}):me==="analysis"?l.jsxs("div",{className:"flex flex-col h-full bg-zinc-950",children:[l.jsxs("div",{className:"p-4 border-b border-zinc-800 flex justify-between items-center",children:[l.jsxs("h2",{className:"font-bold flex items-center gap-2",children:[l.jsx(To,{size:18,className:"text-blue-500"})," "]}),l.jsx("button",{onClick:()=>Ne("moves"),className:"p-1 hover:bg-zinc-800 rounded text-zinc-400",children:l.jsx(nn,{size:16})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l.jsx(Du,{...pe,onJumpToNode:se})})]}):l.jsx(Ru,{movePath:L,currentNode:S,rootNode:k,onJumpToMove:Q=>{f(!1),T(Q)},onUpdateComment:_,onRequestDelete:Et,onRequestDeleteNode:_t,onReorder:w,onLinkFen:I,clipboardTags:x,onEditTags:y}),board:l.jsx(Yu,{onMoveMade:(Q,ye)=>{f(!0);const we=V(Q,ye);return!we&&z.active&&(fn(Q.to),setTimeout(()=>fn(null),200)),we},currentBoard:S.boardState,currentTurn:S.turn,lastMove:S.move?{from:S.move.from,to:S.move.to}:null,isFlipped:g,isMirrored:he,redName:pt.redName,blackName:pt.blackName,flashCoord:yt,hintMove:Ht,currentNode:S,onNodeSelect:Q=>{f(!1),T(Q)},settings:d,shouldAnimate:o,engineBestMoves:at}),controls:z.active?l.jsxs("div",{className:"flex gap-4 p-4 bg-zinc-900 border-t border-zinc-800 justify-center",children:[l.jsxs("button",{onClick:rn,className:"flex items-center gap-2 px-6 py-3 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg font-bold shadow-lg shadow-yellow-900/20 active:scale-95 transition-all",children:[l.jsx(y0,{size:20,fill:"currentColor"})," "]}),l.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-500 text-white rounded-lg font-bold shadow-lg shadow-red-900/20 active:scale-95 transition-all",children:[l.jsx(Vu,{size:20})," "]})]}):l.jsxs("div",{className:"flex flex-col w-full",children:[l.jsx(U0,{onNavigate:Q=>{f(Q==="next"||Q==="end"),B(Q)},onNavigateVariation:Q=>{f(!1),re(Q)},onJumpToStep:Q=>{f(!1),O(Q)},onFlip:()=>ve(!g),onMirror:()=>A(!he),currentIndex:Vt!==-1?Vt:0,totalSteps:L.length,disabled:z.active}),wn&&(Oe==="cloud"||Oe==="engine")&&l.jsx("div",{className:"h-[25vh] border-t border-zinc-800 overflow-hidden",children:l.jsx(Lu,{currentFen:S.fen,currentBoard:S.boardState,onMoveClick:Q=>{kt(Q)},onOpenAnalysis:()=>h(!0),isEnabled:Re,onToggleEnabled:Be,onEngineStatsUpdate:Ve,isCompact:!0,forcedMode:Oe==="cloud"?"cloud":"local",onNavigate:Q=>{f(Q==="next"),B(Q)},onMenu:()=>Ge(!0)})}),wn&&Oe==="analysis"&&l.jsxs("div",{className:"h-[25vh] border-t border-zinc-800 overflow-hidden bg-zinc-950 p-2 flex flex-col relative",children:[l.jsx("button",{onClick:()=>oe("none"),className:"absolute top-2 right-2 p-1 text-zinc-500 z-20",children:l.jsx(nn,{size:16})}),l.jsx(Du,{...pe,isCompact:!0,onJumpToNode:se})]})]}),mobileTabs:l.jsxs("div",{className:"grid grid-cols-5 gap-1 h-full px-1",children:[l.jsxs("button",{onClick:()=>oe(Oe==="moves"?"none":"moves"),className:`border border-zinc-700 rounded-lg flex flex-col items-center justify-center transition-all ${Oe==="moves"?"bg-zinc-700 text-white":"bg-zinc-800 text-zinc-300"}`,children:[l.jsx(w0,{size:16})," ",l.jsx("span",{className:"text-[10px] font-bold",children:""})]}),l.jsxs("button",{onClick:()=>oe(Oe==="cloud"?"none":"cloud"),className:`border border-zinc-700 rounded-lg flex flex-col items-center justify-center transition-all ${Oe==="cloud"?"bg-zinc-700 text-white":"bg-zinc-800 text-zinc-300"}`,children:[l.jsx(Vr,{size:16})," ",l.jsx("span",{className:"text-[10px] font-bold",children:""})]}),l.jsxs("button",{onClick:()=>oe(Oe==="engine"?"none":"engine"),className:`border border-zinc-700 rounded-lg flex flex-col items-center justify-center transition-all ${Oe==="engine"?"bg-zinc-700 text-white":"bg-zinc-800 text-zinc-300"}`,children:[l.jsx(Sl,{size:16})," ",l.jsx("span",{className:"text-[10px] font-bold",children:""})]}),l.jsxs("button",{onClick:()=>{h(!0)},className:`border border-zinc-700 rounded-lg flex flex-col items-center justify-center transition-all ${Oe==="analysis"?"bg-zinc-700 text-white":"bg-zinc-800 text-zinc-300"}`,children:[l.jsx(To,{size:16})," ",l.jsx("span",{className:"text-[10px] font-bold",children:""})]}),l.jsxs("button",{onClick:()=>oe(Oe==="tabs"?"none":"tabs"),className:`border border-zinc-700 rounded-lg flex flex-col items-center justify-center transition-all ${Oe==="tabs"?"bg-zinc-700 text-white":"bg-zinc-800 text-zinc-300"}`,children:[l.jsx(N0,{size:16})," ",l.jsx("span",{className:"text-[10px] font-bold",children:""})]})]}),mobileOverlay:l.jsxs(l.Fragment,{children:[l.jsx(K0,{isOpen:u,onClose:()=>h(!1),analysisMode:pe.analysisMode,setAnalysisMode:pe.setAnalysisMode,localDepth:pe.localDepth,setLocalDepth:pe.setLocalDepth,onStart:mt}),wn&&Oe==="tabs"&&l.jsx(lh,{isOpen:!0,onClose:()=>oe("none"),tabs:Me,activeTabId:nt,onSwitch:te,onAdd:ue,onDelete:Pe}),wn&&Oe==="moves"&&l.jsxs("div",{className:"fixed inset-0 z-[60] bg-zinc-950 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 h-14 bg-zinc-900 border-b border-zinc-800 shrink-0",children:[l.jsx("div",{className:"flex gap-2 bg-zinc-800 p-1 rounded-lg",children:l.jsx("button",{onClick:()=>oe("moves"),className:`px-4 py-1 rounded-md text-sm transition-all ${Oe==="moves"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:""})}),l.jsx("button",{onClick:()=>oe("none"),className:"w-8 h-8 flex items-center justify-center rounded-full bg-zinc-800 text-zinc-400",children:l.jsx(nn,{size:20})})]}),l.jsx("div",{className:"flex-1 overflow-hidden relative bg-zinc-950",children:l.jsx(Ru,{movePath:L,currentNode:S,rootNode:k,onJumpToMove:Q=>{f(!1),T(Q),oe("none")},onUpdateComment:_,onRequestDelete:Et,onRequestDeleteNode:_t,onReorder:w,onLinkFen:I,clipboardTags:x,onEditTags:y})})]})]})}),l.jsx(q0,{isOpen:et,onClose:()=>Ge(!1),settings:d,onUpdate:c}),l.jsx(W0,{isOpen:He,onClose:()=>Qe(!1),metadata:pt,onSave:Q=>{q(Q),Xe(ye=>ye.map(we=>we.id===nt?{...we,metadata:Q}:we))}}),l.jsx(G0,{isOpen:qe,onClose:()=>Ze(!1),initialFen:S.fen,onConfirm:Qt,isFlippedInitial:g}),l.jsx(Y0,{isOpen:st,onClose:()=>Ke(!1),onImport:Q=>{if(G(Q.fen,Q.moves,Q.root),Q.header){const ye={...pt,title:Q.header.Title||pt.title,redName:Q.header.Red||pt.redName,blackName:Q.header.Black||pt.blackName};q(ye),Xe(we=>we.map(We=>We.id===nt?{...We,metadata:ye}:We))}}}),l.jsx(J0,{isOpen:rt,onClose:()=>it(!1),rootNode:k,metadata:pt}),l.jsx(sh,{isOpen:wt,onClose:()=>dt(!1),onStart:xe}),l.jsx(ih,{isOpen:le,onClose:()=>$e(!1),errors:D,totalSteps:$,activePath:L,startNodeId:p,endNodeId:S.id}),l.jsx(nh,{isOpen:Ct,onClose:()=>Je(!1),activePath:L,rootNode:k,metadata:pt}),ee.show&&l.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6 max-w-sm w-full",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[ee.type==="success"?l.jsx(a0,{className:"text-green-500",size:28}):l.jsx(o0,{className:"text-red-500",size:28}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold",children:ee.title}),l.jsx("p",{className:"text-sm text-zinc-400",children:ee.message})]})]}),l.jsx("button",{onClick:ce,className:"w-full py-2 bg-white text-zinc-950 font-bold rounded-lg",children:""})]})}),ie.show&&l.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:l.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6 max-w-sm w-full",children:[l.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.jsx(u0,{className:"text-amber-500",size:28}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold",children:ie.title}),l.jsx("p",{className:"text-sm text-zinc-400",children:ie.message})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:fe,className:"flex-1 py-2 bg-zinc-800 rounded-lg",children:""}),l.jsx("button",{onClick:()=>{ie.onConfirm(),fe()},className:"flex-1 py-2 bg-red-600 font-bold rounded-lg",children:""})]})]})})]})},Zu=document.getElementById("root");if(!Zu)throw new Error("Could not find root element to mount to");const hh=Jf.createRoot(Zu);hh.render(l.jsx(Os.StrictMode,{children:l.jsx(fh,{})}));
